<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Accessify Minimal Integration</title>
    <style>
        /* Minimal Accessify Styles */
        .accessify-toggle {
            position: fixed; top: 20px; right: 20px; width: 72px; height: 72px;
            background: #007AFF; border: none; border-radius: 16px; color: white;
            font-size: 40px !important; cursor: pointer; z-index: 10001;
            box-shadow: 0 6px 20px rgba(0, 122, 255, 0.4);
            display: flex; align-items: center; justify-content: center;
        }
        .accessify-toggle::before { content: "‚ôø"; }
        .accessify-panel {
            position: fixed; top: 20px; right: 20px; width: 300px; max-width: 90vw;
            background: white; border: 1px solid rgba(0,0,0,0.15); border-radius: 16px;
            padding: 16px; box-shadow: 0 8px 32px rgba(0,0,0,0.15);
            z-index: 10000; font-family: system-ui, sans-serif;
        }
        .accessify-panel.hidden { display: none; }
        .accessify-control { margin: 8px 0; padding: 12px; background: #f8f9fa;
            border-radius: 8px; display: flex; align-items: center; gap: 12px; }
        .accessify-control label { width: 36px; height: 36px; background: #e9ecef;
            border-radius: 6px; display: flex; align-items: center; justify-content: center;
            font-size: 20px !important; }
        .accessify-control select, .accessify-control input { flex: 1; padding: 12px;
            border: 1px solid #ddd; border-radius: 4px; font-size: 20px !important; }
        .accessify-control button { padding: 12px 16px; background: #f8f9fa;
            border: 1px solid #ddd; border-radius: 4px; cursor: pointer; font-size: 20px !important; }
        /* Isolate from text size changes */
        .accessify-toggle, .accessify-panel, .accessify-panel * { font-size: inherit !important; }
        /* RTL Support */
        .accessify-rtl .accessify-panel { right: auto; left: 20px; }
        .accessify-rtl .accessify-toggle { right: auto; left: 20px; }
        @media (max-width: 768px) {
            .accessify-panel { width: calc(100vw - 40px); }
            .accessify-toggle { width: 64px; height: 64px; font-size: 36px !important; }
            .accessify-control select, .accessify-control button { font-size: 18px !important; }
            .accessify-control label { font-size: 18px !important; width: 32px; height: 32px; }
        }
    </style>
</head>
<body>
    <!-- Accessify Controls -->
    <button class="accessify-toggle" onclick="togglePanel()" title="Accessibility Controls">‚ôø</button>
    <div class="accessify-panel" id="panel">
        <h3>‚ôø Accessibility</h3>
        
        <div class="accessify-control">
            <label>A</label>
            <input type="range" min="0.5" max="3" step="0.1" value="1" oninput="setTextSize(this.value)">
            <button onclick="increaseText()">+</button>
            <button onclick="decreaseText()">-</button>
        </div>
        
        <div class="accessify-control">
            <label>‚óê</label>
            <select onchange="setContrast(this.value)">
                <option value="normal">Normal</option>
                <option value="high">High</option>
                <option value="inverted">Inverted</option>
                <option value="grayscale">Grayscale</option>
            </select>
        </div>
        
        <div class="accessify-control">
            <label>üé®</label>
            <select onchange="setTheme(this.value)">
                <option value="default">Default</option>
                <option value="dark">Dark</option>
                <option value="light">Light</option>
                <option value="colorblind-friendly">Colorblind Friendly</option>
            </select>
        </div>
        
        <div class="accessify-control">
            <label>üåà</label>
            <select onchange="setColorFilter(this.value)">
                <option value="none">No Filter</option>
                <option value="protanopia">Protanopia</option>
                <option value="deuteranopia">Deuteranopia</option>
                <option value="tritanopia">Tritanopia</option>
                <option value="achromatopsia">Achromatopsia</option>
            </select>
        </div>
        
        <div class="accessify-control">
            <label>üåê</label>
            <select onchange="setLanguage(this.value)">
                <option value="en">English</option>
                <option value="he">◊¢◊ë◊®◊ô◊™</option>
                <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
                <option value="es">Espa√±ol</option>
            </select>
        </div>
        
        <div class="accessify-control">
            <label>‚úì</label>
            <button onclick="runTests()">Test</button>
            <button onclick="resetAll()">Reset</button>
        </div>
    </div>

    <!-- Include Accessify Library -->
    <script src="dist/accessify.min.js"></script>
    
    <script>
        // Minimal Accessify Integration
        let accessify = null;
        let panelVisible = true;
        
        // Initialize
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                accessify = new Accessify({ debug: false });
                await accessify.init();
                console.log('Accessify ready');
            } catch (e) {
                console.error('Accessify failed:', e);
            }
        });
        
        // Panel toggle
        function togglePanel() {
            const panel = document.getElementById('panel');
            panelVisible = !panelVisible;
            panel.classList.toggle('hidden', !panelVisible);
        }
        
        // Text size
        function setTextSize(size) {
            if (accessify?.visual) accessify.visual.setTextSize(parseFloat(size));
        }
        function increaseText() {
            if (accessify?.visual) accessify.visual.increaseTextSize();
        }
        function decreaseText() {
            if (accessify?.visual) accessify.visual.decreaseTextSize();
        }
        
        // Contrast
        function setContrast(mode) {
            if (accessify?.visual) accessify.visual.setContrastMode(mode);
        }
        
        // Theme
        function setTheme(theme) {
            try {
                if (accessify?.visual) {
                    accessify.visual.setTheme(theme);
                    console.log('Theme set to:', theme);
                }
            } catch (error) {
                console.error('Error setting theme:', error);
                alert('Invalid theme. Please select a valid option.');
            }
        }
        
        // Color Filter
        function setColorFilter(filter) {
            try {
                if (accessify?.visual) {
                    accessify.visual.setColorFilter(filter);
                    console.log('Color filter set to:', filter);
                }
            } catch (error) {
                console.error('Error setting color filter:', error);
                // If 'none' is not available, try alternative approach
                if (filter === 'none') {
                    console.log('Note: "none" filter may not be available. Filter will be cleared on next page load.');
                }
            }
        }
        
        // Language
        function setLanguage(lang) {
            if (accessify?.multilingual) accessify.multilingual.setLanguage(lang);
        }
        
        // Testing
        function runTests() {
            if (accessify?.testingUtils) {
                accessify.testingUtils.runAccessibilityTests()
                    .then(r => alert('Tests completed. Check console.'))
                    .catch(e => alert('Tests failed. Check console.'));
            } else {
                alert('Testing not available');
            }
        }
        
        // Reset
        function resetAll() {
            if (accessify?.visual) {
                accessify.visual.resetTextSize();
                accessify.visual.setContrastMode('normal');
                accessify.visual.setTheme('default');
                accessify.visual.setColorFilter('none');
            }
            document.querySelector('input[type="range"]').value = 1;
            const selects = document.querySelectorAll('select');
            selects.forEach((select, index) => {
                if (index === 0) select.selectedIndex = 0; // Contrast
                if (index === 1) select.selectedIndex = 0; // Theme
                if (index === 2) select.selectedIndex = 0; // Language
                if (index === 3) select.selectedIndex = 0; // Color Filter
            });
        }
    </script>
    
    <!-- Demo Content -->
    <div style="padding: 40px; max-width: 600px; margin: 0 auto;">
        <h1>Minimal Accessify Integration</h1>
        <p>This is a minimal implementation with just the essential accessibility features.</p>
        <p>Click the ‚ôø button in the top-right corner to access the controls.</p>
        
        <h2>Features</h2>
        <ul>
            <li>Text size adjustment</li>
            <li>Contrast modes</li>
            <li>Theme switching</li>
            <li>Language selection</li>
            <li>Accessibility testing</li>
        </ul>
        
        <button onclick="alert('Test button')">Test Button</button>
        <input type="text" placeholder="Test input">
        
        <h2>Color Testing</h2>
        <p>Use the color filter dropdown above to test how colors appear for users with different types of color blindness:</p>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; margin: 20px 0;">
            <div style="background: #FF0000; color: white; padding: 15px; border-radius: 8px; text-align: center; font-weight: bold;">Red</div>
            <div style="background: #00FF00; color: black; padding: 15px; border-radius: 8px; text-align: center; font-weight: bold;">Green</div>
            <div style="background: #0000FF; color: white; padding: 15px; border-radius: 8px; text-align: center; font-weight: bold;">Blue</div>
            <div style="background: #FFFF00; color: black; padding: 15px; border-radius: 8px; text-align: center; font-weight: bold;">Yellow</div>
            <div style="background: #FF00FF; color: white; padding: 15px; border-radius: 8px; text-align: center; font-weight: bold;">Magenta</div>
            <div style="background: #00FFFF; color: black; padding: 15px; border-radius: 8px; text-align: center; font-weight: bold;">Cyan</div>
            <div style="background: #FFA500; color: black; padding: 15px; border-radius: 8px; text-align: center; font-weight: bold;">Orange</div>
            <div style="background: #800080; color: white; padding: 15px; border-radius: 8px; text-align: center; font-weight: bold;">Purple</div>
            <div style="background: #FFC0CB; color: black; padding: 15px; border-radius: 8px; text-align: center; font-weight: bold;">Pink</div>
            <div style="background: #A52A2A; color: white; padding: 15px; border-radius: 8px; text-align: center; font-weight: bold;">Brown</div>
            <div style="background: #808080; color: white; padding: 15px; border-radius: 8px; text-align: center; font-weight: bold;">Gray</div>
            <div style="background: #000000; color: white; padding: 15px; border-radius: 8px; text-align: center; font-weight: bold;">Black</div>
        </div>
        
        <div style="margin: 20px 0; padding: 15px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 8px;">
            <h3 style="color: white; margin-top: 0;">Color Blindness Types</h3>
            <ul style="margin: 10px 0;">
                <li><strong>Protanopia:</strong> Red-green color blindness (cannot see red)</li>
                <li><strong>Deuteranopia:</strong> Red-green color blindness (cannot see green)</li>
                <li><strong>Tritanopia:</strong> Blue-yellow color blindness</li>
                <li><strong>Achromatopsia:</strong> Complete color blindness (grayscale)</li>
            </ul>
            <p style="margin-bottom: 0;">Select a filter from the dropdown above to see how these colors appear to users with different types of color blindness.</p>
        </div>
    </div>
</body>
</html>
