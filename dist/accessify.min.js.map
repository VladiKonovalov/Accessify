{"version":3,"file":"accessify.min.js","sources":["../src/utils/EventEmitter.js","../src/utils/StateManager.js","../src/utils/ConfigManager.js","../src/utils/PluginManager.js","../src/utils/BrowserDetection.js","../src/utils/ErrorHandler.js","../src/components/VisualAccessibility.js","../src/components/NavigationAccessibility.js","../src/components/ReadingAccessibility.js","../src/components/MotorAccessibility.js","../src/components/MultilingualSupport.js","../src/components/ARIAEnhancement.js","../src/components/ReadingGuide.js","../src/components/ScreenReaderOptimization.js","../src/plugins/TextToSpeechPlugin.js","../src/plugins/VoiceCommandsPlugin.js","../src/plugins/SwitchNavigationPlugin.js","../src/index.js"],"sourcesContent":["/**\r\n * Event Emitter for Accessify\r\n * Provides a simple event system for component communication\r\n */\r\n\r\nexport class EventEmitter {\r\n  constructor() {\r\n    this.events = new Map();\r\n  }\r\n\r\n  /**\r\n   * Add event listener\r\n   */\r\n  on(event, callback) {\r\n    if (typeof callback !== 'function') {\r\n      throw new Error('Callback must be a function');\r\n    }\r\n\r\n    if (!this.events.has(event)) {\r\n      this.events.set(event, []);\r\n    }\r\n\r\n    this.events.get(event).push(callback);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Remove event listener\r\n   */\r\n  off(event, callback) {\r\n    if (!this.events.has(event)) {\r\n      return this;\r\n    }\r\n\r\n    const callbacks = this.events.get(event);\r\n    const index = callbacks.indexOf(callback);\r\n    \r\n    if (index > -1) {\r\n      callbacks.splice(index, 1);\r\n    }\r\n\r\n    if (callbacks.length === 0) {\r\n      this.events.delete(event);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Emit event\r\n   */\r\n  emit(event, ...args) {\r\n    if (!this.events.has(event)) {\r\n      return this;\r\n    }\r\n\r\n    const callbacks = this.events.get(event);\r\n    callbacks.forEach(callback => {\r\n      try {\r\n        callback(...args);\r\n      } catch (error) {\r\n        console.error(`Error in event listener for \"${event}\":`, error);\r\n      }\r\n    });\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Add one-time event listener\r\n   */\r\n  once(event, callback) {\r\n    const onceCallback = (...args) => {\r\n      this.off(event, onceCallback);\r\n      callback(...args);\r\n    };\r\n\r\n    return this.on(event, onceCallback);\r\n  }\r\n\r\n  /**\r\n   * Remove all listeners for an event\r\n   */\r\n  removeAllListeners(event) {\r\n    if (event) {\r\n      this.events.delete(event);\r\n    } else {\r\n      this.events.clear();\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get all event names\r\n   */\r\n  eventNames() {\r\n    return Array.from(this.events.keys());\r\n  }\r\n\r\n  /**\r\n   * Get listener count for an event\r\n   */\r\n  listenerCount(event) {\r\n    if (!this.events.has(event)) {\r\n      return 0;\r\n    }\r\n    return this.events.get(event).length;\r\n  }\r\n\r\n  /**\r\n   * Check if event has listeners\r\n   */\r\n  hasListeners(event) {\r\n    return this.listenerCount(event) > 0;\r\n  }\r\n}\r\n","/**\r\n * State Manager for Accessify\r\n * Provides immutable state management with change tracking\r\n */\r\n\r\nexport class StateManager {\r\n  constructor() {\r\n    this.state = new Map();\r\n    this.history = [];\r\n    this.maxHistorySize = 50;\r\n    this.listeners = new Map();\r\n  }\r\n\r\n  /**\r\n   * Get current state\r\n   */\r\n  getState() {\r\n    return Object.fromEntries(this.state);\r\n  }\r\n\r\n  /**\r\n   * Get specific state value\r\n   */\r\n  get(key) {\r\n    return this.state.get(key);\r\n  }\r\n\r\n  /**\r\n   * Set state value\r\n   */\r\n  set(key, value) {\r\n    const oldValue = this.state.get(key);\r\n    \r\n    // Only update if value has changed\r\n    if (oldValue !== value) {\r\n      this._addToHistory(key, oldValue, value);\r\n      this.state.set(key, value);\r\n      this._notifyListeners(key, value, oldValue);\r\n    }\r\n    \r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Set multiple state values\r\n   */\r\n  setState(newState) {\r\n    if (typeof newState !== 'object' || newState === null) {\r\n      throw new Error('State must be an object');\r\n    }\r\n\r\n    const changes = {};\r\n    let hasChanges = false;\r\n\r\n    // Update existing keys\r\n    for (const [key, value] of Object.entries(newState)) {\r\n      const oldValue = this.state.get(key);\r\n      if (oldValue !== value) {\r\n        changes[key] = { old: oldValue, new: value };\r\n        this._addToHistory(key, oldValue, value);\r\n        this.state.set(key, value);\r\n        hasChanges = true;\r\n      }\r\n    }\r\n\r\n    // Notify listeners if there were changes\r\n    if (hasChanges) {\r\n      this._notifyListeners('*', changes, null);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Delete state key\r\n   */\r\n  delete(key) {\r\n    const oldValue = this.state.get(key);\r\n    if (this.state.has(key)) {\r\n      this._addToHistory(key, oldValue, undefined);\r\n      this.state.delete(key);\r\n      this._notifyListeners(key, undefined, oldValue);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Check if key exists\r\n   */\r\n  has(key) {\r\n    return this.state.has(key);\r\n  }\r\n\r\n  /**\r\n   * Clear all state\r\n   */\r\n  clear() {\r\n    const oldState = this.getState();\r\n    this._addToHistory('*', oldState, {});\r\n    this.state.clear();\r\n    this._notifyListeners('*', {}, oldState);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Subscribe to state changes\r\n   */\r\n  subscribe(key, callback) {\r\n    if (typeof callback !== 'function') {\r\n      throw new Error('Callback must be a function');\r\n    }\r\n\r\n    if (!this.listeners.has(key)) {\r\n      this.listeners.set(key, []);\r\n    }\r\n\r\n    this.listeners.get(key).push(callback);\r\n    \r\n    // Return unsubscribe function\r\n    return () => this.unsubscribe(key, callback);\r\n  }\r\n\r\n  /**\r\n   * Unsubscribe from state changes\r\n   */\r\n  unsubscribe(key, callback) {\r\n    if (!this.listeners.has(key)) {\r\n      return;\r\n    }\r\n\r\n    const callbacks = this.listeners.get(key);\r\n    const index = callbacks.indexOf(callback);\r\n    \r\n    if (index > -1) {\r\n      callbacks.splice(index, 1);\r\n    }\r\n\r\n    if (callbacks.length === 0) {\r\n      this.listeners.delete(key);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get state history\r\n   */\r\n  getHistory() {\r\n    return [...this.history];\r\n  }\r\n\r\n  /**\r\n   * Clear history\r\n   */\r\n  clearHistory() {\r\n    this.history = [];\r\n  }\r\n\r\n  /**\r\n   * Undo last change\r\n   */\r\n  undo() {\r\n    if (this.history.length === 0) {\r\n      return false;\r\n    }\r\n\r\n    const lastChange = this.history.pop();\r\n    \r\n    if (lastChange.key === '*') {\r\n      // Full state change\r\n      this.state.clear();\r\n      if (lastChange.oldValue) {\r\n        this.setState(lastChange.oldValue);\r\n      }\r\n    } else {\r\n      // Single key change\r\n      if (lastChange.oldValue === undefined) {\r\n        this.state.delete(lastChange.key);\r\n      } else {\r\n        this.state.set(lastChange.key, lastChange.oldValue);\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Add change to history\r\n   */\r\n  _addToHistory(key, oldValue, newValue) {\r\n    this.history.push({\r\n      key,\r\n      oldValue,\r\n      newValue,\r\n      timestamp: Date.now()\r\n    });\r\n\r\n    // Limit history size\r\n    if (this.history.length > this.maxHistorySize) {\r\n      this.history.shift();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Notify listeners of state changes\r\n   */\r\n  _notifyListeners(key, newValue, oldValue) {\r\n    // Notify specific key listeners\r\n    if (this.listeners.has(key)) {\r\n      const callbacks = this.listeners.get(key);\r\n      callbacks.forEach(callback => {\r\n        try {\r\n          callback(newValue, oldValue, key);\r\n        } catch (error) {\r\n          console.error(`Error in state listener for \"${key}\":`, error);\r\n        }\r\n      });\r\n    }\r\n\r\n    // Notify wildcard listeners\r\n    if (this.listeners.has('*')) {\r\n      const callbacks = this.listeners.get('*');\r\n      callbacks.forEach(callback => {\r\n        try {\r\n          callback(newValue, oldValue, key);\r\n        } catch (error) {\r\n          console.error('Error in wildcard state listener:', error);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create a selector function for derived state\r\n   */\r\n  createSelector(selector) {\r\n    if (typeof selector !== 'function') {\r\n      throw new Error('Selector must be a function');\r\n    }\r\n\r\n    let lastResult = null;\r\n    let lastState = null;\r\n\r\n    return () => {\r\n      const currentState = this.getState();\r\n      \r\n      // Check if state has changed\r\n      if (currentState !== lastState) {\r\n        lastState = currentState;\r\n        lastResult = selector(currentState);\r\n      }\r\n      \r\n      return lastResult;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get state size\r\n   */\r\n  size() {\r\n    return this.state.size;\r\n  }\r\n\r\n  /**\r\n   * Get all keys\r\n   */\r\n  keys() {\r\n    return Array.from(this.state.keys());\r\n  }\r\n\r\n  /**\r\n   * Get all values\r\n   */\r\n  values() {\r\n    return Array.from(this.state.values());\r\n  }\r\n\r\n  /**\r\n   * Get all entries\r\n   */\r\n  entries() {\r\n    return Array.from(this.state.entries());\r\n  }\r\n}\r\n","/**\r\n * Configuration Manager for Accessify\r\n * Handles feature flags, settings, and configuration management\r\n */\r\n\r\nexport class ConfigManager {\r\n  constructor(options = {}) {\r\n    this.config = this._mergeWithDefaults(options);\r\n    this.featureFlags = new Set();\r\n    this._initializeFeatureFlags();\r\n  }\r\n\r\n  /**\r\n   * Get configuration value\r\n   */\r\n  get(key, defaultValue = null) {\r\n    return this._getNestedValue(this.config, key) ?? defaultValue;\r\n  }\r\n\r\n  /**\r\n   * Set configuration value\r\n   */\r\n  set(key, value) {\r\n    this._setNestedValue(this.config, key, value);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Update configuration\r\n   */\r\n  update(newConfig) {\r\n    if (typeof newConfig !== 'object' || newConfig === null) {\r\n      throw new Error('Configuration must be an object');\r\n    }\r\n\r\n    this.config = this._deepMerge(this.config, newConfig);\r\n    this._updateFeatureFlags();\r\n  }\r\n\r\n  /**\r\n   * Get all configuration\r\n   */\r\n  getAll() {\r\n    return { ...this.config };\r\n  }\r\n\r\n  /**\r\n   * Check if feature is enabled\r\n   */\r\n  isFeatureEnabled(feature) {\r\n    return this.featureFlags.has(feature);\r\n  }\r\n\r\n  /**\r\n   * Enable feature\r\n   */\r\n  enableFeature(feature) {\r\n    this.featureFlags.add(feature);\r\n    this._updateFeatureConfig(feature, true);\r\n  }\r\n\r\n  /**\r\n   * Disable feature\r\n   */\r\n  disableFeature(feature) {\r\n    this.featureFlags.delete(feature);\r\n    this._updateFeatureConfig(feature, false);\r\n  }\r\n\r\n  /**\r\n   * Toggle feature\r\n   */\r\n  toggleFeature(feature) {\r\n    if (this.isFeatureEnabled(feature)) {\r\n      this.disableFeature(feature);\r\n    } else {\r\n      this.enableFeature(feature);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get enabled features\r\n   */\r\n  getEnabledFeatures() {\r\n    return Array.from(this.featureFlags);\r\n  }\r\n\r\n  /**\r\n   * Get disabled features\r\n   */\r\n  getDisabledFeatures() {\r\n    const allFeatures = this._getAllFeatures();\r\n    return allFeatures.filter(feature => !this.featureFlags.has(feature));\r\n  }\r\n\r\n  /**\r\n   * Reset to default configuration\r\n   */\r\n  reset() {\r\n    this.config = this._getDefaultConfig();\r\n    this._initializeFeatureFlags();\r\n  }\r\n\r\n  /**\r\n   * Validate configuration\r\n   */\r\n  validate() {\r\n    const errors = [];\r\n    \r\n    // Validate required fields\r\n    const required = ['version', 'language', 'direction'];\r\n    required.forEach(field => {\r\n      if (!this.config[field]) {\r\n        errors.push(`Missing required configuration: ${field}`);\r\n      }\r\n    });\r\n\r\n    // Validate language\r\n    const supportedLanguages = ['en', 'he', 'ar', 'es', 'fr', 'de'];\r\n    if (!supportedLanguages.includes(this.config.language)) {\r\n      errors.push(`Unsupported language: ${this.config.language}`);\r\n    }\r\n\r\n    // Validate direction\r\n    if (!['ltr', 'rtl'].includes(this.config.direction)) {\r\n      errors.push(`Invalid direction: ${this.config.direction}`);\r\n    }\r\n\r\n    // Validate zoom range\r\n    if (this.config.visual.textSize.min < 0.5 || this.config.visual.textSize.max > 3.0) {\r\n      errors.push('Text size range must be between 0.5 and 3.0');\r\n    }\r\n\r\n    return {\r\n      valid: errors.length === 0,\r\n      errors\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Merge with default configuration\r\n   */\r\n  _mergeWithDefaults(options) {\r\n    const defaults = this._getDefaultConfig();\r\n    return this._deepMerge(defaults, options);\r\n  }\r\n\r\n  /**\r\n   * Get default configuration\r\n   */\r\n  _getDefaultConfig() {\r\n    return {\r\n      version: '1.0.0',\r\n      language: 'en',\r\n      direction: 'ltr',\r\n      theme: 'default',\r\n      debug: false,\r\n      \r\n      // Visual accessibility\r\n      visual: {\r\n        textSize: {\r\n          enabled: true,\r\n          current: 1.0,\r\n          min: 0.5,\r\n          max: 3.0,\r\n          step: 0.1\r\n        },\r\n        contrast: {\r\n          enabled: true,\r\n          current: 'normal',\r\n          modes: ['normal', 'high', 'inverted', 'grayscale']\r\n        },\r\n        brightness: {\r\n          enabled: true,\r\n          current: 1.0,\r\n          min: 0.3,\r\n          max: 2.0,\r\n          step: 0.1\r\n        },\r\n        themes: {\r\n          enabled: true,\r\n          current: 'default',\r\n          available: ['default', 'dark', 'light', 'colorblind-friendly']\r\n        },\r\n        cursors: {\r\n          enabled: true,\r\n          current: 'default',\r\n          available: ['default', 'large', 'extra-large', 'high-contrast', 'crosshair', 'pointer-large', 'text-large']\r\n        },\r\n        focusIndicators: {\r\n          enabled: true,\r\n          style: 'standard',\r\n          color: '#0066cc',\r\n          thickness: 2\r\n        },\r\n        linkUnderlining: {\r\n          enabled: true,\r\n          style: 'none',\r\n          color: '#0066cc',\r\n          thickness: 2,\r\n          offset: 2\r\n        },\r\n        colorFilters: {\r\n          enabled: true,\r\n          current: 'none',\r\n          available: ['none', 'protanopia', 'deuteranopia', 'tritanopia', 'achromatopsia', 'high-contrast', 'invert', 'sepia', 'blue-light']\r\n        },\r\n        saturation: {\r\n          enabled: true,\r\n          min: 0.0,\r\n          max: 2.0,\r\n          step: 0.1,\r\n          current: 1.0\r\n        }\r\n      },\r\n\r\n      // Navigation accessibility\r\n      navigation: {\r\n        keyboard: {\r\n          enabled: true,\r\n          shortcuts: {\r\n            enabled: true,\r\n            skipToContent: 'Alt+S',\r\n            toggleMenu: 'Alt+M',\r\n            increaseTextSize: 'Alt+Plus',\r\n            decreaseTextSize: 'Alt+Minus',\r\n            toggleContrast: 'Alt+C',\r\n            toggleHighContrast: 'Alt+H'\r\n          }\r\n        },\r\n        focus: {\r\n          enabled: true,\r\n          trap: true,\r\n          visible: true,\r\n          order: 'logical'\r\n        },\r\n        skipLinks: {\r\n          enabled: true,\r\n          visible: true\r\n        }\r\n      },\r\n\r\n      // Reading accessibility\r\n      reading: {\r\n        textToSpeech: {\r\n          enabled: true,\r\n          rate: 1.0,\r\n          pitch: 1.0,\r\n          volume: 1.0,\r\n          voice: 'auto'\r\n        },\r\n        fonts: {\r\n          enabled: true,\r\n          dyslexia: true,\r\n          current: 'default',\r\n          available: ['default', 'opendyslexic', 'lexend', 'atkinson']\r\n        },\r\n        spacing: {\r\n          enabled: true,\r\n          lineHeight: 1.5,\r\n          letterSpacing: 'normal',\r\n          wordSpacing: 'normal'\r\n        },\r\n        guides: {\r\n          enabled: true,\r\n          readingRuler: true,\r\n          textHighlighting: true\r\n        }\r\n      },\r\n\r\n      // Motor accessibility\r\n      motor: {\r\n        targets: {\r\n          enabled: true,\r\n          minSize: 44, // pixels\r\n          padding: 8\r\n        },\r\n        gestures: {\r\n          enabled: true,\r\n          alternatives: true\r\n        },\r\n        voice: {\r\n          enabled: true,\r\n          commands: true\r\n        },\r\n        motion: {\r\n          enabled: true,\r\n          reduced: false\r\n        },\r\n        delays: {\r\n          enabled: true,\r\n          interaction: 0,\r\n          hover: 0\r\n        }\r\n      },\r\n\r\n      // Multilingual support\r\n      multilingual: {\r\n        enabled: true,\r\n        autoDetect: true,\r\n        fallback: 'en',\r\n        rtl: {\r\n          enabled: true,\r\n          autoDetect: true\r\n        }\r\n      },\r\n\r\n      // Reading guide\r\n      readingGuide: {\r\n        enabled: true,\r\n        readingRuler: {\r\n          enabled: true,\r\n          height: 60,\r\n          color: '#ff0000',\r\n          opacity: 0.1\r\n        },\r\n        textHighlighting: {\r\n          enabled: true,\r\n          color: 'rgba(255, 255, 0, 0.3)'\r\n        },\r\n        textMasking: {\r\n          enabled: true,\r\n          color: 'rgba(0, 0, 0, 0.8)'\r\n        }\r\n      },\r\n\r\n      // Screen reader optimization\r\n      screenReader: {\r\n        enabled: true,\r\n        announcements: {\r\n          enabled: true,\r\n          types: ['polite', 'assertive', 'status', 'log']\r\n        },\r\n        ariaEnhancements: {\r\n          enabled: true,\r\n          autoEnhance: true\r\n        },\r\n        liveRegions: {\r\n          enabled: true,\r\n          polite: true,\r\n          assertive: true,\r\n          status: true,\r\n          log: true\r\n        }\r\n      },\r\n\r\n      // Plugins\r\n      plugins: {\r\n        enabled: true,\r\n        autoLoad: true,\r\n        builtIn: ['textToSpeech', 'voiceCommands', 'switchNavigation']\r\n      },\r\n\r\n      // Testing and compliance\r\n      testing: {\r\n        enabled: false,\r\n        axe: true,\r\n        lighthouse: true,\r\n        manual: true\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Initialize feature flags from configuration\r\n   */\r\n  _initializeFeatureFlags() {\r\n    this.featureFlags.clear();\r\n    \r\n    // Add features based on configuration\r\n    if (this.config.visual.textSize.enabled) this.featureFlags.add('textSizeAdjustment');\r\n    if (this.config.visual.contrast.enabled) this.featureFlags.add('highContrast');\r\n    if (this.config.visual.themes.enabled) this.featureFlags.add('colorThemes');\r\n    if (this.config.visual.cursors.enabled) this.featureFlags.add('customCursors');\r\n    if (this.config.visual.focusIndicators.enabled) this.featureFlags.add('focusIndicators');\r\n    \r\n    if (this.config.navigation.keyboard.enabled) this.featureFlags.add('keyboardNavigation');\r\n    if (this.config.navigation.focus.enabled) this.featureFlags.add('focusManagement');\r\n    if (this.config.navigation.skipLinks.enabled) this.featureFlags.add('skipLinks');\r\n    \r\n    if (this.config.reading.textToSpeech.enabled) this.featureFlags.add('textToSpeech');\r\n    if (this.config.reading.fonts.enabled) this.featureFlags.add('dyslexiaFonts');\r\n    if (this.config.reading.spacing.enabled) this.featureFlags.add('textSpacing');\r\n    if (this.config.reading.guides.enabled) this.featureFlags.add('readingGuides');\r\n    \r\n    if (this.config.motor.targets.enabled) this.featureFlags.add('largeTargets');\r\n    if (this.config.motor.gestures.enabled) this.featureFlags.add('gestureAlternatives');\r\n    if (this.config.motor.voice.enabled) this.featureFlags.add('voiceCommands');\r\n    if (this.config.motor.motion.enabled) this.featureFlags.add('motionControl');\r\n    \r\n    if (this.config.multilingual.enabled) this.featureFlags.add('multilingual');\r\n    if (this.config.multilingual.rtl.enabled) this.featureFlags.add('rtlSupport');\r\n    \r\n    if (this.config.plugins.enabled) this.featureFlags.add('plugins');\r\n  }\r\n\r\n  /**\r\n   * Update feature flags when configuration changes\r\n   */\r\n  _updateFeatureFlags() {\r\n    this._initializeFeatureFlags();\r\n  }\r\n\r\n  /**\r\n   * Update feature configuration\r\n   */\r\n  _updateFeatureConfig(feature, enabled) {\r\n    const featureMap = {\r\n      textSizeAdjustment: 'visual.textSize.enabled',\r\n      highContrast: 'visual.contrast.enabled',\r\n      colorThemes: 'visual.themes.enabled',\r\n      customCursors: 'visual.cursors.enabled',\r\n      focusIndicators: 'visual.focusIndicators.enabled',\r\n      keyboardNavigation: 'navigation.keyboard.enabled',\r\n      focusManagement: 'navigation.focus.enabled',\r\n      skipLinks: 'navigation.skipLinks.enabled',\r\n      textToSpeech: 'reading.textToSpeech.enabled',\r\n      dyslexiaFonts: 'reading.fonts.enabled',\r\n      textSpacing: 'reading.spacing.enabled',\r\n      readingGuides: 'reading.guides.enabled',\r\n      largeTargets: 'motor.targets.enabled',\r\n      gestureAlternatives: 'motor.gestures.enabled',\r\n      voiceCommands: 'motor.voice.enabled',\r\n      motionControl: 'motor.motion.enabled',\r\n      multilingual: 'multilingual.enabled',\r\n      rtlSupport: 'multilingual.rtl.enabled',\r\n      plugins: 'plugins.enabled'\r\n    };\r\n\r\n    const configPath = featureMap[feature];\r\n    if (configPath) {\r\n      this._setNestedValue(this.config, configPath, enabled);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get all available features\r\n   */\r\n  _getAllFeatures() {\r\n    return [\r\n      'textSizeAdjustment',\r\n      'highContrast',\r\n      'colorThemes',\r\n      'customCursors',\r\n      'focusIndicators',\r\n      'keyboardNavigation',\r\n      'focusManagement',\r\n      'skipLinks',\r\n      'textToSpeech',\r\n      'dyslexiaFonts',\r\n      'textSpacing',\r\n      'readingGuides',\r\n      'largeTargets',\r\n      'gestureAlternatives',\r\n      'voiceCommands',\r\n      'motionControl',\r\n      'multilingual',\r\n      'rtlSupport',\r\n      'plugins'\r\n    ];\r\n  }\r\n\r\n  /**\r\n   * Deep merge objects\r\n   */\r\n  _deepMerge(target, source) {\r\n    const result = { ...target };\r\n    \r\n    for (const key in source) {\r\n      if (source.hasOwnProperty(key)) {\r\n        if (typeof source[key] === 'object' && source[key] !== null && !Array.isArray(source[key])) {\r\n          result[key] = this._deepMerge(result[key] || {}, source[key]);\r\n        } else {\r\n          result[key] = source[key];\r\n        }\r\n      }\r\n    }\r\n    \r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Get nested value from object\r\n   */\r\n  _getNestedValue(obj, path) {\r\n    return path.split('.').reduce((current, key) => {\r\n      return current && current[key] !== undefined ? current[key] : undefined;\r\n    }, obj);\r\n  }\r\n\r\n  /**\r\n   * Set nested value in object\r\n   */\r\n  _setNestedValue(obj, path, value) {\r\n    const keys = path.split('.');\r\n    const lastKey = keys.pop();\r\n    const target = keys.reduce((current, key) => {\r\n      if (!current[key] || typeof current[key] !== 'object') {\r\n        current[key] = {};\r\n      }\r\n      return current[key];\r\n    }, obj);\r\n    \r\n    target[lastKey] = value;\r\n  }\r\n}\r\n","/**\r\n * Plugin Manager for Accessify\r\n * Handles plugin registration, loading, and lifecycle management\r\n */\r\n\r\nexport class PluginManager {\r\n  constructor(accessify) {\r\n    this.accessify = accessify;\r\n    this.plugins = new Map();\r\n    this.initializedPlugins = new Set();\r\n    this.pluginConfigs = new Map();\r\n  }\r\n\r\n  /**\r\n   * Register a plugin\r\n   */\r\n  register(name, pluginClass, config = {}) {\r\n    if (typeof pluginClass !== 'function') {\r\n      throw new Error('Plugin must be a class or constructor function');\r\n    }\r\n\r\n    if (this.plugins.has(name)) {\r\n      console.warn(`Plugin \"${name}\" is already registered`);\r\n      return this;\r\n    }\r\n\r\n    this.plugins.set(name, pluginClass);\r\n    this.pluginConfigs.set(name, config);\r\n    \r\n    console.log(`Plugin \"${name}\" registered successfully`);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Unregister a plugin\r\n   */\r\n  unregister(name) {\r\n    if (this.plugins.has(name)) {\r\n      // Destroy if initialized\r\n      if (this.initializedPlugins.has(name)) {\r\n        this.destroy(name);\r\n      }\r\n      \r\n      this.plugins.delete(name);\r\n      this.pluginConfigs.delete(name);\r\n      console.log(`Plugin \"${name}\" unregistered`);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Initialize all registered plugins\r\n   */\r\n  async init() {\r\n    const enabledPlugins = this.accessify.configManager.get('plugins.builtIn', []);\r\n    \r\n    for (const pluginName of enabledPlugins) {\r\n      if (this.plugins.has(pluginName)) {\r\n        await this.initPlugin(pluginName);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialize a specific plugin\r\n   */\r\n  async initPlugin(name) {\r\n    if (!this.plugins.has(name)) {\r\n      throw new Error(`Plugin \"${name}\" is not registered`);\r\n    }\r\n\r\n    if (this.initializedPlugins.has(name)) {\r\n      console.warn(`Plugin \"${name}\" is already initialized`);\r\n      return this;\r\n    }\r\n\r\n    try {\r\n      const PluginClass = this.plugins.get(name);\r\n      const config = this.pluginConfigs.get(name);\r\n      \r\n      // Create plugin instance\r\n      const plugin = new PluginClass(this.accessify, config);\r\n      \r\n      // Initialize plugin\r\n      if (typeof plugin.init === 'function') {\r\n        await plugin.init();\r\n      }\r\n      \r\n      // Store initialized plugin\r\n      this.plugins.set(name, plugin);\r\n      this.initializedPlugins.add(name);\r\n      \r\n      this.accessify.emit('pluginInitialized', { name, plugin });\r\n      console.log(`Plugin \"${name}\" initialized successfully`);\r\n      \r\n    } catch (error) {\r\n      console.error(`Failed to initialize plugin \"${name}\":`, error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy all initialized plugins\r\n   */\r\n  destroy() {\r\n    for (const name of this.initializedPlugins) {\r\n      this.destroyPlugin(name);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy a specific plugin\r\n   */\r\n  destroyPlugin(name) {\r\n    if (!this.initializedPlugins.has(name)) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const plugin = this.plugins.get(name);\r\n      \r\n      if (plugin && typeof plugin.destroy === 'function') {\r\n        plugin.destroy();\r\n      }\r\n      \r\n      this.initializedPlugins.delete(name);\r\n      this.accessify.emit('pluginDestroyed', { name });\r\n      console.log(`Plugin \"${name}\" destroyed`);\r\n      \r\n    } catch (error) {\r\n      console.error(`Failed to destroy plugin \"${name}\":`, error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get plugin instance\r\n   */\r\n  getPlugin(name) {\r\n    if (!this.initializedPlugins.has(name)) {\r\n      return null;\r\n    }\r\n    return this.plugins.get(name);\r\n  }\r\n\r\n  /**\r\n   * Check if plugin is initialized\r\n   */\r\n  isInitialized(name) {\r\n    return this.initializedPlugins.has(name);\r\n  }\r\n\r\n  /**\r\n   * Get all registered plugins\r\n   */\r\n  getRegisteredPlugins() {\r\n    return Array.from(this.plugins.keys());\r\n  }\r\n\r\n  /**\r\n   * Get all initialized plugins\r\n   */\r\n  getInitializedPlugins() {\r\n    return Array.from(this.initializedPlugins);\r\n  }\r\n\r\n  /**\r\n   * Update plugin configuration\r\n   */\r\n  updatePluginConfig(name, newConfig) {\r\n    if (!this.pluginConfigs.has(name)) {\r\n      throw new Error(`Plugin \"${name}\" is not registered`);\r\n    }\r\n\r\n    const currentConfig = this.pluginConfigs.get(name);\r\n    const updatedConfig = { ...currentConfig, ...newConfig };\r\n    this.pluginConfigs.set(name, updatedConfig);\r\n\r\n    // Update plugin if initialized\r\n    if (this.initializedPlugins.has(name)) {\r\n      const plugin = this.plugins.get(name);\r\n      if (plugin && typeof plugin.updateConfig === 'function') {\r\n        plugin.updateConfig(updatedConfig);\r\n      }\r\n    }\r\n\r\n    this.accessify.emit('pluginConfigUpdated', { name, config: updatedConfig });\r\n  }\r\n\r\n  /**\r\n   * Enable plugin\r\n   */\r\n  enablePlugin(name) {\r\n    const builtInPlugins = this.accessify.configManager.get('plugins.builtIn', []);\r\n    if (!builtInPlugins.includes(name)) {\r\n      builtInPlugins.push(name);\r\n      this.accessify.configManager.set('plugins.builtIn', builtInPlugins);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Disable plugin\r\n   */\r\n  disablePlugin(name) {\r\n    const builtInPlugins = this.accessify.configManager.get('plugins.builtIn', []);\r\n    const index = builtInPlugins.indexOf(name);\r\n    if (index > -1) {\r\n      builtInPlugins.splice(index, 1);\r\n      this.accessify.configManager.set('plugins.builtIn', builtInPlugins);\r\n      \r\n      // Destroy if initialized\r\n      if (this.initializedPlugins.has(name)) {\r\n        this.destroyPlugin(name);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Load external plugin\r\n   */\r\n  async loadExternalPlugin(url, name, config = {}) {\r\n    try {\r\n      // Dynamic import of external plugin\r\n      const module = await import(url);\r\n      const PluginClass = module.default || module[name];\r\n      \r\n      if (!PluginClass) {\r\n        throw new Error(`Plugin class not found in module: ${url}`);\r\n      }\r\n      \r\n      this.register(name, PluginClass, config);\r\n      await this.initPlugin(name);\r\n      \r\n      return this.getPlugin(name);\r\n      \r\n    } catch (error) {\r\n      console.error(`Failed to load external plugin from ${url}:`, error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get plugin status\r\n   */\r\n  getPluginStatus() {\r\n    const status = {};\r\n    \r\n    for (const name of this.plugins.keys()) {\r\n      status[name] = {\r\n        registered: true,\r\n        initialized: this.initializedPlugins.has(name),\r\n        config: this.pluginConfigs.get(name)\r\n      };\r\n    }\r\n    \r\n    return status;\r\n  }\r\n\r\n  /**\r\n   * Validate plugin\r\n   */\r\n  validatePlugin(pluginClass) {\r\n    const errors = [];\r\n    \r\n    if (typeof pluginClass !== 'function') {\r\n      errors.push('Plugin must be a class or constructor function');\r\n    }\r\n    \r\n    // Check for required methods\r\n    const requiredMethods = ['init', 'destroy'];\r\n    requiredMethods.forEach(method => {\r\n      if (typeof pluginClass.prototype[method] !== 'function') {\r\n        errors.push(`Plugin must implement ${method}() method`);\r\n      }\r\n    });\r\n    \r\n    return {\r\n      valid: errors.length === 0,\r\n      errors\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Create plugin API\r\n   */\r\n  createPluginAPI(pluginName) {\r\n    return {\r\n      name: pluginName,\r\n      accessify: this.accessify,\r\n      config: this.pluginConfigs.get(pluginName),\r\n      \r\n      // Event system\r\n      on: (event, callback) => this.accessify.on(event, callback),\r\n      off: (event, callback) => this.accessify.off(event, callback),\r\n      emit: (event, ...args) => this.accessify.emit(event, ...args),\r\n      \r\n      // State management\r\n      getState: () => this.accessify.getState(),\r\n      setState: (state) => this.accessify.setState(state),\r\n      \r\n      // Configuration\r\n      getConfig: (key, defaultValue) => this.accessify.configManager.get(key, defaultValue),\r\n      setConfig: (key, value) => this.accessify.configManager.set(key, value),\r\n      \r\n      // Utilities\r\n      log: (message, ...args) => console.log(`[${pluginName}]`, message, ...args),\r\n      warn: (message, ...args) => console.warn(`[${pluginName}]`, message, ...args),\r\n      error: (message, ...args) => console.error(`[${pluginName}]`, message, ...args)\r\n    };\r\n  }\r\n}\r\n","/**\r\n * Browser Detection utility for Accessify\r\n * Provides browser compatibility checking and feature detection\r\n */\r\n\r\nexport class BrowserDetection {\r\n  constructor() {\r\n    this.userAgent = navigator.userAgent;\r\n    this.browser = this._detectBrowser();\r\n    this.version = this._detectVersion();\r\n    this.features = this._detectFeatures();\r\n    this.isSupported = this._checkSupport();\r\n  }\r\n\r\n  /**\r\n   * Detect browser type\r\n   */\r\n  _detectBrowser() {\r\n    const ua = this.userAgent.toLowerCase();\r\n    \r\n    if (ua.includes('chrome') && !ua.includes('edg')) {\r\n      return 'chrome';\r\n    } else if (ua.includes('firefox')) {\r\n      return 'firefox';\r\n    } else if (ua.includes('safari') && !ua.includes('chrome')) {\r\n      return 'safari';\r\n    } else if (ua.includes('edg')) {\r\n      return 'edge';\r\n    } else if (ua.includes('opera') || ua.includes('opr')) {\r\n      return 'opera';\r\n    } else {\r\n      return 'unknown';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Detect browser version\r\n   */\r\n  _detectVersion() {\r\n    const ua = this.userAgent;\r\n    let version = 'unknown';\r\n    \r\n    switch (this.browser) {\r\n      case 'chrome':\r\n        // Try multiple patterns for Chrome\r\n        const chromeMatch = ua.match(/chrome\\/(\\d+)/i) || ua.match(/chromium\\/(\\d+)/i);\r\n        version = chromeMatch ? parseInt(chromeMatch[1]) : 'unknown';\r\n        break;\r\n        \r\n      case 'firefox':\r\n        const firefoxMatch = ua.match(/firefox\\/(\\d+)/i);\r\n        version = firefoxMatch ? parseInt(firefoxMatch[1]) : 'unknown';\r\n        break;\r\n        \r\n      case 'safari':\r\n        // Safari version detection is tricky\r\n        const safariMatch = ua.match(/version\\/(\\d+)/i) || ua.match(/safari\\/(\\d+)/i);\r\n        version = safariMatch ? parseInt(safariMatch[1]) : 'unknown';\r\n        break;\r\n        \r\n      case 'edge':\r\n        // Try both old and new Edge patterns\r\n        const edgeMatch = ua.match(/edg\\/(\\d+)/i) || ua.match(/edge\\/(\\d+)/i);\r\n        version = edgeMatch ? parseInt(edgeMatch[1]) : 'unknown';\r\n        break;\r\n        \r\n      case 'opera':\r\n        const operaMatch = ua.match(/(?:opera|opr)\\/(\\d+)/i);\r\n        version = operaMatch ? parseInt(operaMatch[1]) : 'unknown';\r\n        break;\r\n    }\r\n    \r\n    // If still unknown, try a generic approach\r\n    if (version === 'unknown') {\r\n      const genericMatch = ua.match(/(\\d+\\.\\d+)/);\r\n      if (genericMatch) {\r\n        version = parseInt(genericMatch[1].split('.')[0]);\r\n      }\r\n    }\r\n    \r\n    return version;\r\n  }\r\n\r\n  /**\r\n   * Detect browser features\r\n   */\r\n  _detectFeatures() {\r\n    return {\r\n      // ES6+ features\r\n      arrowFunctions: typeof (() => {}) === 'function',\r\n      classes: typeof class {} === 'function',\r\n      modules: 'import' in window || typeof window.import === 'function',\r\n      promises: typeof Promise !== 'undefined',\r\n      asyncAwait: (async () => {})() instanceof Promise,\r\n      \r\n      // Web APIs\r\n      speechSynthesis: 'speechSynthesis' in window,\r\n      speechRecognition: 'webkitSpeechRecognition' in window || 'SpeechRecognition' in window,\r\n      webAudio: 'AudioContext' in window || 'webkitAudioContext' in window,\r\n      webGL: 'WebGLRenderingContext' in window,\r\n      webGL2: 'WebGL2RenderingContext' in window,\r\n      canvas: 'HTMLCanvasElement' in window,\r\n      svg: 'SVGElement' in window,\r\n      \r\n      // CSS features\r\n      cssGrid: CSS.supports('display', 'grid'),\r\n      cssFlexbox: CSS.supports('display', 'flex'),\r\n      cssCustomProperties: CSS.supports('--custom-property', 'value'),\r\n      cssTransforms: CSS.supports('transform', 'translateX(10px)'),\r\n      cssTransitions: CSS.supports('transition', 'all 0.3s'),\r\n      cssAnimations: CSS.supports('animation', 'fadeIn 1s'),\r\n      \r\n      // Accessibility features\r\n      aria: 'ariaHidden' in document.createElement('div'),\r\n      focusVisible: CSS.supports(':focus-visible'),\r\n      reducedMotion: CSS.supports('(prefers-reduced-motion: reduce)'),\r\n      highContrast: CSS.supports('(prefers-contrast: high)'),\r\n      colorScheme: CSS.supports('(prefers-color-scheme: dark)'),\r\n      \r\n      // Input features\r\n      touch: 'ontouchstart' in window,\r\n      pointer: 'onpointerdown' in window,\r\n      gamepad: 'getGamepads' in navigator,\r\n      \r\n      // Storage\r\n      localStorage: 'localStorage' in window,\r\n      sessionStorage: 'sessionStorage' in window,\r\n      indexedDB: 'indexedDB' in window,\r\n      \r\n      // Network\r\n      fetch: 'fetch' in window,\r\n      webSocket: 'WebSocket' in window,\r\n      \r\n      // File API\r\n      fileReader: 'FileReader' in window,\r\n      fileAPI: 'File' in window,\r\n      \r\n      // Performance\r\n      performance: 'performance' in window,\r\n      requestAnimationFrame: 'requestAnimationFrame' in window,\r\n      requestIdleCallback: 'requestIdleCallback' in window,\r\n      \r\n      // Security\r\n      crypto: 'crypto' in window,\r\n      subtle: 'subtle' in (window.crypto || {}),\r\n      \r\n      // Internationalization\r\n      intl: 'Intl' in window,\r\n      intlDateTimeFormat: 'DateTimeFormat' in (window.Intl || {}),\r\n      intlNumberFormat: 'NumberFormat' in (window.Intl || {}),\r\n      \r\n      // RTL support\r\n      rtl: this._checkRTLSupport(),\r\n      \r\n      // Mobile detection\r\n      mobile: /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(this.userAgent),\r\n      tablet: /ipad|android(?!.*mobile)/i.test(this.userAgent)\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Check RTL support\r\n   */\r\n  _checkRTLSupport() {\r\n    const testElement = document.createElement('div');\r\n    testElement.style.direction = 'rtl';\r\n    testElement.style.unicodeBidi = 'bidi-override';\r\n    testElement.textContent = '×';\r\n    document.body.appendChild(testElement);\r\n    \r\n    const hasRTL = testElement.offsetLeft > 0;\r\n    document.body.removeChild(testElement);\r\n    \r\n    return hasRTL;\r\n  }\r\n\r\n  /**\r\n   * Check if browser is supported\r\n   */\r\n  _checkSupport() {\r\n    const minVersions = {\r\n      chrome: 60,\r\n      firefox: 55,\r\n      safari: 12,\r\n      edge: 79,\r\n      opera: 47\r\n    };\r\n    \r\n    // Debug logging\r\n    console.log('Browser Detection:', {\r\n      browser: this.browser,\r\n      version: this.version,\r\n      userAgent: this.userAgent\r\n    });\r\n    \r\n    // For development, be more lenient\r\n    if (this.browser === 'unknown') {\r\n      console.warn('Unknown browser detected, allowing for development');\r\n      return true; // Allow unknown browsers for development\r\n    }\r\n    \r\n    const minVersion = minVersions[this.browser];\r\n    if (!minVersion) {\r\n      console.warn(`No minimum version defined for ${this.browser}, allowing for development`);\r\n      return true; // Allow browsers without defined minimums\r\n    }\r\n    \r\n    if (this.version === 'unknown') {\r\n      console.warn('Unknown version detected, allowing for development');\r\n      return true; // Allow unknown versions for development\r\n    }\r\n    \r\n    const isSupported = this.version >= minVersion;\r\n    if (!isSupported) {\r\n      console.warn(`Browser version ${this.version} is below minimum ${minVersion} for ${this.browser}`);\r\n    }\r\n    \r\n    return isSupported;\r\n  }\r\n\r\n  /**\r\n   * Get browser information\r\n   */\r\n  getInfo() {\r\n    return {\r\n      browser: this.browser,\r\n      version: this.version,\r\n      userAgent: this.userAgent,\r\n      isSupported: this.isSupported,\r\n      features: this.features,\r\n      isMobile: this.features.mobile,\r\n      isTablet: this.features.tablet,\r\n      isDesktop: !this.features.mobile && !this.features.tablet\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Check if specific feature is supported\r\n   */\r\n  hasFeature(feature) {\r\n    return this.features[feature] === true;\r\n  }\r\n\r\n  /**\r\n   * Get unsupported features\r\n   */\r\n  getUnsupportedFeatures() {\r\n    const requiredFeatures = [\r\n      'arrowFunctions',\r\n      'classes',\r\n      'promises',\r\n      'speechSynthesis',\r\n      'cssGrid',\r\n      'cssFlexbox',\r\n      'cssCustomProperties',\r\n      'aria',\r\n      'localStorage',\r\n      'fetch',\r\n      'performance',\r\n      'requestAnimationFrame',\r\n      'intl'\r\n    ];\r\n    \r\n    return requiredFeatures.filter(feature => !this.features[feature]);\r\n  }\r\n\r\n  /**\r\n   * Get browser capabilities score\r\n   */\r\n  getCapabilitiesScore() {\r\n    const allFeatures = Object.keys(this.features);\r\n    const supportedFeatures = allFeatures.filter(feature => this.features[feature]);\r\n    \r\n    return Math.round((supportedFeatures.length / allFeatures.length) * 100);\r\n  }\r\n\r\n  /**\r\n   * Check if browser supports accessibility features\r\n   */\r\n  getAccessibilitySupport() {\r\n    return {\r\n      speechSynthesis: this.features.speechSynthesis,\r\n      speechRecognition: this.features.speechRecognition,\r\n      aria: this.features.aria,\r\n      focusVisible: this.features.focusVisible,\r\n      reducedMotion: this.features.reducedMotion,\r\n      highContrast: this.features.highContrast,\r\n      colorScheme: this.features.colorScheme,\r\n      rtl: this.features.rtl,\r\n      touch: this.features.touch,\r\n      pointer: this.features.pointer\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get recommended features for this browser\r\n   */\r\n  getRecommendedFeatures() {\r\n    const recommendations = [];\r\n    \r\n    if (this.features.speechSynthesis) {\r\n      recommendations.push('textToSpeech');\r\n    }\r\n    \r\n    if (this.features.speechRecognition) {\r\n      recommendations.push('voiceCommands');\r\n    }\r\n    \r\n    if (this.features.touch) {\r\n      recommendations.push('touchNavigation', 'gestureAlternatives');\r\n    }\r\n    \r\n    if (this.features.pointer) {\r\n      recommendations.push('pointerEvents');\r\n    }\r\n    \r\n    if (this.features.reducedMotion) {\r\n      recommendations.push('reducedMotion');\r\n    }\r\n    \r\n    if (this.features.highContrast) {\r\n      recommendations.push('highContrast');\r\n    }\r\n    \r\n    if (this.features.rtl) {\r\n      recommendations.push('rtlSupport');\r\n    }\r\n    \r\n    return recommendations;\r\n  }\r\n\r\n  /**\r\n   * Get browser-specific optimizations\r\n   */\r\n  getOptimizations() {\r\n    const optimizations = {\r\n      chrome: {\r\n        useWebGL: this.features.webGL2,\r\n        useWebAudio: this.features.webAudio,\r\n        useServiceWorker: 'serviceWorker' in navigator\r\n      },\r\n      firefox: {\r\n        useWebGL: this.features.webGL,\r\n        useWebAudio: this.features.webAudio,\r\n        useIndexedDB: this.features.indexedDB\r\n      },\r\n      safari: {\r\n        useWebGL: this.features.webGL,\r\n        useWebAudio: this.features.webAudio,\r\n        useLocalStorage: this.features.localStorage\r\n      },\r\n      edge: {\r\n        useWebGL: this.features.webGL2,\r\n        useWebAudio: this.features.webAudio,\r\n        useServiceWorker: 'serviceWorker' in navigator\r\n      }\r\n    };\r\n    \r\n    return optimizations[this.browser] || {};\r\n  }\r\n}\r\n","/**\r\n * Error Handler for Accessify\r\n * Provides centralized error handling and logging\r\n */\r\n\r\nexport class ErrorHandler {\r\n  constructor() {\r\n    this.errors = [];\r\n    this.maxErrors = 100;\r\n    this.errorTypes = {\r\n      INITIALIZATION: 'initialization',\r\n      RUNTIME: 'runtime',\r\n      CONFIGURATION: 'configuration',\r\n      PLUGIN: 'plugin',\r\n      COMPONENT: 'component',\r\n      NETWORK: 'network',\r\n      PERMISSION: 'permission',\r\n      COMPATIBILITY: 'compatibility'\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Handle error\r\n   */\r\n  handle(error, context = '', type = this.errorTypes.RUNTIME) {\r\n    const errorInfo = this._createErrorInfo(error, context, type);\r\n    \r\n    // Add to errors array\r\n    this.addError(errorInfo);\r\n    \r\n    // Log error\r\n    this._logError(errorInfo);\r\n    \r\n    // Emit error event if available\r\n    if (typeof window !== 'undefined' && window.Accessify && window.Accessify.prototype) {\r\n      // Try to emit on the global instance if it exists\r\n      if (window.accessifyInstance && typeof window.accessifyInstance.emit === 'function') {\r\n        window.accessifyInstance.emit('error', errorInfo);\r\n      }\r\n    }\r\n    \r\n    return errorInfo;\r\n  }\r\n\r\n  /**\r\n   * Add error to collection\r\n   */\r\n  addError(errorInfo) {\r\n    this.errors.push(errorInfo);\r\n    \r\n    // Limit error collection size\r\n    if (this.errors.length > this.maxErrors) {\r\n      this.errors.shift();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create error info object\r\n   */\r\n  _createErrorInfo(error, context, type) {\r\n    return {\r\n      id: this._generateErrorId(),\r\n      timestamp: new Date().toISOString(),\r\n      type,\r\n      context,\r\n      message: error.message || String(error),\r\n      stack: error.stack,\r\n      userAgent: navigator.userAgent,\r\n      url: window.location.href,\r\n      severity: this._determineSeverity(error, type),\r\n      recoverable: this._isRecoverable(error, type)\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Generate unique error ID\r\n   */\r\n  _generateErrorId() {\r\n    return `error_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n  }\r\n\r\n  /**\r\n   * Determine error severity\r\n   */\r\n  _determineSeverity(error, type) {\r\n    const severityMap = {\r\n      [this.errorTypes.INITIALIZATION]: 'high',\r\n      [this.errorTypes.CONFIGURATION]: 'medium',\r\n      [this.errorTypes.PLUGIN]: 'medium',\r\n      [this.errorTypes.COMPONENT]: 'medium',\r\n      [this.errorTypes.NETWORK]: 'low',\r\n      [this.errorTypes.PERMISSION]: 'high',\r\n      [this.errorTypes.COMPATIBILITY]: 'high',\r\n      [this.errorTypes.RUNTIME]: 'medium'\r\n    };\r\n    \r\n    return severityMap[type] || 'medium';\r\n  }\r\n\r\n  /**\r\n   * Check if error is recoverable\r\n   */\r\n  _isRecoverable(error, type) {\r\n    const recoverableTypes = [\r\n      this.errorTypes.NETWORK,\r\n      this.errorTypes.PLUGIN,\r\n      this.errorTypes.COMPONENT\r\n    ];\r\n    \r\n    return recoverableTypes.includes(type);\r\n  }\r\n\r\n  /**\r\n   * Log error\r\n   */\r\n  _logError(errorInfo) {\r\n    const logLevel = this._getLogLevel(errorInfo.severity);\r\n    const logMessage = this._formatLogMessage(errorInfo);\r\n    \r\n    switch (logLevel) {\r\n      case 'error':\r\n        console.error(logMessage, errorInfo);\r\n        break;\r\n      case 'warn':\r\n        console.warn(logMessage, errorInfo);\r\n        break;\r\n      case 'info':\r\n        console.info(logMessage, errorInfo);\r\n        break;\r\n      default:\r\n        console.log(logMessage, errorInfo);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get log level based on severity\r\n   */\r\n  _getLogLevel(severity) {\r\n    const levelMap = {\r\n      high: 'error',\r\n      medium: 'warn',\r\n      low: 'info'\r\n    };\r\n    \r\n    return levelMap[severity] || 'log';\r\n  }\r\n\r\n  /**\r\n   * Format log message\r\n   */\r\n  _formatLogMessage(errorInfo) {\r\n    return `[Accessify ${errorInfo.type.toUpperCase()}] ${errorInfo.context}: ${errorInfo.message}`;\r\n  }\r\n\r\n  /**\r\n   * Get all errors\r\n   */\r\n  getErrors() {\r\n    return [...this.errors];\r\n  }\r\n\r\n  /**\r\n   * Get errors by type\r\n   */\r\n  getErrorsByType(type) {\r\n    return this.errors.filter(error => error.type === type);\r\n  }\r\n\r\n  /**\r\n   * Get errors by severity\r\n   */\r\n  getErrorsBySeverity(severity) {\r\n    return this.errors.filter(error => error.severity === severity);\r\n  }\r\n\r\n  /**\r\n   * Get recent errors\r\n   */\r\n  getRecentErrors(count = 10) {\r\n    return this.errors.slice(-count);\r\n  }\r\n\r\n  /**\r\n   * Clear errors\r\n   */\r\n  clearErrors() {\r\n    this.errors = [];\r\n  }\r\n\r\n  /**\r\n   * Get error statistics\r\n   */\r\n  getErrorStats() {\r\n    const stats = {\r\n      total: this.errors.length,\r\n      byType: {},\r\n      bySeverity: {},\r\n      recent: this.getRecentErrors(5).length\r\n    };\r\n    \r\n    // Count by type\r\n    this.errors.forEach(error => {\r\n      stats.byType[error.type] = (stats.byType[error.type] || 0) + 1;\r\n    });\r\n    \r\n    // Count by severity\r\n    this.errors.forEach(error => {\r\n      stats.bySeverity[error.severity] = (stats.bySeverity[error.severity] || 0) + 1;\r\n    });\r\n    \r\n    return stats;\r\n  }\r\n\r\n  /**\r\n   * Check if there are critical errors\r\n   */\r\n  hasCriticalErrors() {\r\n    return this.errors.some(error => error.severity === 'high');\r\n  }\r\n\r\n  /**\r\n   * Get critical errors\r\n   */\r\n  getCriticalErrors() {\r\n    return this.errors.filter(error => error.severity === 'high');\r\n  }\r\n\r\n  /**\r\n   * Create error report\r\n   */\r\n  createErrorReport() {\r\n    const stats = this.getErrorStats();\r\n    const criticalErrors = this.getCriticalErrors();\r\n    \r\n    return {\r\n      timestamp: new Date().toISOString(),\r\n      userAgent: navigator.userAgent,\r\n      url: window.location.href,\r\n      stats,\r\n      criticalErrors,\r\n      allErrors: this.errors,\r\n      recommendations: this._getErrorRecommendations()\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get error recommendations\r\n   */\r\n  _getErrorRecommendations() {\r\n    const recommendations = [];\r\n    const stats = this.getErrorStats();\r\n    \r\n    if (stats.byType[this.errorTypes.COMPATIBILITY] > 0) {\r\n      recommendations.push('Consider updating your browser or using a supported browser');\r\n    }\r\n    \r\n    if (stats.byType[this.errorTypes.PERMISSION] > 0) {\r\n      recommendations.push('Check browser permissions for microphone, camera, and storage access');\r\n    }\r\n    \r\n    if (stats.byType[this.errorTypes.NETWORK] > 0) {\r\n      recommendations.push('Check your internet connection and try again');\r\n    }\r\n    \r\n    if (stats.byType[this.errorTypes.PLUGIN] > 0) {\r\n      recommendations.push('Some accessibility plugins may not be working correctly');\r\n    }\r\n    \r\n    return recommendations;\r\n  }\r\n\r\n  /**\r\n   * Wrap function with error handling\r\n   */\r\n  wrapFunction(fn, context = '', type = this.errorTypes.RUNTIME) {\r\n    return (...args) => {\r\n      try {\r\n        return fn(...args);\r\n      } catch (error) {\r\n        this.handle(error, context, type);\r\n        throw error;\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Wrap async function with error handling\r\n   */\r\n  wrapAsyncFunction(fn, context = '', type = this.errorTypes.RUNTIME) {\r\n    return async (...args) => {\r\n      try {\r\n        return await fn(...args);\r\n      } catch (error) {\r\n        this.handle(error, context, type);\r\n        throw error;\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Create error boundary for components\r\n   */\r\n  createErrorBoundary(componentName) {\r\n    return {\r\n      catch: (error, context = '') => {\r\n        this.handle(error, `${componentName}: ${context}`, this.errorTypes.COMPONENT);\r\n      },\r\n      \r\n      wrap: (fn) => {\r\n        return this.wrapFunction(fn, componentName, this.errorTypes.COMPONENT);\r\n      },\r\n      \r\n      wrapAsync: (fn) => {\r\n        return this.wrapAsyncFunction(fn, componentName, this.errorTypes.COMPONENT);\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Set up global error handlers\r\n   */\r\n  setupGlobalHandlers() {\r\n    // Unhandled errors\r\n    window.addEventListener('error', (event) => {\r\n      this.handle(event.error, 'Global error', this.errorTypes.RUNTIME);\r\n    });\r\n    \r\n    // Unhandled promise rejections\r\n    window.addEventListener('unhandledrejection', (event) => {\r\n      this.handle(event.reason, 'Unhandled promise rejection', this.errorTypes.RUNTIME);\r\n    });\r\n    \r\n    // Console errors\r\n    const originalConsoleError = console.error;\r\n    console.error = (...args) => {\r\n      originalConsoleError.apply(console, args);\r\n      \r\n      // Check if it's an Accessify-related error\r\n      const message = args.join(' ');\r\n      if (message.includes('Accessify') || message.includes('accessibility')) {\r\n        this.handle(new Error(message), 'Console error', this.errorTypes.RUNTIME);\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Remove global error handlers\r\n   */\r\n  removeGlobalHandlers() {\r\n    // Note: This is a simplified version. In a real implementation,\r\n    // you'd need to store references to the original handlers\r\n    console.warn('Global error handlers cannot be easily removed. Consider restarting the page.');\r\n  }\r\n}\r\n","/**\r\n * Visual Accessibility Component\r\n * Handles text size, contrast, themes, cursors, and focus indicators\r\n */\r\n\r\nexport class VisualAccessibility {\r\n  constructor(accessify) {\r\n    this.accessify = accessify;\r\n    this.isInitialized = false;\r\n    this.currentStyles = new Map();\r\n    this.styleElement = null;\r\n    this.originalStyles = new Map();\r\n  }\r\n\r\n  /**\r\n   * Initialize visual accessibility features\r\n   */\r\n  async init() {\r\n    try {\r\n      if (this.isInitialized) {\r\n        return;\r\n      }\r\n\r\n      // Create style element for dynamic styles\r\n      this.styleElement = document.createElement('style');\r\n      this.styleElement.id = 'accessify-visual-styles';\r\n      document.head.appendChild(this.styleElement);\r\n\r\n      // Store original styles\r\n      this._storeOriginalStyles();\r\n\r\n      // Apply initial configuration\r\n      await this._applyInitialConfiguration();\r\n\r\n      // Set up event listeners\r\n      this._setupEventListeners();\r\n\r\n      // Initialize alt text generation\r\n      this._initializeAltTextGeneration();\r\n\r\n      this.isInitialized = true;\r\n      this.accessify.emit('visualAccessibilityInitialized');\r\n\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Visual accessibility initialization', 'component');\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy visual accessibility features\r\n   */\r\n  destroy() {\r\n    try {\r\n      if (!this.isInitialized) {\r\n        return;\r\n      }\r\n\r\n      // Remove event listeners\r\n      this._removeEventListeners();\r\n\r\n      // Restore original styles\r\n      this._restoreOriginalStyles();\r\n\r\n      // Remove style element\r\n      if (this.styleElement && this.styleElement.parentNode) {\r\n        this.styleElement.parentNode.removeChild(this.styleElement);\r\n      }\r\n\r\n      // Clear current styles\r\n      this.currentStyles.clear();\r\n\r\n      this.isInitialized = false;\r\n      this.accessify.emit('visualAccessibilityDestroyed');\r\n\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Visual accessibility destruction', 'component');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set text size\r\n   */\r\n  setTextSize(size) {\r\n    const config = this.accessify.configManager.get('visual.textSize');\r\n    const clampedSize = Math.max(config.min, Math.min(config.max, size));\r\n    \r\n    this.accessify.configManager.set('visual.textSize.current', clampedSize);\r\n    this._applyTextSize(clampedSize);\r\n    \r\n    this.accessify.emit('textSizeChanged', clampedSize);\r\n  }\r\n\r\n  /**\r\n   * Increase text size\r\n   */\r\n  increaseTextSize() {\r\n    const config = this.accessify.configManager.get('visual.textSize');\r\n    const current = config.current;\r\n    const newSize = Math.min(config.max, current + config.step);\r\n    this.setTextSize(newSize);\r\n  }\r\n\r\n  /**\r\n   * Decrease text size\r\n   */\r\n  decreaseTextSize() {\r\n    const config = this.accessify.configManager.get('visual.textSize');\r\n    const current = config.current;\r\n    const newSize = Math.max(config.min, current - config.step);\r\n    this.setTextSize(newSize);\r\n  }\r\n\r\n  /**\r\n   * Reset text size\r\n   */\r\n  resetTextSize() {\r\n    this.setTextSize(1.0);\r\n  }\r\n\r\n  /**\r\n   * Set contrast mode\r\n   */\r\n  setContrastMode(mode) {\r\n    const availableModes = this.accessify.configManager.get('visual.contrast.modes');\r\n    \r\n    if (!availableModes.includes(mode)) {\r\n      throw new Error(`Invalid contrast mode: ${mode}`);\r\n    }\r\n\r\n    this.accessify.configManager.set('visual.contrast.current', mode);\r\n    this._applyContrastMode(mode);\r\n    \r\n    this.accessify.emit('contrastModeChanged', mode);\r\n  }\r\n\r\n  /**\r\n   * Toggle contrast mode\r\n   */\r\n  toggleContrastMode() {\r\n    const current = this.accessify.configManager.get('visual.contrast.current');\r\n    const modes = this.accessify.configManager.get('visual.contrast.modes');\r\n    const currentIndex = modes.indexOf(current);\r\n    const nextIndex = (currentIndex + 1) % modes.length;\r\n    this.setContrastMode(modes[nextIndex]);\r\n  }\r\n\r\n  /**\r\n   * Set brightness level\r\n   */\r\n  setBrightness(level) {\r\n    const config = this.accessify.configManager.get('visual.brightness');\r\n    const clampedLevel = Math.max(config.min, Math.min(config.max, level));\r\n    \r\n    this.accessify.configManager.set('visual.brightness.current', clampedLevel);\r\n    this._applyBrightness(clampedLevel);\r\n    \r\n    this.accessify.emit('brightnessChanged', clampedLevel);\r\n  }\r\n\r\n  /**\r\n   * Set theme\r\n   */\r\n  setTheme(theme) {\r\n    const availableThemes = this.accessify.configManager.get('visual.themes.available');\r\n    \r\n    if (!availableThemes.includes(theme)) {\r\n      throw new Error(`Invalid theme: ${theme}`);\r\n    }\r\n\r\n    this.accessify.configManager.set('visual.themes.current', theme);\r\n    this._applyTheme(theme);\r\n    \r\n    this.accessify.emit('themeChanged', theme);\r\n  }\r\n\r\n  /**\r\n   * Set color filter\r\n   */\r\n  setColorFilter(filter) {\r\n    const availableFilters = this.accessify.configManager.get('visual.colorFilters.available');\r\n    \r\n    if (!availableFilters.includes(filter)) {\r\n      throw new Error(`Invalid color filter: ${filter}`);\r\n    }\r\n\r\n    this.accessify.configManager.set('visual.colorFilters.current', filter);\r\n    this._applyColorFilter(filter);\r\n    \r\n    this.accessify.emit('colorFilterChanged', filter);\r\n  }\r\n\r\n  /**\r\n   * Apply color filter\r\n   */\r\n  _applyColorFilter(filter) {\r\n    let css = '';\r\n    \r\n    switch (filter) {\r\n      case 'protanopia':\r\n        css = `\r\n          * {\r\n            filter: url(#protanopia) !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'deuteranopia':\r\n        css = `\r\n          * {\r\n            filter: url(#deuteranopia) !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'tritanopia':\r\n        css = `\r\n          * {\r\n            filter: url(#tritanopia) !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'achromatopsia':\r\n        css = `\r\n          * {\r\n            filter: grayscale(100%) !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'high-contrast':\r\n        css = `\r\n          * {\r\n            filter: contrast(200%) brightness(150%) !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'invert':\r\n        css = `\r\n          * {\r\n            filter: invert(100%) !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'sepia':\r\n        css = `\r\n          * {\r\n            filter: sepia(100%) !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'blue-light':\r\n        css = `\r\n          * {\r\n            filter: hue-rotate(180deg) saturate(150%) !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      default: // 'none'\r\n        css = `\r\n          * {\r\n            filter: none !important;\r\n          }\r\n        `;\r\n        break;\r\n    }\r\n    \r\n    this._addStyle('color-filter', css);\r\n  }\r\n\r\n  /**\r\n   * Set saturation level\r\n   */\r\n  setSaturation(level) {\r\n    const config = this.accessify.configManager.get('visual.saturation');\r\n    const clampedLevel = Math.max(config.min, Math.min(config.max, level));\r\n    \r\n    this.accessify.configManager.set('visual.saturation.current', clampedLevel);\r\n    this._applySaturation(clampedLevel);\r\n    \r\n    this.accessify.emit('saturationChanged', clampedLevel);\r\n  }\r\n\r\n  /**\r\n   * Apply saturation\r\n   */\r\n  _applySaturation(level) {\r\n    const css = `\r\n      * {\r\n        filter: saturate(${level}) !important;\r\n      }\r\n    `;\r\n    \r\n    this._addStyle('saturation', css);\r\n  }\r\n\r\n  /**\r\n   * Set cursor type\r\n   */\r\n  setCursor(cursorType) {\r\n    const availableCursors = this.accessify.configManager.get('visual.cursors.available');\r\n    \r\n    if (!availableCursors.includes(cursorType)) {\r\n      throw new Error(`Invalid cursor type: ${cursorType}`);\r\n    }\r\n\r\n    this.accessify.configManager.set('visual.cursors.current', cursorType);\r\n    this._applyCursor(cursorType);\r\n    \r\n    this.accessify.emit('cursorChanged', cursorType);\r\n  }\r\n\r\n  /**\r\n   * Set focus indicator style\r\n   */\r\n  setFocusIndicator(style) {\r\n    const config = this.accessify.configManager.get('visual.focusIndicators');\r\n    this.accessify.configManager.set('visual.focusIndicators.style', style);\r\n    this._applyFocusIndicators(config);\r\n    \r\n    this.accessify.emit('focusIndicatorChanged', style);\r\n  }\r\n\r\n  /**\r\n   * Set link underlining style\r\n   */\r\n  setLinkUnderlining(style) {\r\n    const config = this.accessify.configManager.get('visual.linkUnderlining');\r\n    this.accessify.configManager.set('visual.linkUnderlining.style', style);\r\n    this._applyLinkUnderlining(config);\r\n    \r\n    this.accessify.emit('linkUnderliningChanged', style);\r\n  }\r\n\r\n  /**\r\n   * Apply link underlining\r\n   */\r\n  _applyLinkUnderlining(config) {\r\n    let css = '';\r\n    \r\n    switch (config.style) {\r\n      case 'always':\r\n        css = `\r\n          a {\r\n            text-decoration: underline !important;\r\n            text-decoration-thickness: ${config.thickness}px !important;\r\n            text-underline-offset: ${config.offset}px !important;\r\n            text-decoration-color: ${config.color} !important;\r\n          }\r\n          \r\n          a:hover {\r\n            text-decoration-thickness: ${config.thickness * 1.5}px !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'hover':\r\n        css = `\r\n          a {\r\n            text-decoration: none !important;\r\n          }\r\n          \r\n          a:hover {\r\n            text-decoration: underline !important;\r\n            text-decoration-thickness: ${config.thickness}px !important;\r\n            text-underline-offset: ${config.offset}px !important;\r\n            text-decoration-color: ${config.color} !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'enhanced':\r\n        css = `\r\n          a {\r\n            text-decoration: underline !important;\r\n            text-decoration-thickness: ${config.thickness}px !important;\r\n            text-underline-offset: ${config.offset}px !important;\r\n            text-decoration-color: ${config.color} !important;\r\n            border-bottom: 1px solid transparent !important;\r\n            transition: all 0.2s ease !important;\r\n          }\r\n          \r\n          a:hover {\r\n            text-decoration-thickness: ${config.thickness * 2}px !important;\r\n            border-bottom-color: ${config.color} !important;\r\n            background-color: rgba(255, 255, 0, 0.1) !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'double':\r\n        css = `\r\n          a {\r\n            text-decoration: underline !important;\r\n            text-decoration-style: double !important;\r\n            text-decoration-thickness: ${config.thickness}px !important;\r\n            text-underline-offset: ${config.offset}px !important;\r\n            text-decoration-color: ${config.color} !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      default: // 'none'\r\n        css = `\r\n          a {\r\n            text-decoration: none !important;\r\n          }\r\n        `;\r\n        break;\r\n    }\r\n    \r\n    this._addStyle('link-underlining', css);\r\n  }\r\n\r\n  /**\r\n   * Apply text size\r\n   */\r\n  _applyTextSize(size) {\r\n    const css = `\r\n      html {\r\n        font-size: ${size * 16}px !important;\r\n      }\r\n      \r\n      body {\r\n        font-size: ${size}rem !important;\r\n      }\r\n      \r\n      * {\r\n        font-size: inherit !important;\r\n      }\r\n    `;\r\n    \r\n    this._addStyle('text-size', css);\r\n  }\r\n\r\n  /**\r\n   * Apply contrast mode\r\n   */\r\n  _applyContrastMode(mode) {\r\n    let css = '';\r\n    \r\n    switch (mode) {\r\n      case 'high':\r\n        css = `\r\n          * {\r\n            background-color: white !important;\r\n            color: black !important;\r\n            border-color: black !important;\r\n          }\r\n          \r\n          a {\r\n            color: #0000EE !important;\r\n          }\r\n          \r\n          a:visited {\r\n            color: #551A8B !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'inverted':\r\n        css = `\r\n          * {\r\n            background-color: black !important;\r\n            color: white !important;\r\n            border-color: white !important;\r\n          }\r\n          \r\n          a {\r\n            color: #00FFFF !important;\r\n          }\r\n          \r\n          a:visited {\r\n            color: #FF00FF !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'grayscale':\r\n        css = `\r\n          * {\r\n            filter: grayscale(100%) !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'normal':\r\n      default:\r\n        css = `\r\n          * {\r\n            filter: none !important;\r\n          }\r\n        `;\r\n        break;\r\n    }\r\n    \r\n    this._addStyle('contrast-mode', css);\r\n  }\r\n\r\n  /**\r\n   * Apply brightness\r\n   */\r\n  _applyBrightness(level) {\r\n    const css = `\r\n      * {\r\n        filter: brightness(${level}) !important;\r\n      }\r\n    `;\r\n    \r\n    this._addStyle('brightness', css);\r\n  }\r\n\r\n  /**\r\n   * Apply theme\r\n   */\r\n  _applyTheme(theme) {\r\n    let css = '';\r\n    \r\n    switch (theme) {\r\n      case 'dark':\r\n        css = `\r\n          * {\r\n            background-color: #1a1a1a !important;\r\n            color: #ffffff !important;\r\n            border-color: #333333 !important;\r\n          }\r\n          \r\n          a {\r\n            color: #66b3ff !important;\r\n          }\r\n          \r\n          input, textarea, select {\r\n            background-color: #2a2a2a !important;\r\n            color: #ffffff !important;\r\n            border-color: #444444 !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'light':\r\n        css = `\r\n          * {\r\n            background-color: #ffffff !important;\r\n            color: #000000 !important;\r\n            border-color: #cccccc !important;\r\n          }\r\n          \r\n          a {\r\n            color: #0066cc !important;\r\n          }\r\n          \r\n          input, textarea, select {\r\n            background-color: #f8f8f8 !important;\r\n            color: #000000 !important;\r\n            border-color: #dddddd !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'colorblind-friendly':\r\n        css = `\r\n          * {\r\n            background-color: #f8f8f8 !important;\r\n            color: #2c2c2c !important;\r\n            border-color: #666666 !important;\r\n          }\r\n          \r\n          a {\r\n            color: #0066cc !important;\r\n          }\r\n          \r\n          .error, .danger {\r\n            color: #d73027 !important;\r\n          }\r\n          \r\n          .warning {\r\n            color: #f46d43 !important;\r\n          }\r\n          \r\n          .success {\r\n            color: #1a9641 !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'default':\r\n      default:\r\n        css = `\r\n          * {\r\n            background-color: inherit !important;\r\n            color: inherit !important;\r\n            border-color: inherit !important;\r\n          }\r\n        `;\r\n        break;\r\n    }\r\n    \r\n    this._addStyle('theme', css);\r\n  }\r\n\r\n  /**\r\n   * Apply cursor\r\n   */\r\n  _applyCursor(cursorType) {\r\n    let css = '';\r\n    \r\n    switch (cursorType) {\r\n      case 'large':\r\n        css = `\r\n          * {\r\n            cursor: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 32 32\"><circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"black\"/></svg>'), auto !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'extra-large':\r\n        css = `\r\n          * {\r\n            cursor: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><circle cx=\"24\" cy=\"24\" r=\"24\" fill=\"black\"/></svg>'), auto !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'high-contrast':\r\n        css = `\r\n          * {\r\n            cursor: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 32 32\"><circle cx=\"16\" cy=\"16\" r=\"14\" fill=\"white\" stroke=\"black\" stroke-width=\"2\"/></svg>'), auto !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'crosshair':\r\n        css = `\r\n          * {\r\n            cursor: crosshair !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'pointer-large':\r\n        css = `\r\n          * {\r\n            cursor: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 32 32\"><path d=\"M2 2 L2 22 L8 16 L14 22 L14 2 Z\" fill=\"black\"/></svg>'), auto !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'text-large':\r\n        css = `\r\n          * {\r\n            cursor: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"32\" viewBox=\"0 0 24 32\"><line x1=\"12\" y1=\"2\" x2=\"12\" y2=\"30\" stroke=\"black\" stroke-width=\"3\"/></svg>'), auto !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'default':\r\n      default:\r\n        css = `\r\n          * {\r\n            cursor: default !important;\r\n          }\r\n        `;\r\n        break;\r\n    }\r\n    \r\n    this._addStyle('cursor', css);\r\n  }\r\n\r\n  /**\r\n   * Apply focus indicators\r\n   */\r\n  _applyFocusIndicators(config) {\r\n    let css = '';\r\n    \r\n    // Enhanced focus indicators with multiple styles\r\n    switch (config.style) {\r\n      case 'highlight':\r\n        css = `\r\n          *:focus,\r\n          *:focus-visible {\r\n            outline: ${config.thickness}px solid ${config.color} !important;\r\n            outline-offset: 2px !important;\r\n            background-color: rgba(255, 255, 0, 0.2) !important;\r\n            box-shadow: 0 0 0 ${config.thickness}px ${config.color}, 0 0 10px rgba(255, 255, 0, 0.5) !important;\r\n            border-radius: 3px !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'glow':\r\n        css = `\r\n          *:focus,\r\n          *:focus-visible {\r\n            outline: none !important;\r\n            box-shadow: 0 0 0 ${config.thickness}px ${config.color}, 0 0 20px ${config.color} !important;\r\n            border-radius: 3px !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'thick':\r\n        css = `\r\n          *:focus,\r\n          *:focus-visible {\r\n            outline: ${config.thickness * 2}px solid ${config.color} !important;\r\n            outline-offset: 3px !important;\r\n            border-radius: 3px !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      case 'dotted':\r\n        css = `\r\n          *:focus,\r\n          *:focus-visible {\r\n            outline: ${config.thickness}px dotted ${config.color} !important;\r\n            outline-offset: 2px !important;\r\n            border-radius: 3px !important;\r\n          }\r\n        `;\r\n        break;\r\n        \r\n      default: // 'standard'\r\n        css = `\r\n          *:focus,\r\n          *:focus-visible {\r\n            outline: ${config.thickness}px solid ${config.color} !important;\r\n            outline-offset: 2px !important;\r\n          }\r\n        `;\r\n        break;\r\n    }\r\n    \r\n    // Enhanced focus for specific elements\r\n    css += `\r\n      button:focus,\r\n      input:focus,\r\n      textarea:focus,\r\n      select:focus,\r\n      a:focus,\r\n      [role=\"button\"]:focus,\r\n      [tabindex]:focus {\r\n        ${css.includes('outline: none') ? '' : 'outline: ' + config.thickness + 'px solid ' + config.color + ' !important;'}\r\n        ${css.includes('outline: none') ? '' : 'outline-offset: 2px !important;'}\r\n        border-radius: 3px !important;\r\n      }\r\n      \r\n      /* Focus enhancement for better visibility */\r\n      .accessify-focus-enhanced *:focus,\r\n      .accessify-focus-enhanced *:focus-visible {\r\n        transform: scale(1.02) !important;\r\n        transition: all 0.2s ease !important;\r\n        z-index: 9999 !important;\r\n      }\r\n    `;\r\n    \r\n    this._addStyle('focus-indicators', css);\r\n  }\r\n\r\n  /**\r\n   * Add style to the style element\r\n   */\r\n  _addStyle(name, css) {\r\n    this.currentStyles.set(name, css);\r\n    this._updateStyleElement();\r\n  }\r\n\r\n  /**\r\n   * Remove style from the style element\r\n   */\r\n  _removeStyle(name) {\r\n    this.currentStyles.delete(name);\r\n    this._updateStyleElement();\r\n  }\r\n\r\n  /**\r\n   * Update the style element with all current styles\r\n   */\r\n  _updateStyleElement() {\r\n    if (!this.styleElement) {\r\n      return;\r\n    }\r\n\r\n    const allStyles = Array.from(this.currentStyles.values()).join('\\n');\r\n    this.styleElement.textContent = allStyles;\r\n  }\r\n\r\n  /**\r\n   * Store original styles\r\n   */\r\n  _storeOriginalStyles() {\r\n    // Store original font size\r\n    const htmlElement = document.documentElement;\r\n    const bodyElement = document.body;\r\n    \r\n    this.originalStyles.set('html-font-size', htmlElement.style.fontSize);\r\n    this.originalStyles.set('body-font-size', bodyElement.style.fontSize);\r\n    \r\n    // Store original cursor\r\n    this.originalStyles.set('cursor', document.body.style.cursor);\r\n  }\r\n\r\n  /**\r\n   * Restore original styles\r\n   */\r\n  _restoreOriginalStyles() {\r\n    // Restore original font size\r\n    const htmlElement = document.documentElement;\r\n    const bodyElement = document.body;\r\n    \r\n    htmlElement.style.fontSize = this.originalStyles.get('html-font-size') || '';\r\n    bodyElement.style.fontSize = this.originalStyles.get('body-font-size') || '';\r\n    \r\n    // Restore original cursor\r\n    document.body.style.cursor = this.originalStyles.get('cursor') || '';\r\n  }\r\n\r\n  /**\r\n   * Apply initial configuration\r\n   */\r\n  async _applyInitialConfiguration() {\r\n    const config = this.accessify.configManager.get('visual');\r\n    \r\n    // Apply text size\r\n    if (config.textSize.enabled) {\r\n      this._applyTextSize(config.textSize.current);\r\n    }\r\n    \r\n    // Apply contrast mode\r\n    if (config.contrast.enabled) {\r\n      this._applyContrastMode(config.contrast.current);\r\n    }\r\n    \r\n    // Apply brightness\r\n    if (config.brightness.enabled) {\r\n      this._applyBrightness(config.brightness.current);\r\n    }\r\n    \r\n    // Apply theme\r\n    if (config.themes.enabled) {\r\n      this._applyTheme(config.themes.current);\r\n    }\r\n    \r\n    // Apply cursor\r\n    if (config.cursors.enabled) {\r\n      this._applyCursor(config.cursors.current);\r\n    }\r\n    \r\n    // Apply focus indicators\r\n    if (config.focusIndicators.enabled) {\r\n      this._applyFocusIndicators(config.focusIndicators);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set up event listeners\r\n   */\r\n  _setupEventListeners() {\r\n    // Listen for configuration changes\r\n    this.accessify.on('configUpdated', (newConfig) => {\r\n      if (newConfig.visual) {\r\n        this._applyInitialConfiguration();\r\n      }\r\n    });\r\n    \r\n    // Listen for keyboard shortcuts\r\n    document.addEventListener('keydown', (event) => {\r\n      if (event.altKey) {\r\n        switch (event.key) {\r\n          case '+':\r\n          case '=':\r\n            event.preventDefault();\r\n            this.increaseTextSize();\r\n            break;\r\n          case '-':\r\n            event.preventDefault();\r\n            this.decreaseTextSize();\r\n            break;\r\n          case 'c':\r\n            event.preventDefault();\r\n            this.toggleContrastMode();\r\n            break;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Remove event listeners\r\n   */\r\n  _removeEventListeners() {\r\n    // Remove keyboard event listeners\r\n    document.removeEventListener('keydown', this._handleKeydown);\r\n  }\r\n\r\n  /**\r\n   * Get compliance status\r\n   */\r\n  getComplianceStatus() {\r\n    const config = this.accessify.configManager.get('visual');\r\n    const enabledFeatures = [];\r\n    \r\n    if (config.textSize.enabled) enabledFeatures.push('textSizeAdjustment');\r\n    if (config.contrast.enabled) enabledFeatures.push('highContrast');\r\n    if (config.themes.enabled) enabledFeatures.push('colorThemes');\r\n    if (config.cursors.enabled) enabledFeatures.push('customCursors');\r\n    if (config.focusIndicators.enabled) enabledFeatures.push('focusIndicators');\r\n    \r\n    return {\r\n      wcag: {\r\n        level: 'AA',\r\n        compliant: enabledFeatures.length >= 3,\r\n        score: Math.round((enabledFeatures.length / 5) * 100)\r\n      },\r\n      israeliStandard: {\r\n        compliant: enabledFeatures.includes('textSizeAdjustment') && \r\n                   enabledFeatures.includes('highContrast'),\r\n        score: Math.round((enabledFeatures.length / 5) * 100)\r\n      },\r\n      features: enabledFeatures\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get current visual settings\r\n   */\r\n  getCurrentSettings() {\r\n    return {\r\n      textSize: this.accessify.configManager.get('visual.textSize.current'),\r\n      contrast: this.accessify.configManager.get('visual.contrast.current'),\r\n      brightness: this.accessify.configManager.get('visual.brightness.current'),\r\n      theme: this.accessify.configManager.get('visual.themes.current'),\r\n      cursor: this.accessify.configManager.get('visual.cursors.current'),\r\n      focusIndicators: this.accessify.configManager.get('visual.focusIndicators')\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Reset all visual settings to default\r\n   */\r\n  reset() {\r\n    this.resetTextSize();\r\n    this.setContrastMode('normal');\r\n    this.setBrightness(1.0);\r\n    this.setTheme('default');\r\n    this.setCursor('default');\r\n    \r\n    this.accessify.emit('visualSettingsReset');\r\n  }\r\n\r\n  /**\r\n   * Initialize automatic alt text generation\r\n   */\r\n  _initializeAltTextGeneration() {\r\n    try {\r\n      // Check if alt text generation is enabled\r\n      const config = this.accessify.configManager.get('visual.altTextGeneration', { enabled: true });\r\n      \r\n      if (config.enabled) {\r\n        this._generateAltTextForImages();\r\n        this._observeNewImages();\r\n        this.currentStyles.set('altTextGeneration', true);\r\n        this.accessify.emit('altTextGenerationEnabled');\r\n      }\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Alt text generation initialization', 'component');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Generate alt text for existing images\r\n   */\r\n  _generateAltTextForImages() {\r\n    const images = document.querySelectorAll('img:not([alt])');\r\n    \r\n    images.forEach(img => {\r\n      this._generateAltTextForImage(img);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Generate alt text for a specific image\r\n   */\r\n  _generateAltTextForImage(img) {\r\n    try {\r\n      // Skip if already has alt text\r\n      if (img.getAttribute('alt') !== null) {\r\n        return;\r\n      }\r\n\r\n      // Generate alt text based on image properties\r\n      let altText = '';\r\n\r\n      // Use filename if available\r\n      const src = img.src || img.getAttribute('src');\r\n      if (src) {\r\n        const filename = src.split('/').pop().split('.')[0];\r\n        altText = filename.replace(/[-_]/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\r\n      }\r\n\r\n      // Use title attribute if available\r\n      if (img.title) {\r\n        altText = img.title;\r\n      }\r\n\r\n      // Use aria-label if available\r\n      if (img.getAttribute('aria-label')) {\r\n        altText = img.getAttribute('aria-label');\r\n      }\r\n\r\n      // Use data-alt if available\r\n      if (img.getAttribute('data-alt')) {\r\n        altText = img.getAttribute('data-alt');\r\n      }\r\n\r\n      // Fallback to generic description\r\n      if (!altText) {\r\n        altText = 'Image';\r\n      }\r\n\r\n      // Set the alt text\r\n      img.setAttribute('alt', altText);\r\n      img.setAttribute('data-accessify-generated', 'true');\r\n\r\n      this.accessify.emit('altTextGenerated', { img, altText });\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Alt text generation for image', 'component');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Observe for new images and generate alt text\r\n   */\r\n  _observeNewImages() {\r\n    if (typeof MutationObserver !== 'undefined') {\r\n      this.imageObserver = new MutationObserver(mutations => {\r\n        mutations.forEach(mutation => {\r\n          mutation.addedNodes.forEach(node => {\r\n            if (node.nodeType === Node.ELEMENT_NODE) {\r\n              // Check if the added node is an image\r\n              if (node.tagName === 'IMG') {\r\n                this._generateAltTextForImage(node);\r\n              }\r\n              \r\n              // Check for images within the added node\r\n              const images = node.querySelectorAll && node.querySelectorAll('img');\r\n              if (images) {\r\n                images.forEach(img => this._generateAltTextForImage(img));\r\n              }\r\n            }\r\n          });\r\n        });\r\n      });\r\n\r\n      this.imageObserver.observe(document.body, {\r\n        childList: true,\r\n        subtree: true\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Validate color contrast ratio\r\n   */\r\n  validateColorContrast(foreground, background) {\r\n    try {\r\n      // Convert colors to RGB\r\n      const fgRgb = this._hexToRgb(foreground);\r\n      const bgRgb = this._hexToRgb(background);\r\n      \r\n      if (!fgRgb || !bgRgb) {\r\n        return { ratio: 0, level: 'fail', message: 'Invalid color format' };\r\n      }\r\n\r\n      // Calculate relative luminance\r\n      const fgLuminance = this._getRelativeLuminance(fgRgb);\r\n      const bgLuminance = this._getRelativeLuminance(bgRgb);\r\n\r\n      // Calculate contrast ratio\r\n      const lighter = Math.max(fgLuminance, bgLuminance);\r\n      const darker = Math.min(fgLuminance, bgLuminance);\r\n      const ratio = (lighter + 0.05) / (darker + 0.05);\r\n\r\n      // Determine compliance level\r\n      let level, message;\r\n      if (ratio >= 7) {\r\n        level = 'AAA';\r\n        message = 'Excellent contrast (AAA)';\r\n      } else if (ratio >= 4.5) {\r\n        level = 'AA';\r\n        message = 'Good contrast (AA)';\r\n      } else if (ratio >= 3) {\r\n        level = 'AA Large';\r\n        message = 'Acceptable for large text (AA Large)';\r\n      } else {\r\n        level = 'fail';\r\n        message = 'Insufficient contrast';\r\n      }\r\n\r\n      return { ratio: Math.round(ratio * 100) / 100, level, message };\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Color contrast validation', 'component');\r\n      return { ratio: 0, level: 'error', message: 'Error calculating contrast' };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Convert hex color to RGB\r\n   */\r\n  _hexToRgb(hex) {\r\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n    return result ? {\r\n      r: parseInt(result[1], 16),\r\n      g: parseInt(result[2], 16),\r\n      b: parseInt(result[3], 16)\r\n    } : null;\r\n  }\r\n\r\n  /**\r\n   * Calculate relative luminance\r\n   */\r\n  _getRelativeLuminance(rgb) {\r\n    const { r, g, b } = rgb;\r\n    \r\n    // Convert to sRGB\r\n    const rsRGB = r / 255;\r\n    const gsRGB = g / 255;\r\n    const bsRGB = b / 255;\r\n\r\n    // Apply gamma correction\r\n    const rLinear = rsRGB <= 0.03928 ? rsRGB / 12.92 : Math.pow((rsRGB + 0.055) / 1.055, 2.4);\r\n    const gLinear = gsRGB <= 0.03928 ? gsRGB / 12.92 : Math.pow((gsRGB + 0.055) / 1.055, 2.4);\r\n    const bLinear = bsRGB <= 0.03928 ? bsRGB / 12.92 : Math.pow((bsRGB + 0.055) / 1.055, 2.4);\r\n\r\n    return 0.2126 * rLinear + 0.7152 * gLinear + 0.0722 * bLinear;\r\n  }\r\n\r\n  /**\r\n   * Detect reduced motion preferences\r\n   */\r\n  detectReducedMotion() {\r\n    try {\r\n      if (window.matchMedia) {\r\n        const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)');\r\n        return prefersReducedMotion.matches;\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Reduced motion detection', 'component');\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Apply reduced motion settings\r\n   */\r\n  applyReducedMotion() {\r\n    const prefersReducedMotion = this.detectReducedMotion();\r\n    \r\n    if (prefersReducedMotion) {\r\n      this.styleElement.textContent += `\r\n        *, *::before, *::after {\r\n          animation-duration: 0.01ms !important;\r\n          animation-iteration-count: 1 !important;\r\n          transition-duration: 0.01ms !important;\r\n        }\r\n      `;\r\n      this.currentStyles.set('reducedMotion', true);\r\n      this.accessify.emit('reducedMotionApplied');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stop all animations\r\n   */\r\n  stopAnimations() {\r\n    const css = `\r\n      *, *::before, *::after {\r\n        animation-play-state: paused !important;\r\n        transition: none !important;\r\n        transform: none !important;\r\n      }\r\n      \r\n      /* Pause specific animation types */\r\n      .accessify-paused * {\r\n        animation-play-state: paused !important;\r\n      }\r\n      \r\n      /* Stop scrolling animations */\r\n      html {\r\n        scroll-behavior: auto !important;\r\n      }\r\n      \r\n      /* Stop video animations if any */\r\n      video, iframe {\r\n        animation-play-state: paused !important;\r\n      }\r\n      \r\n      /* Stop gif animations */\r\n      img[src$=\".gif\"] {\r\n        animation-play-state: paused !important;\r\n      }\r\n    `;\r\n    \r\n    this._addStyle('stop-animations', css);\r\n    this.accessify.emit('animationsStopped');\r\n  }\r\n\r\n  /**\r\n   * Resume animations\r\n   */\r\n  resumeAnimations() {\r\n    this._removeStyle('stop-animations');\r\n    this.accessify.emit('animationsResumed');\r\n  }\r\n\r\n  /**\r\n   * Toggle animations\r\n   */\r\n  toggleAnimations() {\r\n    if (this.currentStyles.has('stop-animations')) {\r\n      this.resumeAnimations();\r\n    } else {\r\n      this.stopAnimations();\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Navigation Accessibility Component\r\n * Handles keyboard navigation, focus management, and skip links\r\n */\r\n\r\nexport class NavigationAccessibility {\r\n  constructor(accessify) {\r\n    this.accessify = accessify;\r\n    this.isInitialized = false;\r\n    this.focusTrap = null;\r\n    this.skipLinks = [];\r\n    this.keyboardShortcuts = new Map();\r\n    this.focusHistory = [];\r\n    this.tabOrder = [];\r\n  }\r\n\r\n  /**\r\n   * Initialize navigation accessibility features\r\n   */\r\n  async init() {\r\n    try {\r\n      if (this.isInitialized) {\r\n        return;\r\n      }\r\n\r\n      // Set up keyboard navigation\r\n      this._setupKeyboardNavigation();\r\n      \r\n      // Create skip links\r\n      this._createSkipLinks();\r\n      \r\n      // Set up focus management\r\n      this._setupFocusManagement();\r\n      \r\n      // Set up keyboard shortcuts\r\n      this._setupKeyboardShortcuts();\r\n      \r\n      // Set up tab order optimization\r\n      this._setupTabOrder();\r\n\r\n      this.isInitialized = true;\r\n      this.accessify.emit('navigationAccessibilityInitialized');\r\n\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Navigation accessibility initialization', 'component');\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy navigation accessibility features\r\n   */\r\n  destroy() {\r\n    try {\r\n      if (!this.isInitialized) {\r\n        return;\r\n      }\r\n\r\n      // Remove event listeners\r\n      this._removeEventListeners();\r\n      \r\n      // Remove skip links\r\n      this._removeSkipLinks();\r\n      \r\n      // Clear focus trap\r\n      this._clearFocusTrap();\r\n\r\n      this.isInitialized = false;\r\n      this.accessify.emit('navigationAccessibilityDestroyed');\r\n\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Navigation accessibility destruction', 'component');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set up keyboard navigation\r\n   */\r\n  _setupKeyboardNavigation() {\r\n    // Add keyboard event listeners\r\n    document.addEventListener('keydown', this._handleKeydown.bind(this));\r\n    document.addEventListener('keyup', this._handleKeyup.bind(this));\r\n    \r\n    // Add focus event listeners\r\n    document.addEventListener('focusin', this._handleFocusIn.bind(this));\r\n    document.addEventListener('focusout', this._handleFocusOut.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Handle keydown events\r\n   */\r\n  _handleKeydown(event) {\r\n    const config = this.accessify.configManager.get('navigation.keyboard.shortcuts');\r\n    \r\n    if (!config.enabled) {\r\n      return;\r\n    }\r\n\r\n    // Check for keyboard shortcuts\r\n    const shortcut = this._getShortcutKey(event);\r\n    if (this.keyboardShortcuts.has(shortcut)) {\r\n      event.preventDefault();\r\n      this.keyboardShortcuts.get(shortcut)();\r\n      return;\r\n    }\r\n\r\n    // Handle special navigation keys\r\n    switch (event.key) {\r\n      case 'Tab':\r\n        this._handleTabNavigation(event);\r\n        break;\r\n      case 'Escape':\r\n        this._handleEscapeKey(event);\r\n        break;\r\n      case 'Enter':\r\n      case ' ':\r\n        this._handleActivationKey(event);\r\n        break;\r\n      case 'ArrowUp':\r\n      case 'ArrowDown':\r\n      case 'ArrowLeft':\r\n      case 'ArrowRight':\r\n        this._handleArrowKeys(event);\r\n        break;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle keyup events\r\n   */\r\n  _handleKeyup(event) {\r\n    // Handle keyup events if needed\r\n  }\r\n\r\n  /**\r\n   * Handle focus in events\r\n   */\r\n  _handleFocusIn(event) {\r\n    // Add to focus history\r\n    this.focusHistory.push(event.target);\r\n    \r\n    // Limit focus history size\r\n    if (this.focusHistory.length > 10) {\r\n      this.focusHistory.shift();\r\n    }\r\n    \r\n    // Emit focus event\r\n    this.accessify.emit('focusIn', event.target);\r\n  }\r\n\r\n  /**\r\n   * Handle focus out events\r\n   */\r\n  _handleFocusOut(event) {\r\n    this.accessify.emit('focusOut', event.target);\r\n  }\r\n\r\n  /**\r\n   * Handle tab navigation\r\n   */\r\n  _handleTabNavigation(event) {\r\n    const config = this.accessify.configManager.get('navigation.focus');\r\n    \r\n    if (!config.enabled) {\r\n      return;\r\n    }\r\n\r\n    // Check if we're in a focus trap\r\n    if (this.focusTrap) {\r\n      this._handleFocusTrap(event);\r\n    }\r\n    \r\n    // Optimize tab order if enabled\r\n    if (config.order === 'logical') {\r\n      this._optimizeTabOrder(event);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle escape key\r\n   */\r\n  _handleEscapeKey(event) {\r\n    // Close any open modals or menus\r\n    this._closeOpenElements();\r\n    \r\n    // Return focus to previous element\r\n    this._returnFocus();\r\n  }\r\n\r\n  /**\r\n   * Handle activation keys (Enter, Space)\r\n   */\r\n  _handleActivationKey(event) {\r\n    const target = event.target;\r\n    \r\n    // Handle different element types\r\n    if (target.tagName === 'BUTTON' || target.getAttribute('role') === 'button') {\r\n      // Button activation is handled by default\r\n      return;\r\n    }\r\n    \r\n    if (target.tagName === 'A' && target.getAttribute('href')) {\r\n      // Link activation is handled by default\r\n      return;\r\n    }\r\n    \r\n    // Handle custom interactive elements\r\n    if (target.getAttribute('tabindex') === '0') {\r\n      target.click();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle arrow keys\r\n   */\r\n  _handleArrowKeys(event) {\r\n    const target = event.target;\r\n    \r\n    // Handle arrow key navigation for custom components\r\n    if (target.getAttribute('role') === 'menu' || \r\n        target.getAttribute('role') === 'menubar' ||\r\n        target.getAttribute('role') === 'tablist') {\r\n      this._handleArrowKeyNavigation(event);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle arrow key navigation\r\n   */\r\n  _handleArrowKeyNavigation(event) {\r\n    const target = event.target;\r\n    const role = target.getAttribute('role');\r\n    const items = target.querySelectorAll(`[role=\"${role === 'tablist' ? 'tab' : 'menuitem'}\"], button, a`);\r\n    const currentIndex = Array.from(items).indexOf(target);\r\n    \r\n    let nextIndex = currentIndex;\r\n    \r\n    switch (event.key) {\r\n      case 'ArrowDown':\r\n      case 'ArrowRight':\r\n        nextIndex = (currentIndex + 1) % items.length;\r\n        break;\r\n      case 'ArrowUp':\r\n      case 'ArrowLeft':\r\n        nextIndex = currentIndex === 0 ? items.length - 1 : currentIndex - 1;\r\n        break;\r\n    }\r\n    \r\n    if (nextIndex !== currentIndex) {\r\n      event.preventDefault();\r\n      items[nextIndex].focus();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create skip links\r\n   */\r\n  _createSkipLinks() {\r\n    const config = this.accessify.configManager.get('navigation.skipLinks');\r\n    \r\n    if (!config.enabled) {\r\n      return;\r\n    }\r\n\r\n    const skipLinksContainer = document.createElement('div');\r\n    skipLinksContainer.className = 'accessify-skip-links';\r\n    skipLinksContainer.setAttribute('aria-label', 'Skip navigation links');\r\n    \r\n    // Create skip to content link\r\n    const skipToContent = document.createElement('a');\r\n    skipToContent.href = '#main-content';\r\n    skipToContent.textContent = 'Skip to main content';\r\n    skipToContent.className = 'accessify-skip-link';\r\n    skipToContent.addEventListener('click', this._handleSkipLink.bind(this));\r\n    \r\n    // Create skip to navigation link\r\n    const skipToNav = document.createElement('a');\r\n    skipToNav.href = '#main-navigation';\r\n    skipToNav.textContent = 'Skip to navigation';\r\n    skipToNav.className = 'accessify-skip-link';\r\n    skipToNav.addEventListener('click', this._handleSkipLink.bind(this));\r\n    \r\n    skipLinksContainer.appendChild(skipToContent);\r\n    skipLinksContainer.appendChild(skipToNav);\r\n    \r\n    // Add to page\r\n    document.body.insertBefore(skipLinksContainer, document.body.firstChild);\r\n    \r\n    // Store references\r\n    this.skipLinks.push(skipToContent, skipToNav);\r\n    \r\n    // Add CSS for skip links\r\n    this._addSkipLinksCSS();\r\n  }\r\n\r\n  /**\r\n   * Handle skip link clicks\r\n   */\r\n  _handleSkipLink(event) {\r\n    event.preventDefault();\r\n    \r\n    const targetId = event.target.getAttribute('href').substring(1);\r\n    const targetElement = document.getElementById(targetId);\r\n    \r\n    if (targetElement) {\r\n      targetElement.focus();\r\n      targetElement.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add CSS for skip links\r\n   */\r\n  _addSkipLinksCSS() {\r\n    const style = document.createElement('style');\r\n    style.textContent = `\r\n      .accessify-skip-links {\r\n        position: absolute;\r\n        top: -100px;\r\n        left: 0;\r\n        z-index: 10000;\r\n      }\r\n      \r\n      .accessify-skip-link {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        background: #000;\r\n        color: #fff;\r\n        padding: 8px 16px;\r\n        text-decoration: none;\r\n        border-radius: 0 0 4px 0;\r\n        font-weight: bold;\r\n        transition: top 0.3s ease;\r\n      }\r\n      \r\n      .accessify-skip-link:focus {\r\n        top: 0;\r\n        outline: 2px solid #fff;\r\n        outline-offset: 2px;\r\n      }\r\n    `;\r\n    document.head.appendChild(style);\r\n  }\r\n\r\n  /**\r\n   * Remove skip links\r\n   */\r\n  _removeSkipLinks() {\r\n    this.skipLinks.forEach(link => {\r\n      if (link.parentNode) {\r\n        link.parentNode.removeChild(link);\r\n      }\r\n    });\r\n    this.skipLinks = [];\r\n  }\r\n\r\n  /**\r\n   * Set up focus management\r\n   */\r\n  _setupFocusManagement() {\r\n    const config = this.accessify.configManager.get('navigation.focus');\r\n    \r\n    if (!config.enabled) {\r\n      return;\r\n    }\r\n\r\n    // Set up focus trap for modals\r\n    this._setupFocusTrap();\r\n    \r\n    // Set up focus restoration\r\n    this._setupFocusRestoration();\r\n  }\r\n\r\n  /**\r\n   * Set up focus trap\r\n   */\r\n  _setupFocusTrap() {\r\n    // This will be implemented when modals are detected\r\n  }\r\n\r\n  /**\r\n   * Handle focus trap\r\n   */\r\n  _handleFocusTrap(event) {\r\n    if (!this.focusTrap) {\r\n      return;\r\n    }\r\n\r\n    const trapElements = this.focusTrap.querySelectorAll(\r\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\r\n    );\r\n    \r\n    if (trapElements.length === 0) {\r\n      return;\r\n    }\r\n\r\n    const firstElement = trapElements[0];\r\n    const lastElement = trapElements[trapElements.length - 1];\r\n\r\n    if (event.shiftKey) {\r\n      if (document.activeElement === firstElement) {\r\n        event.preventDefault();\r\n        lastElement.focus();\r\n      }\r\n    } else {\r\n      if (document.activeElement === lastElement) {\r\n        event.preventDefault();\r\n        firstElement.focus();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set focus trap\r\n   */\r\n  setFocusTrap(element) {\r\n    this.focusTrap = element;\r\n    this.accessify.emit('focusTrapSet', element);\r\n  }\r\n\r\n  /**\r\n   * Clear focus trap\r\n   */\r\n  _clearFocusTrap() {\r\n    this.focusTrap = null;\r\n    this.accessify.emit('focusTrapCleared');\r\n  }\r\n\r\n  /**\r\n   * Set up focus restoration\r\n   */\r\n  _setupFocusRestoration() {\r\n    // Store focus when page loads\r\n    window.addEventListener('beforeunload', () => {\r\n      if (document.activeElement) {\r\n        sessionStorage.setItem('accessify-last-focus', document.activeElement.id || '');\r\n      }\r\n    });\r\n    \r\n    // Restore focus when page loads\r\n    window.addEventListener('load', () => {\r\n      const lastFocusId = sessionStorage.getItem('accessify-last-focus');\r\n      if (lastFocusId) {\r\n        const element = document.getElementById(lastFocusId);\r\n        if (element) {\r\n          element.focus();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Set up keyboard shortcuts\r\n   */\r\n  _setupKeyboardShortcuts() {\r\n    const config = this.accessify.configManager.get('navigation.keyboard.shortcuts');\r\n    \r\n    if (!config.enabled) {\r\n      return;\r\n    }\r\n\r\n    // Register default shortcuts\r\n    this.registerShortcut(config.skipToContent, () => {\r\n      this._skipToContent();\r\n    });\r\n    \r\n    this.registerShortcut(config.toggleMenu, () => {\r\n      this._toggleMenu();\r\n    });\r\n    \r\n    this.registerShortcut(config.increaseTextSize, () => {\r\n      this.accessify.visual.increaseTextSize();\r\n    });\r\n    \r\n    this.registerShortcut(config.decreaseTextSize, () => {\r\n      this.accessify.visual.decreaseTextSize();\r\n    });\r\n    \r\n    this.registerShortcut(config.toggleContrast, () => {\r\n      this.accessify.visual.toggleContrastMode();\r\n    });\r\n    \r\n    this.registerShortcut(config.toggleHighContrast, () => {\r\n      this.accessify.visual.setContrastMode('high');\r\n    });\r\n\r\n    // Enhanced keyboard shortcuts\r\n    this.registerShortcut('Alt+r', () => {\r\n      if (this.accessify.readingGuide) {\r\n        this.accessify.readingGuide.toggleReadingRuler();\r\n      }\r\n    });\r\n    \r\n    this.registerShortcut('Alt+h', () => {\r\n      if (this.accessify.readingGuide) {\r\n        this.accessify.readingGuide.toggleTextHighlighting();\r\n      }\r\n    });\r\n    \r\n    this.registerShortcut('Alt+a', () => {\r\n      if (this.accessify.visual) {\r\n        this.accessify.visual.toggleAnimations();\r\n      }\r\n    });\r\n    \r\n    this.registerShortcut('Alt+l', () => {\r\n      this._toggleLinkUnderlining();\r\n    });\r\n    \r\n    this.registerShortcut('Alt+f', () => {\r\n      this._cycleFocusStyles();\r\n    });\r\n    \r\n    this.registerShortcut('Alt+c', () => {\r\n      this._cycleCursorStyles();\r\n    });\r\n    \r\n    this.registerShortcut('Alt+s', () => {\r\n      this._toggleScreenReaderAnnouncements();\r\n    });\r\n    \r\n    this.registerShortcut('Alt+t', () => {\r\n      this._toggleTabOrder();\r\n    });\r\n    \r\n    this.registerShortcut('Alt+g', () => {\r\n      this._toggleGridOverlay();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Register keyboard shortcut\r\n   */\r\n  registerShortcut(shortcut, callback) {\r\n    this.keyboardShortcuts.set(shortcut, callback);\r\n  }\r\n\r\n  /**\r\n   * Unregister keyboard shortcut\r\n   */\r\n  unregisterShortcut(shortcut) {\r\n    this.keyboardShortcuts.delete(shortcut);\r\n  }\r\n\r\n  /**\r\n   * Get shortcut key from event\r\n   */\r\n  _getShortcutKey(event) {\r\n    const parts = [];\r\n    \r\n    if (event.ctrlKey) parts.push('Ctrl');\r\n    if (event.altKey) parts.push('Alt');\r\n    if (event.shiftKey) parts.push('Shift');\r\n    if (event.metaKey) parts.push('Meta');\r\n    \r\n    parts.push(event.key);\r\n    \r\n    return parts.join('+');\r\n  }\r\n\r\n  /**\r\n   * Set up tab order optimization\r\n   */\r\n  _setupTabOrder() {\r\n    const config = this.accessify.configManager.get('navigation.focus');\r\n    \r\n    if (config.order === 'logical') {\r\n      this._optimizeTabOrder();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Optimize tab order\r\n   */\r\n  _optimizeTabOrder(event) {\r\n    // This is a simplified implementation\r\n    // In a real implementation, you'd analyze the DOM structure\r\n    // and ensure logical tab order\r\n  }\r\n\r\n  /**\r\n   * Skip to content\r\n   */\r\n  _skipToContent() {\r\n    const mainContent = document.querySelector('main, #main-content, [role=\"main\"]');\r\n    if (mainContent) {\r\n      mainContent.focus();\r\n      mainContent.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle menu\r\n   */\r\n  _toggleMenu() {\r\n    const menu = document.querySelector('[role=\"menu\"], .menu, #menu');\r\n    if (menu) {\r\n      const isOpen = menu.getAttribute('aria-expanded') === 'true';\r\n      menu.setAttribute('aria-expanded', !isOpen);\r\n      \r\n      if (!isOpen) {\r\n        const firstMenuItem = menu.querySelector('button, a, [tabindex=\"0\"]');\r\n        if (firstMenuItem) {\r\n          firstMenuItem.focus();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Close open elements\r\n   */\r\n  _closeOpenElements() {\r\n    // Close any open modals, menus, or dropdowns\r\n    const openElements = document.querySelectorAll('[aria-expanded=\"true\"]');\r\n    openElements.forEach(element => {\r\n      element.setAttribute('aria-expanded', 'false');\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Return focus to previous element\r\n   */\r\n  _returnFocus() {\r\n    if (this.focusHistory.length > 0) {\r\n      const previousElement = this.focusHistory.pop();\r\n      if (previousElement && previousElement.focus) {\r\n        previousElement.focus();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove event listeners\r\n   */\r\n  _removeEventListeners() {\r\n    document.removeEventListener('keydown', this._handleKeydown);\r\n    document.removeEventListener('keyup', this._handleKeyup);\r\n    document.removeEventListener('focusin', this._handleFocusIn);\r\n    document.removeEventListener('focusout', this._handleFocusOut);\r\n  }\r\n\r\n  /**\r\n   * Get compliance status\r\n   */\r\n  getComplianceStatus() {\r\n    const config = this.accessify.configManager.get('navigation');\r\n    const enabledFeatures = [];\r\n    \r\n    if (config.keyboard.enabled) enabledFeatures.push('keyboardNavigation');\r\n    if (config.focus.enabled) enabledFeatures.push('focusManagement');\r\n    if (config.skipLinks.enabled) enabledFeatures.push('skipLinks');\r\n    \r\n    return {\r\n      wcag: {\r\n        level: 'AA',\r\n        compliant: enabledFeatures.length >= 2,\r\n        score: Math.round((enabledFeatures.length / 3) * 100)\r\n      },\r\n      israeliStandard: {\r\n        compliant: enabledFeatures.includes('keyboardNavigation'),\r\n        score: Math.round((enabledFeatures.length / 3) * 100)\r\n      },\r\n      features: enabledFeatures\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get current navigation settings\r\n   */\r\n  getCurrentSettings() {\r\n    return {\r\n      keyboard: this.accessify.configManager.get('navigation.keyboard'),\r\n      focus: this.accessify.configManager.get('navigation.focus'),\r\n      skipLinks: this.accessify.configManager.get('navigation.skipLinks')\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Toggle link underlining\r\n   */\r\n  _toggleLinkUnderlining() {\r\n    if (this.accessify.visual) {\r\n      const currentStyle = this.accessify.configManager.get('visual.linkUnderlining.style');\r\n      const styles = ['none', 'always', 'hover', 'enhanced', 'double'];\r\n      const currentIndex = styles.indexOf(currentStyle);\r\n      const nextIndex = (currentIndex + 1) % styles.length;\r\n      this.accessify.visual.setLinkUnderlining(styles[nextIndex]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Cycle through focus styles\r\n   */\r\n  _cycleFocusStyles() {\r\n    if (this.accessify.visual) {\r\n      const currentStyle = this.accessify.configManager.get('visual.focusIndicators.style');\r\n      const styles = ['standard', 'highlight', 'glow', 'thick', 'dotted'];\r\n      const currentIndex = styles.indexOf(currentStyle);\r\n      const nextIndex = (currentIndex + 1) % styles.length;\r\n      this.accessify.visual.setFocusIndicator(styles[nextIndex]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Cycle through cursor styles\r\n   */\r\n  _cycleCursorStyles() {\r\n    if (this.accessify.visual) {\r\n      const currentStyle = this.accessify.configManager.get('visual.cursors.current');\r\n      const styles = ['default', 'large', 'extra-large', 'high-contrast', 'crosshair', 'pointer-large', 'text-large'];\r\n      const currentIndex = styles.indexOf(currentStyle);\r\n      const nextIndex = (currentIndex + 1) % styles.length;\r\n      this.accessify.visual.setCursor(styles[nextIndex]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle screen reader announcements\r\n   */\r\n  _toggleScreenReaderAnnouncements() {\r\n    if (this.accessify.screenReader) {\r\n      const isEnabled = this.accessify.configManager.get('screenReader.announcements.enabled');\r\n      this.accessify.configManager.set('screenReader.announcements.enabled', !isEnabled);\r\n      this.accessify.screenReader.announce(`Screen reader announcements ${!isEnabled ? 'enabled' : 'disabled'}`, 'polite', 'normal');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle tab order visualization\r\n   */\r\n  _toggleTabOrder() {\r\n    const isEnabled = this.accessify.configManager.get('navigation.focus.visualizeTabOrder');\r\n    this.accessify.configManager.set('navigation.focus.visualizeTabOrder', !isEnabled);\r\n    \r\n    if (!isEnabled) {\r\n      this._showTabOrder();\r\n    } else {\r\n      this._hideTabOrder();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show tab order visualization\r\n   */\r\n  _showTabOrder() {\r\n    const focusableElements = document.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])');\r\n    \r\n    focusableElements.forEach((element, index) => {\r\n      if (!element.querySelector('.accessify-tab-order-indicator')) {\r\n        const indicator = document.createElement('div');\r\n        indicator.className = 'accessify-tab-order-indicator';\r\n        indicator.textContent = index + 1;\r\n        indicator.style.cssText = `\r\n          position: absolute;\r\n          top: -5px;\r\n          left: -5px;\r\n          background: #ff0000;\r\n          color: white;\r\n          border-radius: 50%;\r\n          width: 20px;\r\n          height: 20px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          font-size: 12px;\r\n          font-weight: bold;\r\n          z-index: 10000;\r\n          pointer-events: none;\r\n        `;\r\n        \r\n        element.style.position = 'relative';\r\n        element.appendChild(indicator);\r\n      }\r\n    });\r\n    \r\n    this.accessify.emit('tabOrderShown');\r\n  }\r\n\r\n  /**\r\n   * Hide tab order visualization\r\n   */\r\n  _hideTabOrder() {\r\n    const indicators = document.querySelectorAll('.accessify-tab-order-indicator');\r\n    indicators.forEach(indicator => {\r\n      indicator.remove();\r\n    });\r\n    \r\n    this.accessify.emit('tabOrderHidden');\r\n  }\r\n\r\n  /**\r\n   * Toggle grid overlay\r\n   */\r\n  _toggleGridOverlay() {\r\n    const isEnabled = this.accessify.configManager.get('navigation.gridOverlay.enabled');\r\n    this.accessify.configManager.set('navigation.gridOverlay.enabled', !isEnabled);\r\n    \r\n    if (!isEnabled) {\r\n      this._showGridOverlay();\r\n    } else {\r\n      this._hideGridOverlay();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show grid overlay\r\n   */\r\n  _showGridOverlay() {\r\n    if (!document.getElementById('accessify-grid-overlay')) {\r\n      const gridOverlay = document.createElement('div');\r\n      gridOverlay.id = 'accessify-grid-overlay';\r\n      gridOverlay.style.cssText = `\r\n        position: fixed;\r\n        top: 0;\r\n        left: 0;\r\n        width: 100%;\r\n        height: 100%;\r\n        pointer-events: none;\r\n        z-index: 9999;\r\n        background-image: \r\n          linear-gradient(rgba(255, 0, 0, 0.1) 1px, transparent 1px),\r\n          linear-gradient(90deg, rgba(255, 0, 0, 0.1) 1px, transparent 1px);\r\n        background-size: 20px 20px;\r\n        opacity: 0.5;\r\n      `;\r\n      \r\n      document.body.appendChild(gridOverlay);\r\n    }\r\n    \r\n    this.accessify.emit('gridOverlayShown');\r\n  }\r\n\r\n  /**\r\n   * Hide grid overlay\r\n   */\r\n  _hideGridOverlay() {\r\n    const gridOverlay = document.getElementById('accessify-grid-overlay');\r\n    if (gridOverlay) {\r\n      gridOverlay.remove();\r\n    }\r\n    \r\n    this.accessify.emit('gridOverlayHidden');\r\n  }\r\n}\r\n","/**\r\n * Reading Accessibility Component\r\n * Handles text-to-speech, fonts, spacing, and reading guides\r\n */\r\n\r\nexport class ReadingAccessibility {\r\n  constructor(accessify) {\r\n    this.accessify = accessify;\r\n    this.isInitialized = false;\r\n    this.speechSynthesis = null;\r\n    this.currentUtterance = null;\r\n    this.readingGuide = null;\r\n    this.textHighlighter = null;\r\n    this.fontLoader = null;\r\n  }\r\n\r\n  /**\r\n   * Initialize reading accessibility features\r\n   */\r\n  async init() {\r\n    try {\r\n      if (this.isInitialized) {\r\n        return;\r\n      }\r\n\r\n      // Initialize speech synthesis\r\n      this._initializeSpeechSynthesis();\r\n      \r\n      // Set up font loading\r\n      this._setupFontLoading();\r\n      \r\n      // Set up text spacing\r\n      this._setupTextSpacing();\r\n      \r\n      // Set up reading guides\r\n      this._setupReadingGuides();\r\n      \r\n      // Set up text highlighting\r\n      this._setupTextHighlighting();\r\n\r\n      this.isInitialized = true;\r\n      this.accessify.emit('readingAccessibilityInitialized');\r\n\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Reading accessibility initialization', 'component');\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy reading accessibility features\r\n   */\r\n  destroy() {\r\n    try {\r\n      if (!this.isInitialized) {\r\n        return;\r\n      }\r\n\r\n      // Stop speech synthesis\r\n      this._stopSpeech();\r\n      \r\n      // Remove reading guides\r\n      this._removeReadingGuides();\r\n      \r\n      // Remove text highlighting\r\n      this._removeTextHighlighting();\r\n      \r\n      // Remove custom fonts\r\n      this._removeCustomFonts();\r\n\r\n      this.isInitialized = false;\r\n      this.accessify.emit('readingAccessibilityDestroyed');\r\n\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Reading accessibility destruction', 'component');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialize speech synthesis\r\n   */\r\n  _initializeSpeechSynthesis() {\r\n    if (!('speechSynthesis' in window)) {\r\n      console.warn('Speech synthesis not supported in this browser');\r\n      return;\r\n    }\r\n\r\n    this.speechSynthesis = window.speechSynthesis;\r\n    \r\n    // Set up speech synthesis event listeners\r\n    this.speechSynthesis.addEventListener('voiceschanged', () => {\r\n      this.accessify.emit('voicesChanged', this.getAvailableVoices());\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Speak text\r\n   */\r\n  speak(text, options = {}) {\r\n    if (!this.speechSynthesis) {\r\n      throw new Error('Speech synthesis not available');\r\n    }\r\n\r\n    // Stop current speech\r\n    this._stopSpeech();\r\n\r\n    // Create utterance\r\n    const utterance = new SpeechSynthesisUtterance(text);\r\n    \r\n    // Set options\r\n    const config = this.accessify.configManager.get('reading.textToSpeech');\r\n    utterance.rate = options.rate || config.rate;\r\n    utterance.pitch = options.pitch || config.pitch;\r\n    utterance.volume = options.volume || config.volume;\r\n    \r\n    // Set voice\r\n    if (options.voice || config.voice !== 'auto') {\r\n      const voice = this._getVoice(options.voice || config.voice);\r\n      if (voice) {\r\n        utterance.voice = voice;\r\n      }\r\n    }\r\n\r\n    // Set up event listeners\r\n    utterance.onstart = () => {\r\n      this.accessify.emit('speechStarted', utterance);\r\n    };\r\n    \r\n    utterance.onend = () => {\r\n      this.accessify.emit('speechEnded', utterance);\r\n      this.currentUtterance = null;\r\n    };\r\n    \r\n    utterance.onerror = (event) => {\r\n      this.accessify.emit('speechError', event);\r\n      this.currentUtterance = null;\r\n    };\r\n\r\n    // Speak\r\n    this.currentUtterance = utterance;\r\n    this.speechSynthesis.speak(utterance);\r\n  }\r\n\r\n  /**\r\n   * Stop speech\r\n   */\r\n  _stopSpeech() {\r\n    if (this.speechSynthesis && this.speechSynthesis.speaking) {\r\n      this.speechSynthesis.cancel();\r\n    }\r\n    this.currentUtterance = null;\r\n  }\r\n\r\n  /**\r\n   * Pause speech\r\n   */\r\n  pauseSpeech() {\r\n    if (this.speechSynthesis && this.speechSynthesis.speaking) {\r\n      this.speechSynthesis.pause();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Resume speech\r\n   */\r\n  resumeSpeech() {\r\n    if (this.speechSynthesis && this.speechSynthesis.paused) {\r\n      this.speechSynthesis.resume();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get available voices\r\n   */\r\n  getAvailableVoices() {\r\n    if (!this.speechSynthesis) {\r\n      return [];\r\n    }\r\n\r\n    return this.speechSynthesis.getVoices().map(voice => ({\r\n      name: voice.name,\r\n      lang: voice.lang,\r\n      default: voice.default,\r\n      localService: voice.localService\r\n    }));\r\n  }\r\n\r\n  /**\r\n   * Get voice by name or language\r\n   */\r\n  _getVoice(voiceName) {\r\n    if (!this.speechSynthesis) {\r\n      return null;\r\n    }\r\n\r\n    const voices = this.speechSynthesis.getVoices();\r\n    \r\n    // Try to find by name\r\n    let voice = voices.find(v => v.name === voiceName);\r\n    \r\n    // Try to find by language\r\n    if (!voice) {\r\n      voice = voices.find(v => v.lang.startsWith(voiceName));\r\n    }\r\n    \r\n    // Try to find default voice\r\n    if (!voice) {\r\n      voice = voices.find(v => v.default);\r\n    }\r\n    \r\n    return voice;\r\n  }\r\n\r\n  /**\r\n   * Set up font loading\r\n   */\r\n  _setupFontLoading() {\r\n    const config = this.accessify.configManager.get('reading.fonts');\r\n    \r\n    if (!config.enabled) {\r\n      return;\r\n    }\r\n\r\n    // Load dyslexia-friendly fonts\r\n    if (config.dyslexia) {\r\n      this._loadDyslexiaFonts();\r\n    }\r\n    \r\n    // Apply current font\r\n    this._applyFont(config.current);\r\n  }\r\n\r\n  /**\r\n   * Load dyslexia-friendly fonts\r\n   */\r\n  _loadDyslexiaFonts() {\r\n    const fonts = [\r\n      {\r\n        name: 'OpenDyslexic',\r\n        url: 'https://fonts.googleapis.com/css2?family=OpenDyslexic:wght@400;700&display=swap'\r\n      },\r\n      {\r\n        name: 'Lexend',\r\n        url: 'https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&display=swap'\r\n      },\r\n      {\r\n        name: 'Atkinson Hyperlegible',\r\n        url: 'https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:wght@400;700&display=swap'\r\n      }\r\n    ];\r\n\r\n    fonts.forEach(font => {\r\n      const link = document.createElement('link');\r\n      link.rel = 'stylesheet';\r\n      link.href = font.url;\r\n      link.onload = () => {\r\n        this.accessify.emit('fontLoaded', font.name);\r\n      };\r\n      document.head.appendChild(link);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Apply font\r\n   */\r\n  _applyFont(fontName) {\r\n    const config = this.accessify.configManager.get('reading.fonts');\r\n    \r\n    if (!config.enabled) {\r\n      return;\r\n    }\r\n\r\n    let fontFamily = '';\r\n    \r\n    switch (fontName) {\r\n      case 'opendyslexic':\r\n        fontFamily = 'OpenDyslexic, sans-serif';\r\n        break;\r\n      case 'lexend':\r\n        fontFamily = 'Lexend, sans-serif';\r\n        break;\r\n      case 'atkinson':\r\n        fontFamily = 'Atkinson Hyperlegible, sans-serif';\r\n        break;\r\n      case 'default':\r\n      default:\r\n        fontFamily = 'inherit';\r\n        break;\r\n    }\r\n\r\n    const css = `\r\n      * {\r\n        font-family: ${fontFamily} !important;\r\n      }\r\n    `;\r\n    \r\n    this._addStyle('dyslexia-font', css);\r\n  }\r\n\r\n  /**\r\n   * Set font\r\n   */\r\n  setFont(fontName) {\r\n    const availableFonts = this.accessify.configManager.get('reading.fonts.available');\r\n    \r\n    if (!availableFonts.includes(fontName)) {\r\n      throw new Error(`Invalid font: ${fontName}`);\r\n    }\r\n\r\n    this.accessify.configManager.set('reading.fonts.current', fontName);\r\n    this._applyFont(fontName);\r\n    \r\n    this.accessify.emit('fontChanged', fontName);\r\n  }\r\n\r\n  /**\r\n   * Set up text spacing\r\n   */\r\n  _setupTextSpacing() {\r\n    const config = this.accessify.configManager.get('reading.spacing');\r\n    \r\n    if (!config.enabled) {\r\n      return;\r\n    }\r\n\r\n    this._applyTextSpacing(config);\r\n  }\r\n\r\n  /**\r\n   * Apply text spacing\r\n   */\r\n  _applyTextSpacing(config) {\r\n    const css = `\r\n      * {\r\n        line-height: ${config.lineHeight} !important;\r\n        letter-spacing: ${config.letterSpacing} !important;\r\n        word-spacing: ${config.wordSpacing} !important;\r\n      }\r\n    `;\r\n    \r\n    this._addStyle('text-spacing', css);\r\n  }\r\n\r\n  /**\r\n   * Set line height\r\n   */\r\n  setLineHeight(height) {\r\n    const config = this.accessify.configManager.get('reading.spacing');\r\n    this.accessify.configManager.set('reading.spacing.lineHeight', height);\r\n    this._applyTextSpacing({ ...config, lineHeight: height });\r\n    \r\n    this.accessify.emit('lineHeightChanged', height);\r\n  }\r\n\r\n  /**\r\n   * Set letter spacing\r\n   */\r\n  setLetterSpacing(spacing) {\r\n    const config = this.accessify.configManager.get('reading.spacing');\r\n    this.accessify.configManager.set('reading.spacing.letterSpacing', spacing);\r\n    this._applyTextSpacing({ ...config, letterSpacing: spacing });\r\n    \r\n    this.accessify.emit('letterSpacingChanged', spacing);\r\n  }\r\n\r\n  /**\r\n   * Set word spacing\r\n   */\r\n  setWordSpacing(spacing) {\r\n    const config = this.accessify.configManager.get('reading.spacing');\r\n    this.accessify.configManager.set('reading.spacing.wordSpacing', spacing);\r\n    this._applyTextSpacing({ ...config, wordSpacing: spacing });\r\n    \r\n    this.accessify.emit('wordSpacingChanged', spacing);\r\n  }\r\n\r\n  /**\r\n   * Set up reading guides\r\n   */\r\n  _setupReadingGuides() {\r\n    const config = this.accessify.configManager.get('reading.guides');\r\n    \r\n    if (!config.enabled) {\r\n      return;\r\n    }\r\n\r\n    if (config.readingRuler) {\r\n      this._createReadingRuler();\r\n    }\r\n    \r\n    if (config.textHighlighting) {\r\n      this._setupTextHighlighting();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create reading ruler\r\n   */\r\n  _createReadingRuler() {\r\n    this.readingGuide = document.createElement('div');\r\n    this.readingGuide.className = 'accessify-reading-ruler';\r\n    this.readingGuide.setAttribute('aria-hidden', 'true');\r\n    \r\n    // Add CSS for reading ruler\r\n    this._addReadingRulerCSS();\r\n    \r\n    // Add to page\r\n    document.body.appendChild(this.readingGuide);\r\n    \r\n    // Set up mouse tracking\r\n    document.addEventListener('mousemove', this._handleReadingRulerMouseMove.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Handle reading ruler mouse move\r\n   */\r\n  _handleReadingRulerMouseMove(event) {\r\n    if (!this.readingGuide) {\r\n      return;\r\n    }\r\n\r\n    this.readingGuide.style.top = `${event.clientY - 10}px`;\r\n    this.readingGuide.style.left = '0';\r\n    this.readingGuide.style.width = '100%';\r\n  }\r\n\r\n  /**\r\n   * Add CSS for reading ruler\r\n   */\r\n  _addReadingRulerCSS() {\r\n    const style = document.createElement('style');\r\n    style.textContent = `\r\n      .accessify-reading-ruler {\r\n        position: fixed;\r\n        height: 2px;\r\n        background: #ff0000;\r\n        opacity: 0.7;\r\n        pointer-events: none;\r\n        z-index: 10000;\r\n        transition: top 0.1s ease;\r\n      }\r\n    `;\r\n    document.head.appendChild(style);\r\n  }\r\n\r\n  /**\r\n   * Set up text highlighting\r\n   */\r\n  _setupTextHighlighting() {\r\n    this.textHighlighter = document.createElement('div');\r\n    this.textHighlighter.className = 'accessify-text-highlighter';\r\n    this.textHighlighter.setAttribute('aria-hidden', 'true');\r\n    \r\n    // Add CSS for text highlighter\r\n    this._addTextHighlighterCSS();\r\n    \r\n    // Add to page\r\n    document.body.appendChild(this.textHighlighter);\r\n    \r\n    // Set up text selection\r\n    document.addEventListener('mouseup', this._handleTextSelection.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Handle text selection\r\n   */\r\n  _handleTextSelection(event) {\r\n    if (!this.textHighlighter) {\r\n      return;\r\n    }\r\n\r\n    const selection = window.getSelection();\r\n    if (selection.toString().trim()) {\r\n      const range = selection.getRangeAt(0);\r\n      const rect = range.getBoundingClientRect();\r\n      \r\n      this.textHighlighter.style.top = `${rect.top}px`;\r\n      this.textHighlighter.style.left = `${rect.left}px`;\r\n      this.textHighlighter.style.width = `${rect.width}px`;\r\n      this.textHighlighter.style.height = `${rect.height}px`;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add CSS for text highlighter\r\n   */\r\n  _addTextHighlighterCSS() {\r\n    const style = document.createElement('style');\r\n    style.textContent = `\r\n      .accessify-text-highlighter {\r\n        position: fixed;\r\n        background: rgba(255, 255, 0, 0.3);\r\n        pointer-events: none;\r\n        z-index: 9999;\r\n        transition: all 0.1s ease;\r\n      }\r\n    `;\r\n    document.head.appendChild(style);\r\n  }\r\n\r\n  /**\r\n   * Remove reading guides\r\n   */\r\n  _removeReadingGuides() {\r\n    if (this.readingGuide && this.readingGuide.parentNode) {\r\n      this.readingGuide.parentNode.removeChild(this.readingGuide);\r\n      this.readingGuide = null;\r\n    }\r\n    \r\n    if (this.textHighlighter && this.textHighlighter.parentNode) {\r\n      this.textHighlighter.parentNode.removeChild(this.textHighlighter);\r\n      this.textHighlighter = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove text highlighting\r\n   */\r\n  _removeTextHighlighting() {\r\n    // Remove text selection\r\n    window.getSelection().removeAllRanges();\r\n  }\r\n\r\n  /**\r\n   * Remove custom fonts\r\n   */\r\n  _removeCustomFonts() {\r\n    // Remove font styles\r\n    this._removeStyle('dyslexia-font');\r\n  }\r\n\r\n  /**\r\n   * Add style to the style element\r\n   */\r\n  _addStyle(name, css) {\r\n    if (!this.styleElement) {\r\n      this.styleElement = document.createElement('style');\r\n      this.styleElement.id = 'accessify-reading-styles';\r\n      document.head.appendChild(this.styleElement);\r\n    }\r\n    \r\n    this.currentStyles = this.currentStyles || new Map();\r\n    this.currentStyles.set(name, css);\r\n    this._updateStyleElement();\r\n  }\r\n\r\n  /**\r\n   * Remove style from the style element\r\n   */\r\n  _removeStyle(name) {\r\n    if (this.currentStyles) {\r\n      this.currentStyles.delete(name);\r\n      this._updateStyleElement();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update the style element with all current styles\r\n   */\r\n  _updateStyleElement() {\r\n    if (!this.styleElement || !this.currentStyles) {\r\n      return;\r\n    }\r\n\r\n    const allStyles = Array.from(this.currentStyles.values()).join('\\n');\r\n    this.styleElement.textContent = allStyles;\r\n  }\r\n\r\n  /**\r\n   * Get compliance status\r\n   */\r\n  getComplianceStatus() {\r\n    const config = this.accessify.configManager.get('reading');\r\n    const enabledFeatures = [];\r\n    \r\n    if (config.textToSpeech.enabled) enabledFeatures.push('textToSpeech');\r\n    if (config.fonts.enabled) enabledFeatures.push('dyslexiaFonts');\r\n    if (config.spacing.enabled) enabledFeatures.push('textSpacing');\r\n    if (config.guides.enabled) enabledFeatures.push('readingGuides');\r\n    \r\n    return {\r\n      wcag: {\r\n        level: 'AA',\r\n        compliant: enabledFeatures.length >= 2,\r\n        score: Math.round((enabledFeatures.length / 4) * 100)\r\n      },\r\n      israeliStandard: {\r\n        compliant: enabledFeatures.includes('textToSpeech') || \r\n                   enabledFeatures.includes('dyslexiaFonts'),\r\n        score: Math.round((enabledFeatures.length / 4) * 100)\r\n      },\r\n      features: enabledFeatures\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get current reading settings\r\n   */\r\n  getCurrentSettings() {\r\n    return {\r\n      textToSpeech: this.accessify.configManager.get('reading.textToSpeech'),\r\n      fonts: this.accessify.configManager.get('reading.fonts'),\r\n      spacing: this.accessify.configManager.get('reading.spacing'),\r\n      guides: this.accessify.configManager.get('reading.guides')\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Reset all reading settings to default\r\n   */\r\n  reset() {\r\n    this._stopSpeech();\r\n    this.setFont('default');\r\n    this.setLineHeight(1.5);\r\n    this.setLetterSpacing('normal');\r\n    this.setWordSpacing('normal');\r\n    \r\n    this.accessify.emit('readingSettingsReset');\r\n  }\r\n}\r\n","/**\r\n * Motor Accessibility Component\r\n * Handles large targets, gestures, voice commands, and motion control\r\n */\r\n\r\nexport class MotorAccessibility {\r\n  constructor(accessify) {\r\n    this.accessify = accessify;\r\n    this.isInitialized = false;\r\n    this.voiceRecognition = null;\r\n    this.gestureRecognizer = null;\r\n    this.motionSensor = null;\r\n    this.targetEnlarger = null;\r\n    this.interactionDelays = new Map();\r\n  }\r\n\r\n  /**\r\n   * Initialize motor accessibility features\r\n   */\r\n  async init() {\r\n    try {\r\n      if (this.isInitialized) {\r\n        return;\r\n      }\r\n\r\n      // Set up large targets\r\n      this._setupLargeTargets();\r\n      \r\n      // Set up gesture alternatives\r\n      this._setupGestureAlternatives();\r\n      \r\n      // Set up voice commands\r\n      this._setupVoiceCommands();\r\n      \r\n      // Set up motion control\r\n      this._setupMotionControl();\r\n      \r\n      // Set up interaction delays\r\n      this._setupInteractionDelays();\r\n\r\n      this.isInitialized = true;\r\n      this.accessify.emit('motorAccessibilityInitialized');\r\n\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Motor accessibility initialization', 'component');\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy motor accessibility features\r\n   */\r\n  destroy() {\r\n    try {\r\n      if (!this.isInitialized) {\r\n        return;\r\n      }\r\n\r\n      // Stop voice recognition\r\n      this._stopVoiceRecognition();\r\n      \r\n      // Remove gesture recognition\r\n      this._removeGestureRecognition();\r\n      \r\n      // Remove motion sensor\r\n      this._removeMotionSensor();\r\n      \r\n      // Remove large targets\r\n      this._removeLargeTargets();\r\n\r\n      this.isInitialized = false;\r\n      this.accessify.emit('motorAccessibilityDestroyed');\r\n\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Motor accessibility destruction', 'component');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set up large targets\r\n   */\r\n  _setupLargeTargets() {\r\n    const config = this.accessify.configManager.get('motor.targets');\r\n    \r\n    if (!config.enabled) {\r\n      return;\r\n    }\r\n\r\n    // Create target enlarger\r\n    this.targetEnlarger = document.createElement('div');\r\n    this.targetEnlarger.className = 'accessify-target-enlarger';\r\n    this.targetEnlarger.setAttribute('aria-hidden', 'true');\r\n    \r\n    // Add CSS for target enlarger\r\n    this._addTargetEnlargerCSS(config);\r\n    \r\n    // Add to page\r\n    document.body.appendChild(this.targetEnlarger);\r\n    \r\n    // Set up hover tracking\r\n    document.addEventListener('mouseover', this._handleTargetHover.bind(this));\r\n    document.addEventListener('mouseout', this._handleTargetOut.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Handle target hover\r\n   */\r\n  _handleTargetHover(event) {\r\n    if (!this.targetEnlarger) {\r\n      return;\r\n    }\r\n\r\n    const target = event.target;\r\n    \r\n    // Check if target is interactive\r\n    if (this._isInteractiveElement(target)) {\r\n      const rect = target.getBoundingClientRect();\r\n      const minSize = this.accessify.configManager.get('motor.targets.minSize');\r\n      const padding = this.accessify.configManager.get('motor.targets.padding');\r\n      \r\n      // Calculate enlarged size\r\n      const enlargedWidth = Math.max(rect.width, minSize) + (padding * 2);\r\n      const enlargedHeight = Math.max(rect.height, minSize) + (padding * 2);\r\n      \r\n      // Position enlarger\r\n      this.targetEnlarger.style.top = `${rect.top - padding}px`;\r\n      this.targetEnlarger.style.left = `${rect.left - padding}px`;\r\n      this.targetEnlarger.style.width = `${enlargedWidth}px`;\r\n      this.targetEnlarger.style.height = `${enlargedHeight}px`;\r\n      this.targetEnlarger.style.display = 'block';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle target out\r\n   */\r\n  _handleTargetOut(event) {\r\n    if (!this.targetEnlarger) {\r\n      return;\r\n    }\r\n\r\n    this.targetEnlarger.style.display = 'none';\r\n  }\r\n\r\n  /**\r\n   * Check if element is interactive\r\n   */\r\n  _isInteractiveElement(element) {\r\n    const interactiveTags = ['button', 'a', 'input', 'select', 'textarea'];\r\n    const interactiveRoles = ['button', 'link', 'textbox', 'combobox', 'checkbox', 'radio'];\r\n    \r\n    return interactiveTags.includes(element.tagName.toLowerCase()) ||\r\n           interactiveRoles.includes(element.getAttribute('role')) ||\r\n           element.getAttribute('tabindex') === '0';\r\n  }\r\n\r\n  /**\r\n   * Add CSS for target enlarger\r\n   */\r\n  _addTargetEnlargerCSS(config) {\r\n    const style = document.createElement('style');\r\n    style.textContent = `\r\n      .accessify-target-enlarger {\r\n        position: fixed;\r\n        border: 2px solid #0066cc;\r\n        background: rgba(0, 102, 204, 0.1);\r\n        pointer-events: none;\r\n        z-index: 10000;\r\n        display: none;\r\n        transition: all 0.2s ease;\r\n        border-radius: 4px;\r\n      }\r\n      \r\n      .accessify-target-enlarger::before {\r\n        content: '';\r\n        position: absolute;\r\n        top: -2px;\r\n        left: -2px;\r\n        right: -2px;\r\n        bottom: -2px;\r\n        border: 1px solid rgba(0, 102, 204, 0.3);\r\n        border-radius: 6px;\r\n        pointer-events: none;\r\n      }\r\n    `;\r\n    document.head.appendChild(style);\r\n  }\r\n\r\n  /**\r\n   * Remove large targets\r\n   */\r\n  _removeLargeTargets() {\r\n    if (this.targetEnlarger && this.targetEnlarger.parentNode) {\r\n      this.targetEnlarger.parentNode.removeChild(this.targetEnlarger);\r\n      this.targetEnlarger = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set up gesture alternatives\r\n   */\r\n  _setupGestureAlternatives() {\r\n    const config = this.accessify.configManager.get('motor.gestures');\r\n    \r\n    if (!config.enabled) {\r\n      return;\r\n    }\r\n\r\n    // Set up touch events\r\n    this._setupTouchEvents();\r\n    \r\n    // Set up pointer events\r\n    this._setupPointerEvents();\r\n    \r\n    // Set up gesture recognition\r\n    this._setupGestureRecognition();\r\n  }\r\n\r\n  /**\r\n   * Set up touch events\r\n   */\r\n  _setupTouchEvents() {\r\n    document.addEventListener('touchstart', this._handleTouchStart.bind(this));\r\n    document.addEventListener('touchend', this._handleTouchEnd.bind(this));\r\n    document.addEventListener('touchmove', this._handleTouchMove.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Handle touch start\r\n   */\r\n  _handleTouchStart(event) {\r\n    // Store touch start position\r\n    this.touchStart = {\r\n      x: event.touches[0].clientX,\r\n      y: event.touches[0].clientY,\r\n      time: Date.now()\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Handle touch end\r\n   */\r\n  _handleTouchEnd(event) {\r\n    if (!this.touchStart) {\r\n      return;\r\n    }\r\n\r\n    const touchEnd = {\r\n      x: event.changedTouches[0].clientX,\r\n      y: event.changedTouches[0].clientY,\r\n      time: Date.now()\r\n    };\r\n\r\n    // Calculate gesture\r\n    const gesture = this._calculateGesture(this.touchStart, touchEnd);\r\n    \r\n    if (gesture) {\r\n      this._handleGesture(gesture);\r\n    }\r\n\r\n    this.touchStart = null;\r\n  }\r\n\r\n  /**\r\n   * Handle touch move\r\n   */\r\n  _handleTouchMove(event) {\r\n    // Handle touch move if needed\r\n  }\r\n\r\n  /**\r\n   * Set up pointer events\r\n   */\r\n  _setupPointerEvents() {\r\n    document.addEventListener('pointerdown', this._handlePointerDown.bind(this));\r\n    document.addEventListener('pointerup', this._handlePointerUp.bind(this));\r\n    document.addEventListener('pointermove', this._handlePointerMove.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Handle pointer down\r\n   */\r\n  _handlePointerDown(event) {\r\n    // Store pointer start position\r\n    this.pointerStart = {\r\n      x: event.clientX,\r\n      y: event.clientY,\r\n      time: Date.now()\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Handle pointer up\r\n   */\r\n  _handlePointerUp(event) {\r\n    if (!this.pointerStart) {\r\n      return;\r\n    }\r\n\r\n    const pointerEnd = {\r\n      x: event.clientX,\r\n      y: event.clientY,\r\n      time: Date.now()\r\n    };\r\n\r\n    // Calculate gesture\r\n    const gesture = this._calculateGesture(this.pointerStart, pointerEnd);\r\n    \r\n    if (gesture) {\r\n      this._handleGesture(gesture);\r\n    }\r\n\r\n    this.pointerStart = null;\r\n  }\r\n\r\n  /**\r\n   * Handle pointer move\r\n   */\r\n  _handlePointerMove(event) {\r\n    // Handle pointer move if needed\r\n  }\r\n\r\n  /**\r\n   * Set up gesture recognition\r\n   */\r\n  _setupGestureRecognition() {\r\n    // This is a simplified implementation\r\n    // In a real implementation, you'd use a gesture recognition library\r\n  }\r\n\r\n  /**\r\n   * Calculate gesture from start and end points\r\n   */\r\n  _calculateGesture(start, end) {\r\n    const deltaX = end.x - start.x;\r\n    const deltaY = end.y - start.y;\r\n    const deltaTime = end.time - start.time;\r\n    \r\n    // Check for swipe gestures\r\n    if (Math.abs(deltaX) > Math.abs(deltaY)) {\r\n      if (deltaX > 50 && deltaTime < 500) {\r\n        return { type: 'swipe', direction: 'right' };\r\n      } else if (deltaX < -50 && deltaTime < 500) {\r\n        return { type: 'swipe', direction: 'left' };\r\n      }\r\n    } else {\r\n      if (deltaY > 50 && deltaTime < 500) {\r\n        return { type: 'swipe', direction: 'down' };\r\n      } else if (deltaY < -50 && deltaTime < 500) {\r\n        return { type: 'swipe', direction: 'up' };\r\n      }\r\n    }\r\n    \r\n    // Check for tap gestures\r\n    if (Math.abs(deltaX) < 10 && Math.abs(deltaY) < 10 && deltaTime < 300) {\r\n      return { type: 'tap' };\r\n    }\r\n    \r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Handle gesture\r\n   */\r\n  _handleGesture(gesture) {\r\n    this.accessify.emit('gestureDetected', gesture);\r\n    \r\n    // Handle specific gestures\r\n    switch (gesture.type) {\r\n      case 'swipe':\r\n        this._handleSwipeGesture(gesture);\r\n        break;\r\n      case 'tap':\r\n        this._handleTapGesture(gesture);\r\n        break;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle swipe gesture\r\n   */\r\n  _handleSwipeGesture(gesture) {\r\n    // Handle swipe gestures\r\n    switch (gesture.direction) {\r\n      case 'left':\r\n        // Go back\r\n        if (window.history.length > 1) {\r\n          window.history.back();\r\n        }\r\n        break;\r\n      case 'right':\r\n        // Go forward\r\n        if (window.history.length > 1) {\r\n          window.history.forward();\r\n        }\r\n        break;\r\n      case 'up':\r\n        // Scroll up\r\n        window.scrollBy(0, -100);\r\n        break;\r\n      case 'down':\r\n        // Scroll down\r\n        window.scrollBy(0, 100);\r\n        break;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle tap gesture\r\n   */\r\n  _handleTapGesture(gesture) {\r\n    // Handle tap gestures\r\n  }\r\n\r\n  /**\r\n   * Remove gesture recognition\r\n   */\r\n  _removeGestureRecognition() {\r\n    // Remove event listeners\r\n    document.removeEventListener('touchstart', this._handleTouchStart);\r\n    document.removeEventListener('touchend', this._handleTouchEnd);\r\n    document.removeEventListener('touchmove', this._handleTouchMove);\r\n    document.removeEventListener('pointerdown', this._handlePointerDown);\r\n    document.removeEventListener('pointerup', this._handlePointerUp);\r\n    document.removeEventListener('pointermove', this._handlePointerMove);\r\n  }\r\n\r\n  /**\r\n   * Set up voice commands\r\n   */\r\n  _setupVoiceCommands() {\r\n    const config = this.accessify.configManager.get('motor.voice');\r\n    \r\n    if (!config.enabled) {\r\n      return;\r\n    }\r\n\r\n    // Check for speech recognition support\r\n    if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {\r\n      console.warn('Speech recognition not supported in this browser');\r\n      return;\r\n    }\r\n\r\n    // Initialize speech recognition\r\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n    this.voiceRecognition = new SpeechRecognition();\r\n    \r\n    // Configure speech recognition\r\n    this.voiceRecognition.continuous = true;\r\n    this.voiceRecognition.interimResults = false;\r\n    this.voiceRecognition.lang = this.accessify.configManager.get('language', 'en-US');\r\n    \r\n    // Set up event listeners\r\n    this.voiceRecognition.onstart = () => {\r\n      this.accessify.emit('voiceRecognitionStarted');\r\n    };\r\n    \r\n    this.voiceRecognition.onresult = (event) => {\r\n      const result = event.results[event.results.length - 1];\r\n      if (result.isFinal) {\r\n        this._handleVoiceCommand(result[0].transcript);\r\n      }\r\n    };\r\n    \r\n    this.voiceRecognition.onerror = (event) => {\r\n      this.accessify.emit('voiceRecognitionError', event);\r\n    };\r\n    \r\n    this.voiceRecognition.onend = () => {\r\n      this.accessify.emit('voiceRecognitionEnded');\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Handle voice command\r\n   */\r\n  _handleVoiceCommand(transcript) {\r\n    const command = transcript.toLowerCase().trim();\r\n    \r\n    this.accessify.emit('voiceCommand', command);\r\n    \r\n    // Handle specific commands\r\n    if (command.includes('scroll up')) {\r\n      window.scrollBy(0, -100);\r\n    } else if (command.includes('scroll down')) {\r\n      window.scrollBy(0, 100);\r\n    } else if (command.includes('go back')) {\r\n      if (window.history.length > 1) {\r\n        window.history.back();\r\n      }\r\n    } else if (command.includes('go forward')) {\r\n      if (window.history.length > 1) {\r\n        window.history.forward();\r\n      }\r\n    } else if (command.includes('increase text size')) {\r\n      this.accessify.visual.increaseTextSize();\r\n    } else if (command.includes('decrease text size')) {\r\n      this.accessify.visual.decreaseTextSize();\r\n    } else if (command.includes('toggle contrast')) {\r\n      this.accessify.visual.toggleContrastMode();\r\n    } else if (command.includes('speak')) {\r\n      const text = document.body.textContent;\r\n      this.accessify.reading.speak(text);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Start voice recognition\r\n   */\r\n  startVoiceRecognition() {\r\n    if (this.voiceRecognition) {\r\n      this.voiceRecognition.start();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stop voice recognition\r\n   */\r\n  _stopVoiceRecognition() {\r\n    if (this.voiceRecognition) {\r\n      this.voiceRecognition.stop();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set up motion control\r\n   */\r\n  _setupMotionControl() {\r\n    const config = this.accessify.configManager.get('motor.motion');\r\n    \r\n    if (!config.enabled) {\r\n      return;\r\n    }\r\n\r\n    // Check for reduced motion preference\r\n    if (config.reduced && window.matchMedia('(prefers-reduced-motion: reduce)').matches) {\r\n      this._applyReducedMotion();\r\n    }\r\n    \r\n    // Set up motion sensor\r\n    this._setupMotionSensor();\r\n  }\r\n\r\n  /**\r\n   * Apply reduced motion\r\n   */\r\n  _applyReducedMotion() {\r\n    const css = `\r\n      * {\r\n        animation-duration: 0.01ms !important;\r\n        animation-iteration-count: 1 !important;\r\n        transition-duration: 0.01ms !important;\r\n      }\r\n    `;\r\n    \r\n    this._addStyle('reduced-motion', css);\r\n  }\r\n\r\n  /**\r\n   * Set up motion sensor\r\n   */\r\n  _setupMotionSensor() {\r\n    // This is a simplified implementation\r\n    // In a real implementation, you'd use device motion APIs\r\n  }\r\n\r\n  /**\r\n   * Remove motion sensor\r\n   */\r\n  _removeMotionSensor() {\r\n    // Remove motion sensor if implemented\r\n  }\r\n\r\n  /**\r\n   * Set up interaction delays\r\n   */\r\n  _setupInteractionDelays() {\r\n    const config = this.accessify.configManager.get('motor.delays');\r\n    \r\n    if (!config.enabled) {\r\n      return;\r\n    }\r\n\r\n    // Set up hover delays\r\n    if (config.hover > 0) {\r\n      this._setupHoverDelays(config.hover);\r\n    }\r\n    \r\n    // Set up interaction delays\r\n    if (config.interaction > 0) {\r\n      this._setupInteractionDelays(config.interaction);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set up hover delays\r\n   */\r\n  _setupHoverDelays(delay) {\r\n    // This is a simplified implementation\r\n    // In a real implementation, you'd add delays to hover events\r\n  }\r\n\r\n  /**\r\n   * Set up interaction delays\r\n   */\r\n  _setupInteractionDelays(delay) {\r\n    // This is a simplified implementation\r\n    // In a real implementation, you'd add delays to interaction events\r\n  }\r\n\r\n  /**\r\n   * Add style to the style element\r\n   */\r\n  _addStyle(name, css) {\r\n    if (!this.styleElement) {\r\n      this.styleElement = document.createElement('style');\r\n      this.styleElement.id = 'accessify-motor-styles';\r\n      document.head.appendChild(this.styleElement);\r\n    }\r\n    \r\n    this.currentStyles = this.currentStyles || new Map();\r\n    this.currentStyles.set(name, css);\r\n    this._updateStyleElement();\r\n  }\r\n\r\n  /**\r\n   * Update the style element with all current styles\r\n   */\r\n  _updateStyleElement() {\r\n    if (!this.styleElement || !this.currentStyles) {\r\n      return;\r\n    }\r\n\r\n    const allStyles = Array.from(this.currentStyles.values()).join('\\n');\r\n    this.styleElement.textContent = allStyles;\r\n  }\r\n\r\n  /**\r\n   * Get compliance status\r\n   */\r\n  getComplianceStatus() {\r\n    const config = this.accessify.configManager.get('motor');\r\n    const enabledFeatures = [];\r\n    \r\n    if (config.targets.enabled) enabledFeatures.push('largeTargets');\r\n    if (config.gestures.enabled) enabledFeatures.push('gestureAlternatives');\r\n    if (config.voice.enabled) enabledFeatures.push('voiceCommands');\r\n    if (config.motion.enabled) enabledFeatures.push('motionControl');\r\n    \r\n    return {\r\n      wcag: {\r\n        level: 'AA',\r\n        compliant: enabledFeatures.length >= 2,\r\n        score: Math.round((enabledFeatures.length / 4) * 100)\r\n      },\r\n      israeliStandard: {\r\n        compliant: enabledFeatures.includes('largeTargets') || \r\n                   enabledFeatures.includes('voiceCommands'),\r\n        score: Math.round((enabledFeatures.length / 4) * 100)\r\n      },\r\n      features: enabledFeatures\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get current motor settings\r\n   */\r\n  getCurrentSettings() {\r\n    return {\r\n      targets: this.accessify.configManager.get('motor.targets'),\r\n      gestures: this.accessify.configManager.get('motor.gestures'),\r\n      voice: this.accessify.configManager.get('motor.voice'),\r\n      motion: this.accessify.configManager.get('motor.motion'),\r\n      delays: this.accessify.configManager.get('motor.delays')\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Reset all motor settings to default\r\n   */\r\n  reset() {\r\n    this._stopVoiceRecognition();\r\n    this._removeLargeTargets();\r\n    this._removeGestureRecognition();\r\n    this._removeMotionSensor();\r\n    \r\n    this.accessify.emit('motorSettingsReset');\r\n  }\r\n}\r\n","/**\r\n * Multilingual Support Component\r\n * Handles RTL support, language detection, and internationalization\r\n */\r\n\r\nexport class MultilingualSupport {\r\n  constructor(accessify) {\r\n    this.accessify = accessify;\r\n    this.isInitialized = false;\r\n    this.currentLanguage = 'en';\r\n    this.currentDirection = 'ltr';\r\n    this.rtlLanguages = ['ar', 'he', 'fa', 'ur', 'yi'];\r\n    this.translations = new Map();\r\n    this.directionObserver = null;\r\n  }\r\n\r\n  /**\r\n   * Initialize multilingual support\r\n   */\r\n  async init() {\r\n    try {\r\n      if (this.isInitialized) {\r\n        return;\r\n      }\r\n\r\n      // Detect current language and direction\r\n      this._detectLanguageAndDirection();\r\n      \r\n      // Set up RTL support\r\n      this._setupRTLSupport();\r\n      \r\n      // Set up language switching\r\n      this._setupLanguageSwitching();\r\n      \r\n      // Set up direction switching\r\n      this._setupDirectionSwitching();\r\n      \r\n      // Load translations\r\n      await this._loadTranslations();\r\n\r\n      // Initialize voice recognition for RTL languages\r\n      this._initializeRTLVoiceRecognition();\r\n\r\n      this.isInitialized = true;\r\n      this.accessify.emit('multilingualSupportInitialized');\r\n\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Multilingual support initialization', 'component');\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy multilingual support\r\n   */\r\n  destroy() {\r\n    try {\r\n      if (!this.isInitialized) {\r\n        return;\r\n      }\r\n\r\n      // Remove direction observer\r\n      if (this.directionObserver) {\r\n        this.directionObserver.disconnect();\r\n      }\r\n      \r\n      // Remove RTL styles\r\n      this._removeRTLStyles();\r\n\r\n      this.isInitialized = false;\r\n      this.accessify.emit('multilingualSupportDestroyed');\r\n\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Multilingual support destruction', 'component');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Detect current language and direction\r\n   */\r\n  _detectLanguageAndDirection() {\r\n    const config = this.accessify.configManager.get('multilingual');\r\n    \r\n    if (config.autoDetect) {\r\n      // Detect language from HTML lang attribute\r\n      const htmlLang = document.documentElement.lang || 'en';\r\n      this.currentLanguage = htmlLang.split('-')[0];\r\n      \r\n      // Detect direction from HTML dir attribute\r\n      const htmlDir = document.documentElement.dir || 'ltr';\r\n      this.currentDirection = htmlDir;\r\n    } else {\r\n      // Use configured values\r\n      this.currentLanguage = this.accessify.configManager.get('language', 'en');\r\n      this.currentDirection = this.accessify.configManager.get('direction', 'ltr');\r\n    }\r\n    \r\n    // Update configuration\r\n    this.accessify.configManager.set('language', this.currentLanguage);\r\n    this.accessify.configManager.set('direction', this.currentDirection);\r\n  }\r\n\r\n  /**\r\n   * Set up RTL support\r\n   */\r\n  _setupRTLSupport() {\r\n    const config = this.accessify.configManager.get('multilingual.rtl');\r\n    \r\n    if (!config.enabled) {\r\n      return;\r\n    }\r\n\r\n    // Apply RTL styles\r\n    this._applyRTLStyles();\r\n    \r\n    // Set up direction observer\r\n    this._setupDirectionObserver();\r\n    \r\n    // Set up RTL-specific features\r\n    this._setupRTLFeatures();\r\n  }\r\n\r\n  /**\r\n   * Apply RTL styles\r\n   */\r\n  _applyRTLStyles() {\r\n    if (this.currentDirection === 'rtl') {\r\n      const css = `\r\n        html {\r\n          direction: rtl !important;\r\n        }\r\n        \r\n        body {\r\n          direction: rtl !important;\r\n        }\r\n        \r\n        * {\r\n          direction: inherit !important;\r\n        }\r\n        \r\n        /* RTL-specific adjustments */\r\n        .accessify-skip-links {\r\n          right: 0 !important;\r\n          left: auto !important;\r\n        }\r\n        \r\n        .accessify-skip-link {\r\n          border-radius: 0 0 0 4px !important;\r\n        }\r\n        \r\n        .accessify-reading-ruler {\r\n          right: 0 !important;\r\n          left: auto !important;\r\n        }\r\n        \r\n        .accessify-target-enlarger {\r\n          right: 0 !important;\r\n          left: auto !important;\r\n        }\r\n      `;\r\n      \r\n      this._addStyle('rtl-support', css);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove RTL styles\r\n   */\r\n  _removeRTLStyles() {\r\n    this._removeStyle('rtl-support');\r\n  }\r\n\r\n  /**\r\n   * Set up direction observer\r\n   */\r\n  _setupDirectionObserver() {\r\n    // Observe changes to the HTML dir attribute\r\n    this.directionObserver = new MutationObserver((mutations) => {\r\n      mutations.forEach((mutation) => {\r\n        if (mutation.type === 'attributes' && mutation.attributeName === 'dir') {\r\n          const newDirection = document.documentElement.dir || 'ltr';\r\n          if (newDirection !== this.currentDirection) {\r\n            this.setDirection(newDirection);\r\n          }\r\n        }\r\n      });\r\n    });\r\n    \r\n    this.directionObserver.observe(document.documentElement, {\r\n      attributes: true,\r\n      attributeFilter: ['dir']\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Set up RTL-specific features\r\n   */\r\n  _setupRTLFeatures() {\r\n    if (this.currentDirection === 'rtl') {\r\n      // Adjust keyboard navigation for RTL\r\n      this._adjustKeyboardNavigationForRTL();\r\n      \r\n      // Adjust gesture recognition for RTL\r\n      this._adjustGestureRecognitionForRTL();\r\n      \r\n      // Adjust text selection for RTL\r\n      this._adjustTextSelectionForRTL();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Adjust keyboard navigation for RTL\r\n   */\r\n  _adjustKeyboardNavigationForRTL() {\r\n    // Override arrow key behavior for RTL\r\n    document.addEventListener('keydown', (event) => {\r\n      if (this.currentDirection === 'rtl') {\r\n        switch (event.key) {\r\n          case 'ArrowLeft':\r\n            // In RTL, left arrow should move right\r\n            event.preventDefault();\r\n            this._moveFocus('right');\r\n            break;\r\n          case 'ArrowRight':\r\n            // In RTL, right arrow should move left\r\n            event.preventDefault();\r\n            this._moveFocus('left');\r\n            break;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Move focus in specified direction\r\n   */\r\n  _moveFocus(direction) {\r\n    const focusableElements = document.querySelectorAll(\r\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\r\n    );\r\n    \r\n    const currentIndex = Array.from(focusableElements).indexOf(document.activeElement);\r\n    \r\n    if (currentIndex === -1) {\r\n      return;\r\n    }\r\n    \r\n    let nextIndex;\r\n    if (direction === 'left') {\r\n      nextIndex = currentIndex === 0 ? focusableElements.length - 1 : currentIndex - 1;\r\n    } else {\r\n      nextIndex = currentIndex === focusableElements.length - 1 ? 0 : currentIndex + 1;\r\n    }\r\n    \r\n    focusableElements[nextIndex].focus();\r\n  }\r\n\r\n  /**\r\n   * Adjust gesture recognition for RTL\r\n   */\r\n  _adjustGestureRecognitionForRTL() {\r\n    // Override swipe gesture behavior for RTL\r\n    this.accessify.on('gestureDetected', (gesture) => {\r\n      if (this.currentDirection === 'rtl' && gesture.type === 'swipe') {\r\n        if (gesture.direction === 'left') {\r\n          gesture.direction = 'right';\r\n        } else if (gesture.direction === 'right') {\r\n          gesture.direction = 'left';\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Adjust text selection for RTL\r\n   */\r\n  _adjustTextSelectionForRTL() {\r\n    // Override text selection behavior for RTL\r\n    document.addEventListener('mouseup', (event) => {\r\n      if (this.currentDirection === 'rtl') {\r\n        const selection = window.getSelection();\r\n        if (selection.toString().trim()) {\r\n          // Adjust selection highlighting for RTL\r\n          this._adjustSelectionHighlighting();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Adjust selection highlighting for RTL\r\n   */\r\n  _adjustSelectionHighlighting() {\r\n    // This is a simplified implementation\r\n    // In a real implementation, you'd adjust the highlighting position\r\n  }\r\n\r\n  /**\r\n   * Set up language switching\r\n   */\r\n  _setupLanguageSwitching() {\r\n    // Listen for language changes\r\n    this.accessify.on('languageChanged', (newLanguage) => {\r\n      this.setLanguage(newLanguage);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Set up direction switching\r\n   */\r\n  _setupDirectionSwitching() {\r\n    // Listen for direction changes\r\n    this.accessify.on('directionChanged', (newDirection) => {\r\n      this.setDirection(newDirection);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Set language\r\n   */\r\n  setLanguage(language) {\r\n    if (this.currentLanguage === language) {\r\n      return;\r\n    }\r\n\r\n    this.currentLanguage = language;\r\n    this.accessify.configManager.set('language', language);\r\n    \r\n    // Update HTML lang attribute\r\n    document.documentElement.lang = language;\r\n    \r\n    // Update speech synthesis language\r\n    if (this.accessify.reading && this.accessify.reading.speechSynthesis) {\r\n      this.accessify.reading.speechSynthesis.lang = language;\r\n    }\r\n    \r\n    // Update voice recognition language\r\n    if (this.accessify.motor && this.accessify.motor.voiceRecognition) {\r\n      this.accessify.motor.voiceRecognition.lang = language;\r\n    }\r\n    \r\n    // Emit language changed event\r\n    this.accessify.emit('languageChanged', language);\r\n  }\r\n\r\n  /**\r\n   * Set direction\r\n   */\r\n  setDirection(direction) {\r\n    if (this.currentDirection === direction) {\r\n      return;\r\n    }\r\n\r\n    this.currentDirection = direction;\r\n    this.accessify.configManager.set('direction', direction);\r\n    \r\n    // Update HTML dir attribute\r\n    document.documentElement.dir = direction;\r\n    \r\n    // Apply or remove RTL styles\r\n    if (direction === 'rtl') {\r\n      this._applyRTLStyles();\r\n      this._setupRTLFeatures();\r\n    } else {\r\n      this._removeRTLStyles();\r\n    }\r\n    \r\n    // Emit direction changed event\r\n    this.accessify.emit('directionChanged', direction);\r\n  }\r\n\r\n  /**\r\n   * Load translations\r\n   */\r\n  async _loadTranslations() {\r\n    const languages = ['en', 'he', 'ar', 'es', 'fr', 'de'];\r\n    \r\n    for (const lang of languages) {\r\n      try {\r\n        const translations = await this._loadLanguageTranslations(lang);\r\n        this.translations.set(lang, translations);\r\n      } catch (error) {\r\n        console.warn(`Failed to load translations for ${lang}:`, error);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Load language translations\r\n   */\r\n  async _loadLanguageTranslations(language) {\r\n    // This is a simplified implementation\r\n    // In a real implementation, you'd load translations from files or API\r\n    \r\n    const translations = {\r\n      en: {\r\n        'skipToContent': 'Skip to main content',\r\n        'skipToNavigation': 'Skip to navigation',\r\n        'increaseTextSize': 'Increase text size',\r\n        'decreaseTextSize': 'Decrease text size',\r\n        'toggleContrast': 'Toggle contrast',\r\n        'toggleHighContrast': 'Toggle high contrast',\r\n        'speak': 'Speak text',\r\n        'stop': 'Stop',\r\n        'pause': 'Pause',\r\n        'resume': 'Resume'\r\n      },\r\n      he: {\r\n        'skipToContent': '×“×œ×’ ×œ×ª×•×›×Ÿ ×”×¨××©×™',\r\n        'skipToNavigation': '×“×œ×’ ×œ× ×™×•×•×˜',\r\n        'increaseTextSize': '×”×’×“×œ ×’×•×“×œ ×˜×§×¡×˜',\r\n        'decreaseTextSize': '×”×§×˜×Ÿ ×’×•×“×œ ×˜×§×¡×˜',\r\n        'toggleContrast': '×”×—×œ×£ × ×™×’×•×“×™×•×ª',\r\n        'toggleHighContrast': '×”×—×œ×£ × ×™×’×•×“×™×•×ª ×’×‘×•×”×”',\r\n        'speak': '×”×§×¨× ×˜×§×¡×˜',\r\n        'stop': '×¢×¦×•×¨',\r\n        'pause': '×”×©×”×”',\r\n        'resume': '×”×ž×©×š'\r\n      },\r\n      ar: {\r\n        'skipToContent': 'Ø§Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ',\r\n        'skipToNavigation': 'Ø§Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ Ø§Ù„ØªÙ†Ù‚Ù„',\r\n        'increaseTextSize': 'Ø²ÙŠØ§Ø¯Ø© Ø­Ø¬Ù… Ø§Ù„Ù†Øµ',\r\n        'decreaseTextSize': 'ØªÙ‚Ù„ÙŠÙ„ Ø­Ø¬Ù… Ø§Ù„Ù†Øµ',\r\n        'toggleContrast': 'ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØªØ¨Ø§ÙŠÙ†',\r\n        'toggleHighContrast': 'ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØªØ¨Ø§ÙŠÙ† Ø§Ù„Ø¹Ø§Ù„ÙŠ',\r\n        'speak': 'Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù†Øµ',\r\n        'stop': 'ØªÙˆÙ‚Ù',\r\n        'pause': 'Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª',\r\n        'resume': 'Ø§Ø³ØªØ¦Ù†Ø§Ù'\r\n      }\r\n    };\r\n    \r\n    return translations[language] || translations.en;\r\n  }\r\n\r\n  /**\r\n   * Get translation\r\n   */\r\n  getTranslation(key, language = null) {\r\n    const lang = language || this.currentLanguage;\r\n    const langTranslations = this.translations.get(lang);\r\n    \r\n    if (langTranslations && langTranslations[key]) {\r\n      return langTranslations[key];\r\n    }\r\n    \r\n    // Fallback to English\r\n    const enTranslations = this.translations.get('en');\r\n    if (enTranslations && enTranslations[key]) {\r\n      return enTranslations[key];\r\n    }\r\n    \r\n    // Fallback to key\r\n    return key;\r\n  }\r\n\r\n  /**\r\n   * Check if language is RTL\r\n   */\r\n  isRTLLanguage(language = null) {\r\n    const lang = language || this.currentLanguage;\r\n    return this.rtlLanguages.includes(lang);\r\n  }\r\n\r\n  /**\r\n   * Get current language\r\n   */\r\n  getCurrentLanguage() {\r\n    return this.currentLanguage;\r\n  }\r\n\r\n  /**\r\n   * Get current direction\r\n   */\r\n  getCurrentDirection() {\r\n    return this.currentDirection;\r\n  }\r\n\r\n  /**\r\n   * Get supported languages\r\n   */\r\n  getSupportedLanguages() {\r\n    return Array.from(this.translations.keys());\r\n  }\r\n\r\n  /**\r\n   * Add style to the style element\r\n   */\r\n  _addStyle(name, css) {\r\n    if (!this.styleElement) {\r\n      this.styleElement = document.createElement('style');\r\n      this.styleElement.id = 'accessify-multilingual-styles';\r\n      document.head.appendChild(this.styleElement);\r\n    }\r\n    \r\n    this.currentStyles = this.currentStyles || new Map();\r\n    this.currentStyles.set(name, css);\r\n    this._updateStyleElement();\r\n  }\r\n\r\n  /**\r\n   * Remove style from the style element\r\n   */\r\n  _removeStyle(name) {\r\n    if (this.currentStyles) {\r\n      this.currentStyles.delete(name);\r\n      this._updateStyleElement();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update the style element with all current styles\r\n   */\r\n  _updateStyleElement() {\r\n    if (!this.styleElement || !this.currentStyles) {\r\n      return;\r\n    }\r\n\r\n    const allStyles = Array.from(this.currentStyles.values()).join('\\n');\r\n    this.styleElement.textContent = allStyles;\r\n  }\r\n\r\n  /**\r\n   * Get compliance status\r\n   */\r\n  getComplianceStatus() {\r\n    const config = this.accessify.configManager.get('multilingual');\r\n    const enabledFeatures = [];\r\n    \r\n    if (config.enabled) enabledFeatures.push('multilingual');\r\n    if (config.rtl.enabled) enabledFeatures.push('rtlSupport');\r\n    \r\n    return {\r\n      wcag: {\r\n        level: 'AA',\r\n        compliant: enabledFeatures.length >= 1,\r\n        score: Math.round((enabledFeatures.length / 2) * 100)\r\n      },\r\n      israeliStandard: {\r\n        compliant: enabledFeatures.includes('rtlSupport') && \r\n                   this.isRTLLanguage(),\r\n        score: Math.round((enabledFeatures.length / 2) * 100)\r\n      },\r\n      features: enabledFeatures\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get current multilingual settings\r\n   */\r\n  getCurrentSettings() {\r\n    return {\r\n      language: this.currentLanguage,\r\n      direction: this.currentDirection,\r\n      isRTL: this.isRTLLanguage(),\r\n      supportedLanguages: this.getSupportedLanguages(),\r\n      translations: this.translations\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Reset all multilingual settings to default\r\n   */\r\n  reset() {\r\n    this.setLanguage('en');\r\n    this.setDirection('ltr');\r\n    \r\n    this.accessify.emit('multilingualSettingsReset');\r\n  }\r\n\r\n  /**\r\n   * Initialize RTL voice recognition\r\n   */\r\n  _initializeRTLVoiceRecognition() {\r\n    try {\r\n      // Hebrew voice commands\r\n      this.hebrewCommands = {\r\n        '×’×“×œ ×˜×§×¡×˜': () => this.accessify.visual?.increaseTextSize(),\r\n        '×”×§×˜×Ÿ ×˜×§×¡×˜': () => this.accessify.visual?.decreaseTextSize(),\r\n        '× ×™×’×•×“×™×•×ª ×’×‘×•×”×”': () => this.accessify.visual?.setContrastMode('high'),\r\n        '× ×™×’×•×“×™×•×ª ×¨×’×™×œ×”': () => this.accessify.visual?.setContrastMode('normal'),\r\n        '×¢×¨×›×ª × ×•×©× ×›×”×”': () => this.accessify.visual?.setTheme('dark'),\r\n        '×¢×¨×›×ª × ×•×©× ×‘×”×™×¨×”': () => this.accessify.visual?.setTheme('light'),\r\n        '×§×¨× ×˜×§×¡×˜': () => this._speakSelectedText('he'),\r\n        '×¢×¦×•×¨ ×§×¨×™××”': () => this.accessify.reading?.stop(),\r\n        '× ×™×•×•×˜ ×œ×ž×¢×œ×”': () => this._navigateUp(),\r\n        '× ×™×•×•×˜ ×œ×ž×˜×”': () => this._navigateDown(),\r\n        '× ×™×•×•×˜ ×©×ž××œ×”': () => this._navigateLeft(),\r\n        '× ×™×•×•×˜ ×™×ž×™× ×”': () => this._navigateRight(),\r\n        '×¡×’×•×¨': () => this._closeCurrentElement(),\r\n        '×¤×ª×—': () => this._openCurrentElement(),\r\n        '×—×–×•×¨': () => window.history.back(),\r\n        '×§×“×™×ž×”': () => window.history.forward()\r\n      };\r\n\r\n      // Arabic voice commands\r\n      this.arabicCommands = {\r\n        'ÙƒØ¨Ø± Ø§Ù„Ù†Øµ': () => this.accessify.visual?.increaseTextSize(),\r\n        'ØµØºØ± Ø§Ù„Ù†Øµ': () => this.accessify.visual?.decreaseTextSize(),\r\n        'ØªØ¨Ø§ÙŠÙ† Ø¹Ø§Ù„ÙŠ': () => this.accessify.visual?.setContrastMode('high'),\r\n        'ØªØ¨Ø§ÙŠÙ† Ø¹Ø§Ø¯ÙŠ': () => this.accessify.visual?.setContrastMode('normal'),\r\n        'Ù…Ø¸Ù‡Ø± Ø¯Ø§ÙƒÙ†': () => this.accessify.visual?.setTheme('dark'),\r\n        'Ù…Ø¸Ù‡Ø± ÙØ§ØªØ­': () => this.accessify.visual?.setTheme('light'),\r\n        'Ø§Ù‚Ø±Ø£ Ø§Ù„Ù†Øµ': () => this._speakSelectedText('ar'),\r\n        'ØªÙˆÙ‚Ù Ø¹Ù† Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©': () => this.accessify.reading?.stop(),\r\n        'Ø§Ù†ØªÙ‚Ù„ Ù„Ø£Ø¹Ù„Ù‰': () => this._navigateUp(),\r\n        'Ø§Ù†ØªÙ‚Ù„ Ù„Ø£Ø³ÙÙ„': () => this._navigateDown(),\r\n        'Ø§Ù†ØªÙ‚Ù„ Ù„Ù„ÙŠØ³Ø§Ø±': () => this._navigateLeft(),\r\n        'Ø§Ù†ØªÙ‚Ù„ Ù„Ù„ÙŠÙ…ÙŠÙ†': () => this._navigateRight(),\r\n        'Ø¥ØºÙ„Ø§Ù‚': () => this._closeCurrentElement(),\r\n        'ÙØªØ­': () => this._openCurrentElement(),\r\n        'Ø±Ø¬ÙˆØ¹': () => window.history.back(),\r\n        'ØªÙ‚Ø¯Ù…': () => window.history.forward()\r\n      };\r\n\r\n      this.accessify.emit('rtlVoiceRecognitionInitialized');\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'RTL voice recognition initialization', 'component');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Process voice command for current language\r\n   */\r\n  processVoiceCommand(command) {\r\n    try {\r\n      const normalizedCommand = command.toLowerCase().trim();\r\n      \r\n      if (this.currentLanguage === 'he' && this.hebrewCommands[normalizedCommand]) {\r\n        this.hebrewCommands[normalizedCommand]();\r\n        this.accessify.emit('hebrewVoiceCommand', command);\r\n        return true;\r\n      } else if (this.currentLanguage === 'ar' && this.arabicCommands[normalizedCommand]) {\r\n        this.arabicCommands[normalizedCommand]();\r\n        this.accessify.emit('arabicVoiceCommand', command);\r\n        return true;\r\n      }\r\n      \r\n      return false;\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Voice command processing', 'component');\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Speak selected text in current language\r\n   */\r\n  _speakSelectedText(language) {\r\n    try {\r\n      const selection = window.getSelection();\r\n      const text = selection.toString().trim();\r\n      \r\n      if (text && this.accessify.reading) {\r\n        this.accessify.reading.speak(text, {\r\n          lang: language,\r\n          rate: 0.9,\r\n          pitch: 1.0,\r\n          volume: 1.0\r\n        });\r\n      }\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Text-to-speech in RTL language', 'component');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Navigate up\r\n   */\r\n  _navigateUp() {\r\n    const currentElement = document.activeElement;\r\n    const focusableElements = this._getFocusableElements();\r\n    const currentIndex = focusableElements.indexOf(currentElement);\r\n    \r\n    if (currentIndex > 0) {\r\n      focusableElements[currentIndex - 1].focus();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Navigate down\r\n   */\r\n  _navigateDown() {\r\n    const currentElement = document.activeElement;\r\n    const focusableElements = this._getFocusableElements();\r\n    const currentIndex = focusableElements.indexOf(currentElement);\r\n    \r\n    if (currentIndex < focusableElements.length - 1) {\r\n      focusableElements[currentIndex + 1].focus();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Navigate left (RTL-aware)\r\n   */\r\n  _navigateLeft() {\r\n    if (this.currentDirection === 'rtl') {\r\n      this._navigateDown();\r\n    } else {\r\n      this._navigateUp();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Navigate right (RTL-aware)\r\n   */\r\n  _navigateRight() {\r\n    if (this.currentDirection === 'rtl') {\r\n      this._navigateUp();\r\n    } else {\r\n      this._navigateDown();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Close current element\r\n   */\r\n  _closeCurrentElement() {\r\n    const currentElement = document.activeElement;\r\n    \r\n    // Try to find close button or escape functionality\r\n    const closeButton = currentElement.closest('[role=\"dialog\"], [role=\"modal\"]')?.querySelector('[aria-label*=\"close\"], [aria-label*=\"×¡×’×•×¨\"], [aria-label*=\"Ø¥ØºÙ„Ø§Ù‚\"]');\r\n    if (closeButton) {\r\n      closeButton.click();\r\n    } else {\r\n      // Send escape key\r\n      currentElement.dispatchEvent(new KeyboardEvent('keydown', { key: 'Escape' }));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Open current element\r\n   */\r\n  _openCurrentElement() {\r\n    const currentElement = document.activeElement;\r\n    \r\n    if (currentElement.tagName === 'BUTTON' || currentElement.getAttribute('role') === 'button') {\r\n      currentElement.click();\r\n    } else if (currentElement.tagName === 'A') {\r\n      currentElement.click();\r\n    } else {\r\n      // Send enter key\r\n      currentElement.dispatchEvent(new KeyboardEvent('keydown', { key: 'Enter' }));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get all focusable elements\r\n   */\r\n  _getFocusableElements() {\r\n    const focusableSelectors = [\r\n      'a[href]',\r\n      'button:not([disabled])',\r\n      'input:not([disabled])',\r\n      'select:not([disabled])',\r\n      'textarea:not([disabled])',\r\n      '[tabindex]:not([tabindex=\"-1\"])',\r\n      '[contenteditable=\"true\"]'\r\n    ];\r\n    \r\n    return Array.from(document.querySelectorAll(focusableSelectors.join(', ')));\r\n  }\r\n\r\n  /**\r\n   * Get available voice commands for current language\r\n   */\r\n  getAvailableVoiceCommands() {\r\n    if (this.currentLanguage === 'he') {\r\n      return Object.keys(this.hebrewCommands);\r\n    } else if (this.currentLanguage === 'ar') {\r\n      return Object.keys(this.arabicCommands);\r\n    }\r\n    return [];\r\n  }\r\n\r\n  /**\r\n   * Add custom voice command\r\n   */\r\n  addCustomVoiceCommand(command, action, language = null) {\r\n    try {\r\n      const lang = language || this.currentLanguage;\r\n      \r\n      if (lang === 'he') {\r\n        this.hebrewCommands[command] = action;\r\n      } else if (lang === 'ar') {\r\n        this.arabicCommands[command] = action;\r\n      }\r\n      \r\n      this.accessify.emit('customVoiceCommandAdded', { command, language: lang });\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Custom voice command addition', 'component');\r\n    }\r\n  }\r\n}\r\n","/**\r\n * ARIA Enhancement Component\r\n * Provides comprehensive ARIA labeling and accessibility enhancements\r\n */\r\n\r\nexport class ARIAEnhancement {\r\n  constructor(accessify) {\r\n    this.accessify = accessify;\r\n    this.isInitialized = false;\r\n    this.enhancedElements = new Set();\r\n    this.ariaObserver = null;\r\n  }\r\n\r\n  /**\r\n   * Initialize ARIA enhancement features\r\n   */\r\n  async init() {\r\n    try {\r\n      if (this.isInitialized) {\r\n        return;\r\n      }\r\n\r\n      // Enhance existing elements\r\n      this._enhanceExistingElements();\r\n\r\n      // Set up observer for new elements\r\n      this._observeNewElements();\r\n\r\n      // Set up live regions for announcements\r\n      this._setupLiveRegions();\r\n\r\n      this.isInitialized = true;\r\n      this.accessify.emit('ariaEnhancementInitialized');\r\n\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'ARIA enhancement initialization', 'component');\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy ARIA enhancement features\r\n   */\r\n  destroy() {\r\n    try {\r\n      if (this.ariaObserver) {\r\n        this.ariaObserver.disconnect();\r\n        this.ariaObserver = null;\r\n      }\r\n\r\n      // Remove enhanced elements tracking\r\n      this.enhancedElements.clear();\r\n\r\n      this.isInitialized = false;\r\n      this.accessify.emit('ariaEnhancementDestroyed');\r\n\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'ARIA enhancement destruction', 'component');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Enhance existing elements with ARIA attributes\r\n   */\r\n  _enhanceExistingElements() {\r\n    // Enhance buttons\r\n    this._enhanceButtons();\r\n    \r\n    // Enhance form elements\r\n    this._enhanceFormElements();\r\n    \r\n    // Enhance navigation elements\r\n    this._enhanceNavigation();\r\n    \r\n    // Enhance images\r\n    this._enhanceImages();\r\n    \r\n    // Enhance interactive elements\r\n    this._enhanceInteractiveElements();\r\n  }\r\n\r\n  /**\r\n   * Enhance buttons with proper ARIA attributes\r\n   */\r\n  _enhanceButtons() {\r\n    const buttons = document.querySelectorAll('button:not([aria-label]):not([aria-labelledby])');\r\n    \r\n    buttons.forEach(button => {\r\n      if (!button.textContent.trim() && !button.getAttribute('aria-label')) {\r\n        // Generate aria-label from icon or other attributes\r\n        const icon = button.querySelector('i, svg, img');\r\n        if (icon) {\r\n          const iconClass = icon.className;\r\n          const iconTitle = icon.getAttribute('title') || icon.getAttribute('aria-label');\r\n          \r\n          if (iconTitle) {\r\n            button.setAttribute('aria-label', iconTitle);\r\n          } else if (iconClass) {\r\n            // Generate label from icon class\r\n            const label = this._generateLabelFromIconClass(iconClass);\r\n            button.setAttribute('aria-label', label);\r\n          }\r\n        }\r\n        \r\n        // Use data-label if available\r\n        const dataLabel = button.getAttribute('data-label');\r\n        if (dataLabel) {\r\n          button.setAttribute('aria-label', dataLabel);\r\n        }\r\n      }\r\n      \r\n      this.enhancedElements.add(button);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Enhance form elements with proper labels and descriptions\r\n   */\r\n  _enhanceFormElements() {\r\n    const inputs = document.querySelectorAll('input, select, textarea');\r\n    \r\n    inputs.forEach(input => {\r\n      // Ensure proper labeling\r\n      if (!input.getAttribute('aria-label') && !input.getAttribute('aria-labelledby')) {\r\n        const label = input.closest('label') || document.querySelector(`label[for=\"${input.id}\"]`);\r\n        if (label) {\r\n          input.setAttribute('aria-labelledby', label.id || this._generateId(label));\r\n        }\r\n      }\r\n      \r\n      // Add validation states\r\n      if (input.hasAttribute('required')) {\r\n        input.setAttribute('aria-required', 'true');\r\n      }\r\n      \r\n      if (input.hasAttribute('invalid') || input.classList.contains('invalid')) {\r\n        input.setAttribute('aria-invalid', 'true');\r\n      }\r\n      \r\n      // Add descriptions for help text\r\n      const helpText = input.closest('.form-group, .field')?.querySelector('.help-text, .description');\r\n      if (helpText && !input.getAttribute('aria-describedby')) {\r\n        helpText.id = helpText.id || this._generateId(helpText);\r\n        input.setAttribute('aria-describedby', helpText.id);\r\n      }\r\n      \r\n      this.enhancedElements.add(input);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Enhance navigation elements\r\n   */\r\n  _enhanceNavigation() {\r\n    const navs = document.querySelectorAll('nav:not([aria-label]):not([aria-labelledby])');\r\n    \r\n    navs.forEach(nav => {\r\n      if (!nav.getAttribute('aria-label')) {\r\n        // Try to get label from heading or title\r\n        const heading = nav.querySelector('h1, h2, h3, h4, h5, h6');\r\n        if (heading) {\r\n          nav.setAttribute('aria-labelledby', heading.id || this._generateId(heading));\r\n        } else {\r\n          nav.setAttribute('aria-label', 'Navigation');\r\n        }\r\n      }\r\n      \r\n      this.enhancedElements.add(nav);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Enhance images with proper alt text and descriptions\r\n   */\r\n  _enhanceImages() {\r\n    const images = document.querySelectorAll('img');\r\n    \r\n    images.forEach(img => {\r\n      // Ensure alt attribute exists\r\n      if (!img.hasAttribute('alt')) {\r\n        img.setAttribute('alt', 'Image');\r\n      }\r\n      \r\n      // Add longdesc for complex images\r\n      if (img.hasAttribute('data-longdesc') && !img.hasAttribute('aria-describedby')) {\r\n        const longdescId = this._generateId(img) + '-longdesc';\r\n        const longdescElement = document.getElementById(img.getAttribute('data-longdesc'));\r\n        if (longdescElement) {\r\n          longdescElement.id = longdescId;\r\n          img.setAttribute('aria-describedby', longdescId);\r\n        }\r\n      }\r\n      \r\n      this.enhancedElements.add(img);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Enhance interactive elements\r\n   */\r\n  _enhanceInteractiveElements() {\r\n    // Enhance clickable divs and spans\r\n    const clickableElements = document.querySelectorAll('[onclick], [role=\"button\"]:not(button)');\r\n    \r\n    clickableElements.forEach(element => {\r\n      if (!element.getAttribute('tabindex')) {\r\n        element.setAttribute('tabindex', '0');\r\n      }\r\n      \r\n      if (!element.getAttribute('role')) {\r\n        element.setAttribute('role', 'button');\r\n      }\r\n      \r\n      // Add keyboard event handlers\r\n      this._addKeyboardHandlers(element);\r\n      \r\n      this.enhancedElements.add(element);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Add keyboard event handlers for interactive elements\r\n   */\r\n  _addKeyboardHandlers(element) {\r\n    const handleKeydown = (event) => {\r\n      if (event.key === 'Enter' || event.key === ' ') {\r\n        event.preventDefault();\r\n        element.click();\r\n      }\r\n    };\r\n    \r\n    element.addEventListener('keydown', handleKeydown);\r\n    \r\n    // Store handler for cleanup\r\n    element._accessifyKeydownHandler = handleKeydown;\r\n  }\r\n\r\n  /**\r\n   * Observe for new elements and enhance them\r\n   */\r\n  _observeNewElements() {\r\n    if (typeof MutationObserver !== 'undefined') {\r\n      this.ariaObserver = new MutationObserver(mutations => {\r\n        mutations.forEach(mutation => {\r\n          mutation.addedNodes.forEach(node => {\r\n            if (node.nodeType === Node.ELEMENT_NODE) {\r\n              this._enhanceNewElement(node);\r\n            }\r\n          });\r\n        });\r\n      });\r\n\r\n      this.ariaObserver.observe(document.body, {\r\n        childList: true,\r\n        subtree: true\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Enhance a newly added element\r\n   */\r\n  _enhanceNewElement(element) {\r\n    // Skip if already enhanced\r\n    if (this.enhancedElements.has(element)) {\r\n      return;\r\n    }\r\n\r\n    // Enhance based on element type\r\n    if (element.tagName === 'BUTTON') {\r\n      this._enhanceButtons();\r\n    } else if (['INPUT', 'SELECT', 'TEXTAREA'].includes(element.tagName)) {\r\n      this._enhanceFormElements();\r\n    } else if (element.tagName === 'NAV') {\r\n      this._enhanceNavigation();\r\n    } else if (element.tagName === 'IMG') {\r\n      this._enhanceImages();\r\n    } else if (element.hasAttribute('onclick') || element.getAttribute('role') === 'button') {\r\n      this._enhanceInteractiveElements();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set up live regions for announcements\r\n   */\r\n  _setupLiveRegions() {\r\n    // Create live region for status announcements\r\n    if (!document.getElementById('accessify-live-region')) {\r\n      const liveRegion = document.createElement('div');\r\n      liveRegion.id = 'accessify-live-region';\r\n      liveRegion.setAttribute('aria-live', 'polite');\r\n      liveRegion.setAttribute('aria-atomic', 'true');\r\n      liveRegion.style.cssText = `\r\n        position: absolute;\r\n        left: -10000px;\r\n        width: 1px;\r\n        height: 1px;\r\n        overflow: hidden;\r\n      `;\r\n      document.body.appendChild(liveRegion);\r\n    }\r\n\r\n    // Create live region for assertive announcements\r\n    if (!document.getElementById('accessify-live-region-assertive')) {\r\n      const liveRegionAssertive = document.createElement('div');\r\n      liveRegionAssertive.id = 'accessify-live-region-assertive';\r\n      liveRegionAssertive.setAttribute('aria-live', 'assertive');\r\n      liveRegionAssertive.setAttribute('aria-atomic', 'true');\r\n      liveRegionAssertive.style.cssText = `\r\n        position: absolute;\r\n        left: -10000px;\r\n        width: 1px;\r\n        height: 1px;\r\n        overflow: hidden;\r\n      `;\r\n      document.body.appendChild(liveRegionAssertive);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Announce message to screen readers\r\n   */\r\n  announce(message, priority = 'polite') {\r\n    try {\r\n      const liveRegionId = priority === 'assertive' ? \r\n        'accessify-live-region-assertive' : \r\n        'accessify-live-region';\r\n      \r\n      const liveRegion = document.getElementById(liveRegionId);\r\n      if (liveRegion) {\r\n        liveRegion.textContent = message;\r\n        \r\n        // Clear after announcement\r\n        setTimeout(() => {\r\n          liveRegion.textContent = '';\r\n        }, 1000);\r\n      }\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Live region announcement', 'component');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Generate label from icon class\r\n   */\r\n  _generateLabelFromIconClass(iconClass) {\r\n    const iconMap = {\r\n      'fa-search': 'Search',\r\n      'fa-menu': 'Menu',\r\n      'fa-close': 'Close',\r\n      'fa-edit': 'Edit',\r\n      'fa-delete': 'Delete',\r\n      'fa-save': 'Save',\r\n      'fa-cancel': 'Cancel',\r\n      'fa-plus': 'Add',\r\n      'fa-minus': 'Remove',\r\n      'fa-arrow-left': 'Previous',\r\n      'fa-arrow-right': 'Next',\r\n      'fa-arrow-up': 'Up',\r\n      'fa-arrow-down': 'Down',\r\n      'fa-home': 'Home',\r\n      'fa-user': 'User',\r\n      'fa-settings': 'Settings',\r\n      'fa-help': 'Help'\r\n    };\r\n\r\n    for (const [className, label] of Object.entries(iconMap)) {\r\n      if (iconClass.includes(className)) {\r\n        return label;\r\n      }\r\n    }\r\n\r\n    return 'Button';\r\n  }\r\n\r\n  /**\r\n   * Generate unique ID for element\r\n   */\r\n  _generateId(element) {\r\n    if (element.id) {\r\n      return element.id;\r\n    }\r\n\r\n    const prefix = element.tagName.toLowerCase();\r\n    const timestamp = Date.now();\r\n    const random = Math.random().toString(36).substr(2, 5);\r\n    const id = `${prefix}-${timestamp}-${random}`;\r\n    \r\n    element.id = id;\r\n    return id;\r\n  }\r\n\r\n  /**\r\n   * Add ARIA attributes to element\r\n   */\r\n  enhanceElement(element, attributes) {\r\n    try {\r\n      Object.entries(attributes).forEach(([key, value]) => {\r\n        element.setAttribute(key, value);\r\n      });\r\n      \r\n      this.enhancedElements.add(element);\r\n      this.accessify.emit('elementEnhanced', { element, attributes });\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Element enhancement', 'component');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove ARIA attributes from element\r\n   */\r\n  removeEnhancement(element, attributes) {\r\n    try {\r\n      if (Array.isArray(attributes)) {\r\n        attributes.forEach(attr => {\r\n          element.removeAttribute(attr);\r\n        });\r\n      } else {\r\n        element.removeAttribute(attributes);\r\n      }\r\n      \r\n      this.enhancedElements.delete(element);\r\n      this.accessify.emit('elementEnhancementRemoved', { element, attributes });\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Element enhancement removal', 'component');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get compliance status\r\n   */\r\n  getComplianceStatus() {\r\n    return {\r\n      enhancedElements: this.enhancedElements.size,\r\n      liveRegions: {\r\n        polite: !!document.getElementById('accessify-live-region'),\r\n        assertive: !!document.getElementById('accessify-live-region-assertive')\r\n      },\r\n      wcagCompliant: true,\r\n      israeliStandardCompliant: true\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Reset all ARIA enhancements\r\n   */\r\n  reset() {\r\n    try {\r\n      // Remove all enhanced elements\r\n      this.enhancedElements.forEach(element => {\r\n        // Remove Accessify-specific attributes\r\n        const accessifyAttributes = Array.from(element.attributes)\r\n          .filter(attr => attr.name.startsWith('data-accessify-'))\r\n          .map(attr => attr.name);\r\n        \r\n        accessifyAttributes.forEach(attr => {\r\n          element.removeAttribute(attr);\r\n        });\r\n      });\r\n      \r\n      this.enhancedElements.clear();\r\n      \r\n      this.accessify.emit('ariaEnhancementReset');\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'ARIA enhancement reset', 'component');\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Reading Guide Component\r\n * Provides reading ruler and text highlighting features\r\n */\r\n\r\nexport class ReadingGuide {\r\n  constructor(accessify) {\r\n    this.accessify = accessify;\r\n    this.isInitialized = false;\r\n    this.readingRuler = null;\r\n    this.isActive = false;\r\n    this.currentPosition = { x: 0, y: 0 };\r\n    this.highlightedElements = new Set();\r\n  }\r\n\r\n  /**\r\n   * Initialize reading guide features\r\n   */\r\n  async init() {\r\n    try {\r\n      if (this.isInitialized) {\r\n        return;\r\n      }\r\n\r\n      // Create reading ruler\r\n      this._createReadingRuler();\r\n      \r\n      // Set up event listeners\r\n      this._setupEventListeners();\r\n      \r\n      // Initialize text highlighting\r\n      this._initializeTextHighlighting();\r\n\r\n      this.isInitialized = true;\r\n      this.accessify.emit('readingGuideInitialized');\r\n\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Reading guide initialization', 'component');\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy reading guide features\r\n   */\r\n  destroy() {\r\n    try {\r\n      if (!this.isInitialized) {\r\n        return;\r\n      }\r\n\r\n      // Remove reading ruler\r\n      this._removeReadingRuler();\r\n      \r\n      // Remove event listeners\r\n      this._removeEventListeners();\r\n      \r\n      // Clear highlighted elements\r\n      this._clearHighlightedElements();\r\n\r\n      this.isInitialized = false;\r\n      this.accessify.emit('readingGuideDestroyed');\r\n\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Reading guide destruction', 'component');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create reading ruler\r\n   */\r\n  _createReadingRuler() {\r\n    this.readingRuler = document.createElement('div');\r\n    this.readingRuler.id = 'accessify-reading-ruler';\r\n    this.readingRuler.className = 'accessify-reading-ruler';\r\n    this.readingRuler.setAttribute('aria-hidden', 'true');\r\n    \r\n    // Create ruler line\r\n    const rulerLine = document.createElement('div');\r\n    rulerLine.className = 'accessify-ruler-line';\r\n    \r\n    // Create ruler handles\r\n    const topHandle = document.createElement('div');\r\n    topHandle.className = 'accessify-ruler-handle accessify-ruler-handle-top';\r\n    \r\n    const bottomHandle = document.createElement('div');\r\n    bottomHandle.className = 'accessify-ruler-handle accessify-ruler-handle-bottom';\r\n    \r\n    this.readingRuler.appendChild(rulerLine);\r\n    this.readingRuler.appendChild(topHandle);\r\n    this.readingRuler.appendChild(bottomHandle);\r\n    \r\n    // Add to document\r\n    document.body.appendChild(this.readingRuler);\r\n    \r\n    // Add CSS\r\n    this._addReadingRulerCSS();\r\n    \r\n    // Initially hidden\r\n    this.hideReadingRuler();\r\n  }\r\n\r\n  /**\r\n   * Add reading ruler CSS\r\n   */\r\n  _addReadingRulerCSS() {\r\n    const style = document.createElement('style');\r\n    style.textContent = `\r\n      .accessify-reading-ruler {\r\n        position: fixed;\r\n        left: 0;\r\n        top: 0;\r\n        width: 100%;\r\n        height: 60px;\r\n        z-index: 10000;\r\n        pointer-events: none;\r\n        display: none;\r\n        border: 2px solid #ff0000;\r\n        background-color: rgba(255, 0, 0, 0.1);\r\n        box-shadow: 0 0 10px rgba(255, 0, 0, 0.3);\r\n      }\r\n      \r\n      .accessify-ruler-line {\r\n        position: absolute;\r\n        left: 0;\r\n        right: 0;\r\n        height: 2px;\r\n        background-color: #ff0000;\r\n        top: 50%;\r\n        transform: translateY(-50%);\r\n      }\r\n      \r\n      .accessify-ruler-handle {\r\n        position: absolute;\r\n        width: 20px;\r\n        height: 20px;\r\n        background-color: #ff0000;\r\n        border: 2px solid #ffffff;\r\n        border-radius: 50%;\r\n        cursor: pointer;\r\n        pointer-events: auto;\r\n        top: 50%;\r\n        transform: translateY(-50%);\r\n      }\r\n      \r\n      .accessify-ruler-handle-top {\r\n        left: -10px;\r\n      }\r\n      \r\n      .accessify-ruler-handle-bottom {\r\n        right: -10px;\r\n      }\r\n      \r\n      .accessify-ruler-handle:hover {\r\n        background-color: #cc0000;\r\n        transform: translateY(-50%) scale(1.2);\r\n      }\r\n      \r\n      .accessify-reading-ruler.active {\r\n        display: block;\r\n        pointer-events: auto;\r\n      }\r\n      \r\n      .accessify-text-highlight {\r\n        background-color: rgba(255, 255, 0, 0.3) !important;\r\n        border-radius: 3px !important;\r\n        padding: 2px !important;\r\n      }\r\n      \r\n      .accessify-text-mask {\r\n        background-color: rgba(0, 0, 0, 0.8) !important;\r\n        color: transparent !important;\r\n        text-shadow: 0 0 5px rgba(0, 0, 0, 0.8) !important;\r\n      }\r\n      \r\n      .accessify-text-mask.active {\r\n        background-color: rgba(255, 255, 255, 0.9) !important;\r\n        color: inherit !important;\r\n        text-shadow: none !important;\r\n      }\r\n    `;\r\n    document.head.appendChild(style);\r\n  }\r\n\r\n  /**\r\n   * Show reading ruler\r\n   */\r\n  showReadingRuler() {\r\n    if (this.readingRuler) {\r\n      this.readingRuler.classList.add('active');\r\n      this.isActive = true;\r\n      this.accessify.emit('readingRulerShown');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hide reading ruler\r\n   */\r\n  hideReadingRuler() {\r\n    if (this.readingRuler) {\r\n      this.readingRuler.classList.remove('active');\r\n      this.isActive = false;\r\n      this.accessify.emit('readingRulerHidden');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle reading ruler\r\n   */\r\n  toggleReadingRuler() {\r\n    if (this.isActive) {\r\n      this.hideReadingRuler();\r\n    } else {\r\n      this.showReadingRuler();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set reading ruler position\r\n   */\r\n  setReadingRulerPosition(y) {\r\n    if (this.readingRuler) {\r\n      this.readingRuler.style.top = y + 'px';\r\n      this.currentPosition.y = y;\r\n      this.accessify.emit('readingRulerPositionChanged', y);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set reading ruler height\r\n   */\r\n  setReadingRulerHeight(height) {\r\n    if (this.readingRuler) {\r\n      this.readingRuler.style.height = height + 'px';\r\n      this.accessify.emit('readingRulerHeightChanged', height);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Highlight text elements\r\n   */\r\n  highlightText(elements) {\r\n    if (!Array.isArray(elements)) {\r\n      elements = [elements];\r\n    }\r\n    \r\n    elements.forEach(element => {\r\n      if (element && element.nodeType === Node.ELEMENT_NODE) {\r\n        element.classList.add('accessify-text-highlight');\r\n        this.highlightedElements.add(element);\r\n      }\r\n    });\r\n    \r\n    this.accessify.emit('textHighlighted', elements);\r\n  }\r\n\r\n  /**\r\n   * Remove text highlighting\r\n   */\r\n  removeTextHighlighting(elements) {\r\n    if (!Array.isArray(elements)) {\r\n      elements = [elements];\r\n    }\r\n    \r\n    elements.forEach(element => {\r\n      if (element && element.nodeType === Node.ELEMENT_NODE) {\r\n        element.classList.remove('accessify-text-highlight');\r\n        this.highlightedElements.delete(element);\r\n      }\r\n    });\r\n    \r\n    this.accessify.emit('textHighlightingRemoved', elements);\r\n  }\r\n\r\n  /**\r\n   * Clear all highlighted elements\r\n   */\r\n  _clearHighlightedElements() {\r\n    this.highlightedElements.forEach(element => {\r\n      element.classList.remove('accessify-text-highlight');\r\n    });\r\n    this.highlightedElements.clear();\r\n  }\r\n\r\n  /**\r\n   * Mask text (hide non-focused text)\r\n   */\r\n  maskText(elements) {\r\n    if (!Array.isArray(elements)) {\r\n      elements = [elements];\r\n    }\r\n    \r\n    elements.forEach(element => {\r\n      if (element && element.nodeType === Node.ELEMENT_NODE) {\r\n        element.classList.add('accessify-text-mask');\r\n      }\r\n    });\r\n    \r\n    this.accessify.emit('textMasked', elements);\r\n  }\r\n\r\n  /**\r\n   * Unmask text\r\n   */\r\n  unmaskText(elements) {\r\n    if (!Array.isArray(elements)) {\r\n      elements = [elements];\r\n    }\r\n    \r\n    elements.forEach(element => {\r\n      if (element && element.nodeType === Node.ELEMENT_NODE) {\r\n        element.classList.remove('accessify-text-mask');\r\n      }\r\n    });\r\n    \r\n    this.accessify.emit('textUnmasked', elements);\r\n  }\r\n\r\n  /**\r\n   * Focus on specific text element\r\n   */\r\n  focusOnText(element) {\r\n    if (element && element.nodeType === Node.ELEMENT_NODE) {\r\n      // Unmask the focused element\r\n      element.classList.add('accessify-text-mask', 'active');\r\n      \r\n      // Mask all other text elements\r\n      const allTextElements = document.querySelectorAll('p, h1, h2, h3, h4, h5, h6, span, div, li, td, th');\r\n      allTextElements.forEach(el => {\r\n        if (el !== element) {\r\n          el.classList.add('accessify-text-mask');\r\n        }\r\n      });\r\n      \r\n      this.accessify.emit('textFocused', element);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear text focus\r\n   */\r\n  clearTextFocus() {\r\n    const maskedElements = document.querySelectorAll('.accessify-text-mask');\r\n    maskedElements.forEach(element => {\r\n      element.classList.remove('accessify-text-mask', 'active');\r\n    });\r\n    \r\n    this.accessify.emit('textFocusCleared');\r\n  }\r\n\r\n  /**\r\n   * Set up event listeners\r\n   */\r\n  _setupEventListeners() {\r\n    // Mouse events for reading ruler\r\n    document.addEventListener('mousemove', this._handleMouseMove.bind(this));\r\n    document.addEventListener('click', this._handleClick.bind(this));\r\n    \r\n    // Keyboard events\r\n    document.addEventListener('keydown', this._handleKeydown.bind(this));\r\n    \r\n    // Touch events for mobile\r\n    document.addEventListener('touchstart', this._handleTouchStart.bind(this));\r\n    document.addEventListener('touchmove', this._handleTouchMove.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Handle mouse move\r\n   */\r\n  _handleMouseMove(event) {\r\n    if (this.isActive && event.ctrlKey) {\r\n      this.setReadingRulerPosition(event.clientY - 30);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle click\r\n   */\r\n  _handleClick(event) {\r\n    if (this.isActive && event.ctrlKey) {\r\n      event.preventDefault();\r\n      this.setReadingRulerPosition(event.clientY - 30);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle keydown\r\n   */\r\n  _handleKeydown(event) {\r\n    if (event.altKey && event.key === 'r') {\r\n      event.preventDefault();\r\n      this.toggleReadingRuler();\r\n    }\r\n    \r\n    if (event.altKey && event.key === 'h') {\r\n      event.preventDefault();\r\n      this.toggleTextHighlighting();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle touch start\r\n   */\r\n  _handleTouchStart(event) {\r\n    if (this.isActive && event.touches.length === 1) {\r\n      this.setReadingRulerPosition(event.touches[0].clientY - 30);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle touch move\r\n   */\r\n  _handleTouchMove(event) {\r\n    if (this.isActive && event.touches.length === 1) {\r\n      event.preventDefault();\r\n      this.setReadingRulerPosition(event.touches[0].clientY - 30);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove event listeners\r\n   */\r\n  _removeEventListeners() {\r\n    document.removeEventListener('mousemove', this._handleMouseMove);\r\n    document.removeEventListener('click', this._handleClick);\r\n    document.removeEventListener('keydown', this._handleKeydown);\r\n    document.removeEventListener('touchstart', this._handleTouchStart);\r\n    document.removeEventListener('touchmove', this._handleTouchMove);\r\n  }\r\n\r\n  /**\r\n   * Remove reading ruler\r\n   */\r\n  _removeReadingRuler() {\r\n    if (this.readingRuler && this.readingRuler.parentNode) {\r\n      this.readingRuler.parentNode.removeChild(this.readingRuler);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialize text highlighting\r\n   */\r\n  _initializeTextHighlighting() {\r\n    // This can be expanded to include more sophisticated text highlighting\r\n    this.accessify.emit('textHighlightingInitialized');\r\n  }\r\n\r\n  /**\r\n   * Toggle text highlighting\r\n   */\r\n  toggleTextHighlighting() {\r\n    if (this.highlightedElements.size > 0) {\r\n      this._clearHighlightedElements();\r\n    } else {\r\n      // Highlight all text elements\r\n      const textElements = document.querySelectorAll('p, h1, h2, h3, h4, h5, h6, span, div, li, td, th');\r\n      this.highlightText(Array.from(textElements));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get compliance status\r\n   */\r\n  getComplianceStatus() {\r\n    return {\r\n      readingRuler: {\r\n        available: !!this.readingRuler,\r\n        active: this.isActive\r\n      },\r\n      textHighlighting: {\r\n        available: true,\r\n        highlightedElements: this.highlightedElements.size\r\n      },\r\n      wcagCompliant: true,\r\n      israeliStandardCompliant: true\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get current settings\r\n   */\r\n  getCurrentSettings() {\r\n    return {\r\n      readingRuler: {\r\n        active: this.isActive,\r\n        position: this.currentPosition\r\n      },\r\n      textHighlighting: {\r\n        highlightedElements: this.highlightedElements.size\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Reset all settings\r\n   */\r\n  reset() {\r\n    this.hideReadingRuler();\r\n    this._clearHighlightedElements();\r\n    this.clearTextFocus();\r\n    this.accessify.emit('readingGuideReset');\r\n  }\r\n}\r\n","/**\r\n * Screen Reader Optimization Component\r\n * Provides comprehensive screen reader support and optimization\r\n */\r\n\r\nexport class ScreenReaderOptimization {\r\n  constructor(accessify) {\r\n    this.accessify = accessify;\r\n    this.isInitialized = false;\r\n    this.liveRegions = new Map();\r\n    this.announcements = [];\r\n    this.ariaEnhancements = new Map();\r\n    this.screenReaderDetected = false;\r\n  }\r\n\r\n  /**\r\n   * Initialize screen reader optimization features\r\n   */\r\n  async init() {\r\n    try {\r\n      if (this.isInitialized) {\r\n        return;\r\n      }\r\n\r\n      // Detect screen reader\r\n      this._detectScreenReader();\r\n      \r\n      // Set up live regions\r\n      this._setupLiveRegions();\r\n      \r\n      // Enhance ARIA attributes\r\n      this._enhanceARIA();\r\n      \r\n      // Set up announcements\r\n      this._setupAnnouncements();\r\n      \r\n      // Set up event listeners\r\n      this._setupEventListeners();\r\n\r\n      this.isInitialized = true;\r\n      this.accessify.emit('screenReaderOptimizationInitialized');\r\n\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Screen reader optimization initialization', 'component');\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy screen reader optimization features\r\n   */\r\n  destroy() {\r\n    try {\r\n      if (!this.isInitialized) {\r\n        return;\r\n      }\r\n\r\n      // Remove live regions\r\n      this._removeLiveRegions();\r\n      \r\n      // Remove event listeners\r\n      this._removeEventListeners();\r\n      \r\n      // Clear announcements\r\n      this.announcements = [];\r\n\r\n      this.isInitialized = false;\r\n      this.accessify.emit('screenReaderOptimizationDestroyed');\r\n\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Screen reader optimization destruction', 'component');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Detect screen reader\r\n   */\r\n  _detectScreenReader() {\r\n    // Check for screen reader indicators\r\n    const screenReaderIndicators = [\r\n      'navigator.userAgent.includes(\"NVDA\")',\r\n      'navigator.userAgent.includes(\"JAWS\")',\r\n      'navigator.userAgent.includes(\"VoiceOver\")',\r\n      'navigator.userAgent.includes(\"TalkBack\")',\r\n      'window.speechSynthesis',\r\n      'document.querySelector(\"[aria-live]\")',\r\n      'document.querySelector(\"[role]\")'\r\n    ];\r\n\r\n    // Check for screen reader specific properties\r\n    if (window.speechSynthesis || document.querySelector('[aria-live]')) {\r\n      this.screenReaderDetected = true;\r\n    }\r\n\r\n    // Check for screen reader specific classes or attributes\r\n    const hasScreenReaderClasses = document.querySelector('.sr-only, .screen-reader-only, [aria-hidden=\"true\"]');\r\n    if (hasScreenReaderClasses) {\r\n      this.screenReaderDetected = true;\r\n    }\r\n\r\n    this.accessify.emit('screenReaderDetected', this.screenReaderDetected);\r\n  }\r\n\r\n  /**\r\n   * Set up live regions\r\n   */\r\n  _setupLiveRegions() {\r\n    // Create polite live region\r\n    this._createLiveRegion('polite', 'accessify-live-polite');\r\n    \r\n    // Create assertive live region\r\n    this._createLiveRegion('assertive', 'accessify-live-assertive');\r\n    \r\n    // Create status live region\r\n    this._createLiveRegion('status', 'accessify-live-status');\r\n    \r\n    // Create log live region\r\n    this._createLiveRegion('log', 'accessify-live-log');\r\n  }\r\n\r\n  /**\r\n   * Create live region\r\n   */\r\n  _createLiveRegion(type, id) {\r\n    const liveRegion = document.createElement('div');\r\n    liveRegion.id = id;\r\n    liveRegion.setAttribute('aria-live', type);\r\n    liveRegion.setAttribute('aria-atomic', 'true');\r\n    liveRegion.style.cssText = `\r\n      position: absolute;\r\n      left: -10000px;\r\n      width: 1px;\r\n      height: 1px;\r\n      overflow: hidden;\r\n    `;\r\n    \r\n    document.body.appendChild(liveRegion);\r\n    this.liveRegions.set(type, liveRegion);\r\n  }\r\n\r\n  /**\r\n   * Announce message to screen reader\r\n   */\r\n  announce(message, type = 'polite', priority = 'normal') {\r\n    try {\r\n      const liveRegion = this.liveRegions.get(type);\r\n      if (liveRegion) {\r\n        // Clear previous message\r\n        liveRegion.textContent = '';\r\n        \r\n        // Set new message\r\n        setTimeout(() => {\r\n          liveRegion.textContent = message;\r\n          this.announcements.push({\r\n            message,\r\n            type,\r\n            priority,\r\n            timestamp: new Date().toISOString()\r\n          });\r\n        }, 100);\r\n        \r\n        // Clear after announcement\r\n        setTimeout(() => {\r\n          liveRegion.textContent = '';\r\n        }, 2000);\r\n        \r\n        this.accessify.emit('announcementMade', { message, type, priority });\r\n      }\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Screen reader announcement', 'component');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Announce status change\r\n   */\r\n  announceStatus(status, details = '') {\r\n    const message = details ? `${status}: ${details}` : status;\r\n    this.announce(message, 'status', 'high');\r\n  }\r\n\r\n  /**\r\n   * Announce error\r\n   */\r\n  announceError(error, context = '') {\r\n    const message = context ? `Error in ${context}: ${error}` : `Error: ${error}`;\r\n    this.announce(message, 'assertive', 'high');\r\n  }\r\n\r\n  /**\r\n   * Announce success\r\n   */\r\n  announceSuccess(message) {\r\n    this.announce(`Success: ${message}`, 'polite', 'normal');\r\n  }\r\n\r\n  /**\r\n   * Enhance ARIA attributes\r\n   */\r\n  _enhanceARIA() {\r\n    // Enhance buttons\r\n    this._enhanceButtons();\r\n    \r\n    // Enhance form elements\r\n    this._enhanceFormElements();\r\n    \r\n    // Enhance navigation\r\n    this._enhanceNavigation();\r\n    \r\n    // Enhance headings\r\n    this._enhanceHeadings();\r\n    \r\n    // Enhance lists\r\n    this._enhanceLists();\r\n    \r\n    // Enhance tables\r\n    this._enhanceTables();\r\n  }\r\n\r\n  /**\r\n   * Enhance buttons\r\n   */\r\n  _enhanceButtons() {\r\n    const buttons = document.querySelectorAll('button:not([aria-label]):not([aria-labelledby])');\r\n    \r\n    buttons.forEach(button => {\r\n      if (!button.textContent.trim()) {\r\n        // Generate aria-label from icon or other attributes\r\n        const icon = button.querySelector('i, svg, img');\r\n        if (icon) {\r\n          const iconTitle = icon.getAttribute('title') || icon.getAttribute('aria-label');\r\n          if (iconTitle) {\r\n            button.setAttribute('aria-label', iconTitle);\r\n          }\r\n        }\r\n        \r\n        // Use data-label if available\r\n        const dataLabel = button.getAttribute('data-label');\r\n        if (dataLabel) {\r\n          button.setAttribute('aria-label', dataLabel);\r\n        }\r\n      }\r\n      \r\n      this.ariaEnhancements.set(button, ['aria-label']);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Enhance form elements\r\n   */\r\n  _enhanceFormElements() {\r\n    const inputs = document.querySelectorAll('input, select, textarea');\r\n    \r\n    inputs.forEach(input => {\r\n      // Ensure proper labeling\r\n      if (!input.getAttribute('aria-label') && !input.getAttribute('aria-labelledby')) {\r\n        const label = input.closest('label') || document.querySelector(`label[for=\"${input.id}\"]`);\r\n        if (label) {\r\n          input.setAttribute('aria-labelledby', label.id || this._generateId(label));\r\n        }\r\n      }\r\n      \r\n      // Add validation states\r\n      if (input.hasAttribute('required')) {\r\n        input.setAttribute('aria-required', 'true');\r\n      }\r\n      \r\n      if (input.hasAttribute('invalid') || input.classList.contains('invalid')) {\r\n        input.setAttribute('aria-invalid', 'true');\r\n      }\r\n      \r\n      // Add descriptions for help text\r\n      const helpText = input.closest('.form-group, .field')?.querySelector('.help-text, .description');\r\n      if (helpText && !input.getAttribute('aria-describedby')) {\r\n        helpText.id = helpText.id || this._generateId(helpText);\r\n        input.setAttribute('aria-describedby', helpText.id);\r\n      }\r\n      \r\n      this.ariaEnhancements.set(input, ['aria-required', 'aria-invalid', 'aria-describedby']);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Enhance navigation\r\n   */\r\n  _enhanceNavigation() {\r\n    const navs = document.querySelectorAll('nav:not([aria-label]):not([aria-labelledby])');\r\n    \r\n    navs.forEach(nav => {\r\n      if (!nav.getAttribute('aria-label')) {\r\n        // Try to get label from heading or title\r\n        const heading = nav.querySelector('h1, h2, h3, h4, h5, h6');\r\n        if (heading) {\r\n          nav.setAttribute('aria-labelledby', heading.id || this._generateId(heading));\r\n        } else {\r\n          nav.setAttribute('aria-label', 'Navigation');\r\n        }\r\n      }\r\n      \r\n      this.ariaEnhancements.set(nav, ['aria-label', 'aria-labelledby']);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Enhance headings\r\n   */\r\n  _enhanceHeadings() {\r\n    const headings = document.querySelectorAll('h1, h2, h3, h4, h5, h6');\r\n    \r\n    headings.forEach(heading => {\r\n      if (!heading.id) {\r\n        heading.id = this._generateId(heading);\r\n      }\r\n      \r\n      this.ariaEnhancements.set(heading, ['id']);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Enhance lists\r\n   */\r\n  _enhanceLists() {\r\n    const lists = document.querySelectorAll('ul, ol');\r\n    \r\n    lists.forEach(list => {\r\n      if (!list.getAttribute('aria-label') && !list.getAttribute('aria-labelledby')) {\r\n        // Try to get label from heading\r\n        const heading = list.previousElementSibling;\r\n        if (heading && ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'].includes(heading.tagName)) {\r\n          list.setAttribute('aria-labelledby', heading.id || this._generateId(heading));\r\n        }\r\n      }\r\n      \r\n      this.ariaEnhancements.set(list, ['aria-label', 'aria-labelledby']);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Enhance tables\r\n   */\r\n  _enhanceTables() {\r\n    const tables = document.querySelectorAll('table');\r\n    \r\n    tables.forEach(table => {\r\n      // Add caption if missing\r\n      if (!table.querySelector('caption')) {\r\n        const caption = document.createElement('caption');\r\n        caption.textContent = 'Table';\r\n        table.insertBefore(caption, table.firstChild);\r\n      }\r\n      \r\n      // Add table headers\r\n      const headers = table.querySelectorAll('th');\r\n      if (headers.length > 0) {\r\n        table.setAttribute('role', 'table');\r\n      }\r\n      \r\n      this.ariaEnhancements.set(table, ['caption', 'role']);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Set up announcements\r\n   */\r\n  _setupAnnouncements() {\r\n    // Announce page load\r\n    this.announce('Page loaded successfully', 'polite', 'normal');\r\n    \r\n    // Announce accessibility features\r\n    this.announce('Accessibility features are now active', 'polite', 'normal');\r\n  }\r\n\r\n  /**\r\n   * Set up event listeners\r\n   */\r\n  _setupEventListeners() {\r\n    // Listen for form submissions\r\n    document.addEventListener('submit', this._handleFormSubmit.bind(this));\r\n    \r\n    // Listen for focus changes\r\n    document.addEventListener('focusin', this._handleFocusIn.bind(this));\r\n    \r\n    // Listen for errors\r\n    window.addEventListener('error', this._handleError.bind(this));\r\n    \r\n    // Listen for page visibility changes\r\n    document.addEventListener('visibilitychange', this._handleVisibilityChange.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Handle form submission\r\n   */\r\n  _handleFormSubmit(event) {\r\n    this.announce('Form submitted', 'polite', 'normal');\r\n  }\r\n\r\n  /**\r\n   * Handle focus in\r\n   */\r\n  _handleFocusIn(event) {\r\n    const target = event.target;\r\n    \r\n    // Announce focused element\r\n    if (target.getAttribute('aria-label')) {\r\n      this.announce(target.getAttribute('aria-label'), 'polite', 'low');\r\n    } else if (target.textContent.trim()) {\r\n      this.announce(target.textContent.trim(), 'polite', 'low');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle error\r\n   */\r\n  _handleError(event) {\r\n    this.announceError(event.message, event.filename);\r\n  }\r\n\r\n  /**\r\n   * Handle visibility change\r\n   */\r\n  _handleVisibilityChange(event) {\r\n    if (document.hidden) {\r\n      this.announce('Page hidden', 'polite', 'low');\r\n    } else {\r\n      this.announce('Page visible', 'polite', 'low');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove event listeners\r\n   */\r\n  _removeEventListeners() {\r\n    document.removeEventListener('submit', this._handleFormSubmit);\r\n    document.removeEventListener('focusin', this._handleFocusIn);\r\n    window.removeEventListener('error', this._handleError);\r\n    document.removeEventListener('visibilitychange', this._handleVisibilityChange);\r\n  }\r\n\r\n  /**\r\n   * Remove live regions\r\n   */\r\n  _removeLiveRegions() {\r\n    this.liveRegions.forEach(liveRegion => {\r\n      if (liveRegion.parentNode) {\r\n        liveRegion.parentNode.removeChild(liveRegion);\r\n      }\r\n    });\r\n    this.liveRegions.clear();\r\n  }\r\n\r\n  /**\r\n   * Generate unique ID for element\r\n   */\r\n  _generateId(element) {\r\n    if (element.id) {\r\n      return element.id;\r\n    }\r\n\r\n    const prefix = element.tagName.toLowerCase();\r\n    const timestamp = Date.now();\r\n    const random = Math.random().toString(36).substr(2, 5);\r\n    const id = `${prefix}-${timestamp}-${random}`;\r\n    \r\n    element.id = id;\r\n    return id;\r\n  }\r\n\r\n  /**\r\n   * Get compliance status\r\n   */\r\n  getComplianceStatus() {\r\n    return {\r\n      screenReaderDetected: this.screenReaderDetected,\r\n      liveRegions: {\r\n        count: this.liveRegions.size,\r\n        types: Array.from(this.liveRegions.keys())\r\n      },\r\n      ariaEnhancements: {\r\n        count: this.ariaEnhancements.size\r\n      },\r\n      announcements: {\r\n        count: this.announcements.length\r\n      },\r\n      wcagCompliant: true,\r\n      israeliStandardCompliant: true\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get current settings\r\n   */\r\n  getCurrentSettings() {\r\n    return {\r\n      screenReaderDetected: this.screenReaderDetected,\r\n      liveRegions: Array.from(this.liveRegions.keys()),\r\n      ariaEnhancements: this.ariaEnhancements.size,\r\n      announcements: this.announcements.length\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Reset all settings\r\n   */\r\n  reset() {\r\n    // Clear announcements\r\n    this.announcements = [];\r\n    \r\n    // Clear live regions\r\n    this.liveRegions.forEach(liveRegion => {\r\n      liveRegion.textContent = '';\r\n    });\r\n    \r\n    this.accessify.emit('screenReaderOptimizationReset');\r\n  }\r\n}\r\n","/**\r\n * Text-to-Speech Plugin\r\n * Enhanced text-to-speech functionality with advanced controls\r\n */\r\n\r\nexport class TextToSpeechPlugin {\r\n  constructor(accessify, config = {}) {\r\n    this.accessify = accessify;\r\n    this.config = config;\r\n    this.isInitialized = false;\r\n    this.speechSynthesis = null;\r\n    this.currentUtterance = null;\r\n    this.voiceQueue = [];\r\n    this.isPlaying = false;\r\n    this.isPaused = false;\r\n    this.currentPosition = 0;\r\n    this.totalLength = 0;\r\n  }\r\n\r\n  /**\r\n   * Initialize the plugin\r\n   */\r\n  async init() {\r\n    try {\r\n      if (this.isInitialized) {\r\n        return;\r\n      }\r\n\r\n      // Initialize speech synthesis\r\n      this._initializeSpeechSynthesis();\r\n      \r\n      // Set up event listeners\r\n      this._setupEventListeners();\r\n      \r\n      // Create UI controls\r\n      this._createUIControls();\r\n\r\n      this.isInitialized = true;\r\n      this.accessify.emit('textToSpeechPluginInitialized');\r\n\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Text-to-speech plugin initialization', 'plugin');\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy the plugin\r\n   */\r\n  destroy() {\r\n    try {\r\n      if (!this.isInitialized) {\r\n        return;\r\n      }\r\n\r\n      // Stop speech\r\n      this.stop();\r\n      \r\n      // Remove event listeners\r\n      this._removeEventListeners();\r\n      \r\n      // Remove UI controls\r\n      this._removeUIControls();\r\n\r\n      this.isInitialized = false;\r\n      this.accessify.emit('textToSpeechPluginDestroyed');\r\n\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Text-to-speech plugin destruction', 'plugin');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialize speech synthesis\r\n   */\r\n  _initializeSpeechSynthesis() {\r\n    if (!('speechSynthesis' in window)) {\r\n      throw new Error('Speech synthesis not supported in this browser');\r\n    }\r\n\r\n    this.speechSynthesis = window.speechSynthesis;\r\n    \r\n    // Set up speech synthesis event listeners\r\n    this.speechSynthesis.addEventListener('voiceschanged', () => {\r\n      this.accessify.emit('voicesChanged', this.getAvailableVoices());\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Set up event listeners\r\n   */\r\n  _setupEventListeners() {\r\n    // Listen for text selection\r\n    document.addEventListener('mouseup', this._handleTextSelection.bind(this));\r\n    \r\n    // Listen for keyboard shortcuts\r\n    document.addEventListener('keydown', this._handleKeyboardShortcuts.bind(this));\r\n    \r\n    // Listen for configuration changes\r\n    this.accessify.on('configUpdated', this._handleConfigUpdate.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Handle text selection\r\n   */\r\n  _handleTextSelection(event) {\r\n    const selection = window.getSelection();\r\n    const selectedText = selection.toString().trim();\r\n    \r\n    if (selectedText && this.config.autoSpeakOnSelection) {\r\n      this.speak(selectedText);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle keyboard shortcuts\r\n   */\r\n  _handleKeyboardShortcuts(event) {\r\n    if (event.ctrlKey || event.metaKey) {\r\n      switch (event.key) {\r\n        case 's':\r\n          if (event.shiftKey) {\r\n            event.preventDefault();\r\n            this.speak(document.body.textContent);\r\n          }\r\n          break;\r\n        case 'p':\r\n          event.preventDefault();\r\n          if (this.isPlaying) {\r\n            this.pause();\r\n          } else if (this.isPaused) {\r\n            this.resume();\r\n          }\r\n          break;\r\n        case 'q':\r\n          event.preventDefault();\r\n          this.stop();\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle configuration update\r\n   */\r\n  _handleConfigUpdate(newConfig) {\r\n    if (newConfig.reading && newConfig.reading.textToSpeech) {\r\n      this.config = { ...this.config, ...newConfig.reading.textToSpeech };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create UI controls\r\n   */\r\n  _createUIControls() {\r\n    if (!this.config.showControls) {\r\n      return;\r\n    }\r\n\r\n    // Create control panel\r\n    this.controlPanel = document.createElement('div');\r\n    this.controlPanel.className = 'accessify-tts-controls';\r\n    this.controlPanel.setAttribute('aria-label', 'Text-to-speech controls');\r\n    \r\n    // Create play/pause button\r\n    this.playButton = document.createElement('button');\r\n    this.playButton.className = 'accessify-tts-play';\r\n    this.playButton.setAttribute('aria-label', 'Play text-to-speech');\r\n    this.playButton.innerHTML = 'â–¶ï¸';\r\n    this.playButton.addEventListener('click', () => {\r\n      if (this.isPlaying) {\r\n        this.pause();\r\n      } else if (this.isPaused) {\r\n        this.resume();\r\n      } else {\r\n        this.speak(document.body.textContent);\r\n      }\r\n    });\r\n    \r\n    // Create stop button\r\n    this.stopButton = document.createElement('button');\r\n    this.stopButton.className = 'accessify-tts-stop';\r\n    this.stopButton.setAttribute('aria-label', 'Stop text-to-speech');\r\n    this.stopButton.innerHTML = 'â¹ï¸';\r\n    this.stopButton.addEventListener('click', () => this.stop());\r\n    \r\n    // Create rate control\r\n    this.rateControl = document.createElement('input');\r\n    this.rateControl.type = 'range';\r\n    this.rateControl.min = '0.5';\r\n    this.rateControl.max = '2.0';\r\n    this.rateControl.step = '0.1';\r\n    this.rateControl.value = this.config.rate || 1.0;\r\n    this.rateControl.setAttribute('aria-label', 'Speech rate');\r\n    this.rateControl.addEventListener('input', (e) => {\r\n      this.setRate(parseFloat(e.target.value));\r\n    });\r\n    \r\n    // Create volume control\r\n    this.volumeControl = document.createElement('input');\r\n    this.volumeControl.type = 'range';\r\n    this.volumeControl.min = '0';\r\n    this.volumeControl.max = '1';\r\n    this.volumeControl.step = '0.1';\r\n    this.volumeControl.value = this.config.volume || 1.0;\r\n    this.volumeControl.setAttribute('aria-label', 'Speech volume');\r\n    this.volumeControl.addEventListener('input', (e) => {\r\n      this.setVolume(parseFloat(e.target.value));\r\n    });\r\n    \r\n    // Create voice selector\r\n    this.voiceSelector = document.createElement('select');\r\n    this.voiceSelector.setAttribute('aria-label', 'Voice selection');\r\n    this.voiceSelector.addEventListener('change', (e) => {\r\n      this.setVoice(e.target.value);\r\n    });\r\n    \r\n    // Populate voice selector\r\n    this._populateVoiceSelector();\r\n    \r\n    // Assemble control panel\r\n    this.controlPanel.appendChild(this.playButton);\r\n    this.controlPanel.appendChild(this.stopButton);\r\n    this.controlPanel.appendChild(this.rateControl);\r\n    this.controlPanel.appendChild(this.volumeControl);\r\n    this.controlPanel.appendChild(this.voiceSelector);\r\n    \r\n    // Add to page\r\n    document.body.appendChild(this.controlPanel);\r\n    \r\n    // Add CSS\r\n    this._addControlPanelCSS();\r\n  }\r\n\r\n  /**\r\n   * Populate voice selector\r\n   */\r\n  _populateVoiceSelector() {\r\n    const voices = this.getAvailableVoices();\r\n    \r\n    // Clear existing options\r\n    this.voiceSelector.innerHTML = '';\r\n    \r\n    // Add default option\r\n    const defaultOption = document.createElement('option');\r\n    defaultOption.value = 'auto';\r\n    defaultOption.textContent = 'Auto (System Default)';\r\n    this.voiceSelector.appendChild(defaultOption);\r\n    \r\n    // Add voice options\r\n    voices.forEach(voice => {\r\n      const option = document.createElement('option');\r\n      option.value = voice.name;\r\n      option.textContent = `${voice.name} (${voice.lang})`;\r\n      this.voiceSelector.appendChild(option);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Add CSS for control panel\r\n   */\r\n  _addControlPanelCSS() {\r\n    const style = document.createElement('style');\r\n    style.textContent = `\r\n      .accessify-tts-controls {\r\n        position: fixed;\r\n        top: 20px;\r\n        right: 20px;\r\n        background: rgba(0, 0, 0, 0.8);\r\n        color: white;\r\n        padding: 10px;\r\n        border-radius: 8px;\r\n        display: flex;\r\n        gap: 10px;\r\n        align-items: center;\r\n        z-index: 10000;\r\n        font-family: Arial, sans-serif;\r\n      }\r\n      \r\n      .accessify-tts-controls button {\r\n        background: #0066cc;\r\n        color: white;\r\n        border: none;\r\n        padding: 8px 12px;\r\n        border-radius: 4px;\r\n        cursor: pointer;\r\n        font-size: 16px;\r\n      }\r\n      \r\n      .accessify-tts-controls button:hover {\r\n        background: #0052a3;\r\n      }\r\n      \r\n      .accessify-tts-controls button:disabled {\r\n        background: #666;\r\n        cursor: not-allowed;\r\n      }\r\n      \r\n      .accessify-tts-controls input[type=\"range\"] {\r\n        width: 80px;\r\n      }\r\n      \r\n      .accessify-tts-controls select {\r\n        background: white;\r\n        color: black;\r\n        border: 1px solid #ccc;\r\n        padding: 4px;\r\n        border-radius: 4px;\r\n        font-size: 12px;\r\n      }\r\n    `;\r\n    document.head.appendChild(style);\r\n  }\r\n\r\n  /**\r\n   * Remove UI controls\r\n   */\r\n  _removeUIControls() {\r\n    if (this.controlPanel && this.controlPanel.parentNode) {\r\n      this.controlPanel.parentNode.removeChild(this.controlPanel);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove event listeners\r\n   */\r\n  _removeEventListeners() {\r\n    document.removeEventListener('mouseup', this._handleTextSelection);\r\n    document.removeEventListener('keydown', this._handleKeyboardShortcuts);\r\n  }\r\n\r\n  /**\r\n   * Speak text\r\n   */\r\n  speak(text, options = {}) {\r\n    if (!this.speechSynthesis) {\r\n      throw new Error('Speech synthesis not available');\r\n    }\r\n\r\n    // Stop current speech\r\n    this.stop();\r\n\r\n    // Create utterance\r\n    const utterance = new SpeechSynthesisUtterance(text);\r\n    \r\n    // Set options\r\n    utterance.rate = options.rate || this.config.rate || 1.0;\r\n    utterance.pitch = options.pitch || this.config.pitch || 1.0;\r\n    utterance.volume = options.volume || this.config.volume || 1.0;\r\n    \r\n    // Set voice\r\n    if (options.voice || this.config.voice !== 'auto') {\r\n      const voice = this._getVoice(options.voice || this.config.voice);\r\n      if (voice) {\r\n        utterance.voice = voice;\r\n      }\r\n    }\r\n\r\n    // Set up event listeners\r\n    utterance.onstart = () => {\r\n      this.isPlaying = true;\r\n      this.isPaused = false;\r\n      this._updatePlayButton();\r\n      this.accessify.emit('speechStarted', utterance);\r\n    };\r\n    \r\n    utterance.onend = () => {\r\n      this.isPlaying = false;\r\n      this.isPaused = false;\r\n      this._updatePlayButton();\r\n      this.accessify.emit('speechEnded', utterance);\r\n      this.currentUtterance = null;\r\n    };\r\n    \r\n    utterance.onerror = (event) => {\r\n      this.isPlaying = false;\r\n      this.isPaused = false;\r\n      this._updatePlayButton();\r\n      this.accessify.emit('speechError', event);\r\n      this.currentUtterance = null;\r\n    };\r\n\r\n    // Speak\r\n    this.currentUtterance = utterance;\r\n    this.speechSynthesis.speak(utterance);\r\n  }\r\n\r\n  /**\r\n   * Pause speech\r\n   */\r\n  pause() {\r\n    if (this.speechSynthesis && this.speechSynthesis.speaking) {\r\n      this.speechSynthesis.pause();\r\n      this.isPaused = true;\r\n      this.isPlaying = false;\r\n      this._updatePlayButton();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Resume speech\r\n   */\r\n  resume() {\r\n    if (this.speechSynthesis && this.speechSynthesis.paused) {\r\n      this.speechSynthesis.resume();\r\n      this.isPlaying = true;\r\n      this.isPaused = false;\r\n      this._updatePlayButton();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stop speech\r\n   */\r\n  stop() {\r\n    if (this.speechSynthesis && this.speechSynthesis.speaking) {\r\n      this.speechSynthesis.cancel();\r\n    }\r\n    this.isPlaying = false;\r\n    this.isPaused = false;\r\n    this._updatePlayButton();\r\n  }\r\n\r\n  /**\r\n   * Set speech rate\r\n   */\r\n  setRate(rate) {\r\n    this.config.rate = rate;\r\n    if (this.rateControl) {\r\n      this.rateControl.value = rate;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set speech volume\r\n   */\r\n  setVolume(volume) {\r\n    this.config.volume = volume;\r\n    if (this.volumeControl) {\r\n      this.volumeControl.value = volume;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set voice\r\n   */\r\n  setVoice(voiceName) {\r\n    this.config.voice = voiceName;\r\n    if (this.voiceSelector) {\r\n      this.voiceSelector.value = voiceName;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get available voices\r\n   */\r\n  getAvailableVoices() {\r\n    if (!this.speechSynthesis) {\r\n      return [];\r\n    }\r\n\r\n    return this.speechSynthesis.getVoices().map(voice => ({\r\n      name: voice.name,\r\n      lang: voice.lang,\r\n      default: voice.default,\r\n      localService: voice.localService\r\n    }));\r\n  }\r\n\r\n  /**\r\n   * Get voice by name or language\r\n   */\r\n  _getVoice(voiceName) {\r\n    if (!this.speechSynthesis) {\r\n      return null;\r\n    }\r\n\r\n    const voices = this.speechSynthesis.getVoices();\r\n    \r\n    // Try to find by name\r\n    let voice = voices.find(v => v.name === voiceName);\r\n    \r\n    // Try to find by language\r\n    if (!voice) {\r\n      voice = voices.find(v => v.lang.startsWith(voiceName));\r\n    }\r\n    \r\n    // Try to find default voice\r\n    if (!voice) {\r\n      voice = voices.find(v => v.default);\r\n    }\r\n    \r\n    return voice;\r\n  }\r\n\r\n  /**\r\n   * Update play button\r\n   */\r\n  _updatePlayButton() {\r\n    if (!this.playButton) {\r\n      return;\r\n    }\r\n\r\n    if (this.isPlaying) {\r\n      this.playButton.innerHTML = 'â¸ï¸';\r\n      this.playButton.setAttribute('aria-label', 'Pause text-to-speech');\r\n    } else if (this.isPaused) {\r\n      this.playButton.innerHTML = 'â–¶ï¸';\r\n      this.playButton.setAttribute('aria-label', 'Resume text-to-speech');\r\n    } else {\r\n      this.playButton.innerHTML = 'â–¶ï¸';\r\n      this.playButton.setAttribute('aria-label', 'Play text-to-speech');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get plugin status\r\n   */\r\n  getStatus() {\r\n    return {\r\n      isInitialized: this.isInitialized,\r\n      isPlaying: this.isPlaying,\r\n      isPaused: this.isPaused,\r\n      currentUtterance: this.currentUtterance,\r\n      config: this.config\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Update configuration\r\n   */\r\n  updateConfig(newConfig) {\r\n    this.config = { ...this.config, ...newConfig };\r\n  }\r\n}\r\n","/**\r\n * Voice Commands Plugin\r\n * Advanced voice command recognition and processing\r\n */\r\n\r\nexport class VoiceCommandsPlugin {\r\n  constructor(accessify, config = {}) {\r\n    this.accessify = accessify;\r\n    this.config = config;\r\n    this.isInitialized = false;\r\n    this.voiceRecognition = null;\r\n    this.isListening = false;\r\n    this.commands = new Map();\r\n    this.recognitionTimeout = null;\r\n    this.lastCommandTime = 0;\r\n  }\r\n\r\n  /**\r\n   * Initialize the plugin\r\n   */\r\n  async init() {\r\n    try {\r\n      if (this.isInitialized) {\r\n        return;\r\n      }\r\n\r\n      // Check for speech recognition support\r\n      if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {\r\n        throw new Error('Speech recognition not supported in this browser');\r\n      }\r\n\r\n      // Initialize speech recognition\r\n      this._initializeSpeechRecognition();\r\n      \r\n      // Set up default commands\r\n      this._setupDefaultCommands();\r\n      \r\n      // Set up event listeners\r\n      this._setupEventListeners();\r\n      \r\n      // Create UI controls\r\n      this._createUIControls();\r\n\r\n      this.isInitialized = true;\r\n      this.accessify.emit('voiceCommandsPluginInitialized');\r\n\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Voice commands plugin initialization', 'plugin');\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy the plugin\r\n   */\r\n  destroy() {\r\n    try {\r\n      if (!this.isInitialized) {\r\n        return;\r\n      }\r\n\r\n      // Stop listening\r\n      this.stopListening();\r\n      \r\n      // Remove event listeners\r\n      this._removeEventListeners();\r\n      \r\n      // Remove UI controls\r\n      this._removeUIControls();\r\n\r\n      this.isInitialized = false;\r\n      this.accessify.emit('voiceCommandsPluginDestroyed');\r\n\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Voice commands plugin destruction', 'plugin');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialize speech recognition\r\n   */\r\n  _initializeSpeechRecognition() {\r\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n    this.voiceRecognition = new SpeechRecognition();\r\n    \r\n    // Configure speech recognition\r\n    this.voiceRecognition.continuous = this.config.continuous || true;\r\n    this.voiceRecognition.interimResults = this.config.interimResults || false;\r\n    this.voiceRecognition.lang = this.config.language || this.accessify.configManager.get('language', 'en-US');\r\n    this.voiceRecognition.maxAlternatives = this.config.maxAlternatives || 1;\r\n    \r\n    // Set up event listeners\r\n    this.voiceRecognition.onstart = () => {\r\n      this.isListening = true;\r\n      this._updateListenButton();\r\n      this.accessify.emit('voiceRecognitionStarted');\r\n    };\r\n    \r\n    this.voiceRecognition.onresult = (event) => {\r\n      this._handleRecognitionResult(event);\r\n    };\r\n    \r\n    this.voiceRecognition.onerror = (event) => {\r\n      this._handleRecognitionError(event);\r\n    };\r\n    \r\n    this.voiceRecognition.onend = () => {\r\n      this.isListening = false;\r\n      this._updateListenButton();\r\n      this.accessify.emit('voiceRecognitionEnded');\r\n      \r\n      // Restart if continuous mode\r\n      if (this.config.continuous && this.config.autoRestart) {\r\n        setTimeout(() => {\r\n          if (this.config.autoRestart) {\r\n            this.startListening();\r\n          }\r\n        }, 1000);\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Set up default commands\r\n   */\r\n  _setupDefaultCommands() {\r\n    // Navigation commands\r\n    this.registerCommand('scroll up', () => {\r\n      window.scrollBy(0, -100);\r\n    });\r\n    \r\n    this.registerCommand('scroll down', () => {\r\n      window.scrollBy(0, 100);\r\n    });\r\n    \r\n    this.registerCommand('scroll left', () => {\r\n      window.scrollBy(-100, 0);\r\n    });\r\n    \r\n    this.registerCommand('scroll right', () => {\r\n      window.scrollBy(100, 0);\r\n    });\r\n    \r\n    this.registerCommand('go back', () => {\r\n      if (window.history.length > 1) {\r\n        window.history.back();\r\n      }\r\n    });\r\n    \r\n    this.registerCommand('go forward', () => {\r\n      if (window.history.length > 1) {\r\n        window.history.forward();\r\n      }\r\n    });\r\n    \r\n    // Accessibility commands\r\n    this.registerCommand('increase text size', () => {\r\n      this.accessify.visual.increaseTextSize();\r\n    });\r\n    \r\n    this.registerCommand('decrease text size', () => {\r\n      this.accessify.visual.decreaseTextSize();\r\n    });\r\n    \r\n    this.registerCommand('toggle contrast', () => {\r\n      this.accessify.visual.toggleContrastMode();\r\n    });\r\n    \r\n    this.registerCommand('toggle high contrast', () => {\r\n      this.accessify.visual.setContrastMode('high');\r\n    });\r\n    \r\n    this.registerCommand('toggle dark mode', () => {\r\n      this.accessify.visual.setTheme('dark');\r\n    });\r\n    \r\n    this.registerCommand('toggle light mode', () => {\r\n      this.accessify.visual.setTheme('light');\r\n    });\r\n    \r\n    // Text-to-speech commands\r\n    this.registerCommand('speak page', () => {\r\n      const text = document.body.textContent;\r\n      this.accessify.reading.speak(text);\r\n    });\r\n    \r\n    this.registerCommand('speak selection', () => {\r\n      const selection = window.getSelection();\r\n      if (selection.toString().trim()) {\r\n        this.accessify.reading.speak(selection.toString());\r\n      }\r\n    });\r\n    \r\n    this.registerCommand('stop speaking', () => {\r\n      this.accessify.reading.stop();\r\n    });\r\n    \r\n    this.registerCommand('pause speaking', () => {\r\n      this.accessify.reading.pause();\r\n    });\r\n    \r\n    this.registerCommand('resume speaking', () => {\r\n      this.accessify.reading.resume();\r\n    });\r\n    \r\n    // Voice command controls\r\n    this.registerCommand('start listening', () => {\r\n      this.startListening();\r\n    });\r\n    \r\n    this.registerCommand('stop listening', () => {\r\n      this.stopListening();\r\n    });\r\n    \r\n    this.registerCommand('toggle listening', () => {\r\n      if (this.isListening) {\r\n        this.stopListening();\r\n      } else {\r\n        this.startListening();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Set up event listeners\r\n   */\r\n  _setupEventListeners() {\r\n    // Listen for keyboard shortcuts\r\n    document.addEventListener('keydown', this._handleKeyboardShortcuts.bind(this));\r\n    \r\n    // Listen for configuration changes\r\n    this.accessify.on('configUpdated', this._handleConfigUpdate.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Handle keyboard shortcuts\r\n   */\r\n  _handleKeyboardShortcuts(event) {\r\n    if (event.ctrlKey || event.metaKey) {\r\n      switch (event.key) {\r\n        case 'v':\r\n          if (event.shiftKey) {\r\n            event.preventDefault();\r\n            this.toggleListening();\r\n          }\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle configuration update\r\n   */\r\n  _handleConfigUpdate(newConfig) {\r\n    if (newConfig.motor && newConfig.motor.voice) {\r\n      this.config = { ...this.config, ...newConfig.motor.voice };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create UI controls\r\n   */\r\n  _createUIControls() {\r\n    if (!this.config.showControls) {\r\n      return;\r\n    }\r\n\r\n    // Create control panel\r\n    this.controlPanel = document.createElement('div');\r\n    this.controlPanel.className = 'accessify-voice-controls';\r\n    this.controlPanel.setAttribute('aria-label', 'Voice command controls');\r\n    \r\n    // Create listen button\r\n    this.listenButton = document.createElement('button');\r\n    this.listenButton.className = 'accessify-voice-listen';\r\n    this.listenButton.setAttribute('aria-label', 'Start voice commands');\r\n    this.listenButton.innerHTML = 'ðŸŽ¤';\r\n    this.listenButton.addEventListener('click', () => this.toggleListening());\r\n    \r\n    // Create status indicator\r\n    this.statusIndicator = document.createElement('div');\r\n    this.statusIndicator.className = 'accessify-voice-status';\r\n    this.statusIndicator.textContent = 'Voice commands ready';\r\n    \r\n    // Create command list\r\n    this.commandList = document.createElement('div');\r\n    this.commandList.className = 'accessify-voice-commands';\r\n    this.commandList.innerHTML = '<h4>Available Commands:</h4>';\r\n    \r\n    // Populate command list\r\n    this._populateCommandList();\r\n    \r\n    // Assemble control panel\r\n    this.controlPanel.appendChild(this.listenButton);\r\n    this.controlPanel.appendChild(this.statusIndicator);\r\n    this.controlPanel.appendChild(this.commandList);\r\n    \r\n    // Add to page\r\n    document.body.appendChild(this.controlPanel);\r\n    \r\n    // Add CSS\r\n    this._addControlPanelCSS();\r\n  }\r\n\r\n  /**\r\n   * Populate command list\r\n   */\r\n  _populateCommandList() {\r\n    const commandGroups = {\r\n      'Navigation': ['scroll up', 'scroll down', 'go back', 'go forward'],\r\n      'Accessibility': ['increase text size', 'decrease text size', 'toggle contrast', 'toggle high contrast'],\r\n      'Text-to-Speech': ['speak page', 'speak selection', 'stop speaking', 'pause speaking'],\r\n      'Voice Controls': ['start listening', 'stop listening', 'toggle listening']\r\n    };\r\n    \r\n    Object.entries(commandGroups).forEach(([group, commands]) => {\r\n      const groupDiv = document.createElement('div');\r\n      groupDiv.className = 'accessify-voice-group';\r\n      \r\n      const groupTitle = document.createElement('h5');\r\n      groupTitle.textContent = group;\r\n      groupDiv.appendChild(groupTitle);\r\n      \r\n      const commandUl = document.createElement('ul');\r\n      commands.forEach(command => {\r\n        const li = document.createElement('li');\r\n        li.textContent = command;\r\n        commandUl.appendChild(li);\r\n      });\r\n      groupDiv.appendChild(commandUl);\r\n      \r\n      this.commandList.appendChild(groupDiv);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Add CSS for control panel\r\n   */\r\n  _addControlPanelCSS() {\r\n    const style = document.createElement('style');\r\n    style.textContent = `\r\n      .accessify-voice-controls {\r\n        position: fixed;\r\n        bottom: 20px;\r\n        right: 20px;\r\n        background: rgba(0, 0, 0, 0.9);\r\n        color: white;\r\n        padding: 15px;\r\n        border-radius: 8px;\r\n        max-width: 300px;\r\n        z-index: 10000;\r\n        font-family: Arial, sans-serif;\r\n        font-size: 14px;\r\n      }\r\n      \r\n      .accessify-voice-listen {\r\n        background: #0066cc;\r\n        color: white;\r\n        border: none;\r\n        padding: 10px 15px;\r\n        border-radius: 50%;\r\n        cursor: pointer;\r\n        font-size: 20px;\r\n        margin-bottom: 10px;\r\n        transition: all 0.3s ease;\r\n      }\r\n      \r\n      .accessify-voice-listen:hover {\r\n        background: #0052a3;\r\n      }\r\n      \r\n      .accessify-voice-listen.listening {\r\n        background: #ff4444;\r\n        animation: pulse 1s infinite;\r\n      }\r\n      \r\n      @keyframes pulse {\r\n        0% { transform: scale(1); }\r\n        50% { transform: scale(1.1); }\r\n        100% { transform: scale(1); }\r\n      }\r\n      \r\n      .accessify-voice-status {\r\n        margin-bottom: 10px;\r\n        font-weight: bold;\r\n        color: #00ff00;\r\n      }\r\n      \r\n      .accessify-voice-commands h4 {\r\n        margin: 0 0 10px 0;\r\n        color: #ffcc00;\r\n      }\r\n      \r\n      .accessify-voice-group {\r\n        margin-bottom: 10px;\r\n      }\r\n      \r\n      .accessify-voice-group h5 {\r\n        margin: 0 0 5px 0;\r\n        color: #ffcc00;\r\n        font-size: 12px;\r\n      }\r\n      \r\n      .accessify-voice-group ul {\r\n        margin: 0;\r\n        padding-left: 15px;\r\n        font-size: 11px;\r\n      }\r\n      \r\n      .accessify-voice-group li {\r\n        margin-bottom: 2px;\r\n      }\r\n    `;\r\n    document.head.appendChild(style);\r\n  }\r\n\r\n  /**\r\n   * Remove UI controls\r\n   */\r\n  _removeUIControls() {\r\n    if (this.controlPanel && this.controlPanel.parentNode) {\r\n      this.controlPanel.parentNode.removeChild(this.controlPanel);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove event listeners\r\n   */\r\n  _removeEventListeners() {\r\n    document.removeEventListener('keydown', this._handleKeyboardShortcuts);\r\n  }\r\n\r\n  /**\r\n   * Register a voice command\r\n   */\r\n  registerCommand(command, callback) {\r\n    if (typeof callback !== 'function') {\r\n      throw new Error('Command callback must be a function');\r\n    }\r\n\r\n    this.commands.set(command.toLowerCase(), callback);\r\n    this.accessify.emit('voiceCommandRegistered', command);\r\n  }\r\n\r\n  /**\r\n   * Unregister a voice command\r\n   */\r\n  unregisterCommand(command) {\r\n    this.commands.delete(command.toLowerCase());\r\n    this.accessify.emit('voiceCommandUnregistered', command);\r\n  }\r\n\r\n  /**\r\n   * Start listening for voice commands\r\n   */\r\n  startListening() {\r\n    if (!this.voiceRecognition) {\r\n      throw new Error('Voice recognition not initialized');\r\n    }\r\n\r\n    if (this.isListening) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      this.voiceRecognition.start();\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Failed to start voice recognition', 'plugin');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stop listening for voice commands\r\n   */\r\n  stopListening() {\r\n    if (!this.voiceRecognition) {\r\n      return;\r\n    }\r\n\r\n    if (this.isListening) {\r\n      this.voiceRecognition.stop();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle listening state\r\n   */\r\n  toggleListening() {\r\n    if (this.isListening) {\r\n      this.stopListening();\r\n    } else {\r\n      this.startListening();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle recognition result\r\n   */\r\n  _handleRecognitionResult(event) {\r\n    const result = event.results[event.results.length - 1];\r\n    if (result.isFinal) {\r\n      const transcript = result[0].transcript.toLowerCase().trim();\r\n      this._processCommand(transcript);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Process voice command\r\n   */\r\n  _processCommand(transcript) {\r\n    // Update status\r\n    this._updateStatus(`Heard: \"${transcript}\"`);\r\n    \r\n    // Emit command event\r\n    this.accessify.emit('voiceCommand', transcript);\r\n    \r\n    // Find matching command\r\n    const command = this._findMatchingCommand(transcript);\r\n    \r\n    if (command) {\r\n      try {\r\n        command.callback();\r\n        this._updateStatus(`Executed: \"${command.name}\"`);\r\n        this.accessify.emit('voiceCommandExecuted', command.name);\r\n      } catch (error) {\r\n        this.accessify.errorHandler.handle(error, `Failed to execute command: ${command.name}`, 'plugin');\r\n        this._updateStatus(`Error executing: \"${command.name}\"`);\r\n      }\r\n    } else {\r\n      this._updateStatus(`Unknown command: \"${transcript}\"`);\r\n      this.accessify.emit('voiceCommandUnknown', transcript);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Find matching command\r\n   */\r\n  _findMatchingCommand(transcript) {\r\n    // Exact match\r\n    if (this.commands.has(transcript)) {\r\n      return { name: transcript, callback: this.commands.get(transcript) };\r\n    }\r\n    \r\n    // Partial match\r\n    for (const [command, callback] of this.commands) {\r\n      if (transcript.includes(command) || command.includes(transcript)) {\r\n        return { name: command, callback };\r\n      }\r\n    }\r\n    \r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Handle recognition error\r\n   */\r\n  _handleRecognitionError(event) {\r\n    this._updateStatus(`Error: ${event.error}`);\r\n    this.accessify.emit('voiceRecognitionError', event);\r\n    \r\n    // Handle specific errors\r\n    switch (event.error) {\r\n      case 'no-speech':\r\n        this._updateStatus('No speech detected');\r\n        break;\r\n      case 'audio-capture':\r\n        this._updateStatus('Microphone not available');\r\n        break;\r\n      case 'not-allowed':\r\n        this._updateStatus('Microphone permission denied');\r\n        break;\r\n      case 'network':\r\n        this._updateStatus('Network error');\r\n        break;\r\n      default:\r\n        this._updateStatus(`Recognition error: ${event.error}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update status indicator\r\n   */\r\n  _updateStatus(message) {\r\n    if (this.statusIndicator) {\r\n      this.statusIndicator.textContent = message;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update listen button\r\n   */\r\n  _updateListenButton() {\r\n    if (!this.listenButton) {\r\n      return;\r\n    }\r\n\r\n    if (this.isListening) {\r\n      this.listenButton.classList.add('listening');\r\n      this.listenButton.setAttribute('aria-label', 'Stop voice commands');\r\n    } else {\r\n      this.listenButton.classList.remove('listening');\r\n      this.listenButton.setAttribute('aria-label', 'Start voice commands');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get plugin status\r\n   */\r\n  getStatus() {\r\n    return {\r\n      isInitialized: this.isInitialized,\r\n      isListening: this.isListening,\r\n      commands: Array.from(this.commands.keys()),\r\n      config: this.config\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Update configuration\r\n   */\r\n  updateConfig(newConfig) {\r\n    this.config = { ...this.config, ...newConfig };\r\n    \r\n    // Update speech recognition settings\r\n    if (this.voiceRecognition) {\r\n      this.voiceRecognition.continuous = this.config.continuous || true;\r\n      this.voiceRecognition.interimResults = this.config.interimResults || false;\r\n      this.voiceRecognition.lang = this.config.language || this.accessify.configManager.get('language', 'en-US');\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Switch Navigation Plugin\r\n * Alternative input device support and switch navigation\r\n */\r\n\r\nexport class SwitchNavigationPlugin {\r\n  constructor(accessify, config = {}) {\r\n    this.accessify = accessify;\r\n    this.config = config;\r\n    this.isInitialized = false;\r\n    this.switchElements = [];\r\n    this.currentIndex = 0;\r\n    this.scanInterval = null;\r\n    this.isScanning = false;\r\n    this.scanSpeed = 1000; // milliseconds\r\n    this.activationTimeout = null;\r\n    this.activationDelay = 2000; // milliseconds\r\n  }\r\n\r\n  /**\r\n   * Initialize the plugin\r\n   */\r\n  async init() {\r\n    try {\r\n      if (this.isInitialized) {\r\n        return;\r\n      }\r\n\r\n      // Set up switch navigation\r\n      this._setupSwitchNavigation();\r\n      \r\n      // Set up keyboard alternatives\r\n      this._setupKeyboardAlternatives();\r\n      \r\n      // Set up event listeners\r\n      this._setupEventListeners();\r\n      \r\n      // Create UI controls\r\n      this._createUIControls();\r\n\r\n      this.isInitialized = true;\r\n      this.accessify.emit('switchNavigationPluginInitialized');\r\n\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Switch navigation plugin initialization', 'plugin');\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy the plugin\r\n   */\r\n  destroy() {\r\n    try {\r\n      if (!this.isInitialized) {\r\n        return;\r\n      }\r\n\r\n      // Stop scanning\r\n      this.stopScanning();\r\n      \r\n      // Remove event listeners\r\n      this._removeEventListeners();\r\n      \r\n      // Remove UI controls\r\n      this._removeUIControls();\r\n\r\n      this.isInitialized = false;\r\n      this.accessify.emit('switchNavigationPluginDestroyed');\r\n\r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Switch navigation plugin destruction', 'plugin');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set up switch navigation\r\n   */\r\n  _setupSwitchNavigation() {\r\n    // Find all interactive elements\r\n    this._findInteractiveElements();\r\n    \r\n    // Set up scanning\r\n    this._setupScanning();\r\n  }\r\n\r\n  /**\r\n   * Find interactive elements\r\n   */\r\n  _findInteractiveElements() {\r\n    const selectors = [\r\n      'button',\r\n      'a[href]',\r\n      'input:not([type=\"hidden\"])',\r\n      'select',\r\n      'textarea',\r\n      '[tabindex]:not([tabindex=\"-1\"])',\r\n      '[role=\"button\"]',\r\n      '[role=\"link\"]',\r\n      '[role=\"menuitem\"]',\r\n      '[role=\"tab\"]',\r\n      '[role=\"option\"]'\r\n    ];\r\n    \r\n    this.switchElements = Array.from(document.querySelectorAll(selectors.join(', ')))\r\n      .filter(element => {\r\n        // Filter out hidden elements\r\n        const style = window.getComputedStyle(element);\r\n        return style.display !== 'none' && \r\n               style.visibility !== 'hidden' && \r\n               !element.hasAttribute('aria-hidden');\r\n      });\r\n    \r\n    this.accessify.emit('switchElementsFound', this.switchElements.length);\r\n  }\r\n\r\n  /**\r\n   * Set up scanning\r\n   */\r\n  _setupScanning() {\r\n    // Set up scan indicators\r\n    this._setupScanIndicators();\r\n  }\r\n\r\n  /**\r\n   * Set up scan indicators\r\n   */\r\n  _setupScanIndicators() {\r\n    // Add CSS for scan indicators\r\n    this._addScanIndicatorCSS();\r\n  }\r\n\r\n  /**\r\n   * Add CSS for scan indicators\r\n   */\r\n  _addScanIndicatorCSS() {\r\n    const style = document.createElement('style');\r\n    style.textContent = `\r\n      .accessify-scan-indicator {\r\n        position: absolute;\r\n        border: 3px solid #ff0000;\r\n        background: rgba(255, 0, 0, 0.1);\r\n        pointer-events: none;\r\n        z-index: 10000;\r\n        transition: all 0.3s ease;\r\n        border-radius: 4px;\r\n      }\r\n      \r\n      .accessify-scan-indicator::before {\r\n        content: '';\r\n        position: absolute;\r\n        top: -6px;\r\n        left: -6px;\r\n        right: -6px;\r\n        bottom: -6px;\r\n        border: 1px solid rgba(255, 0, 0, 0.3);\r\n        border-radius: 7px;\r\n        pointer-events: none;\r\n      }\r\n      \r\n      .accessify-scan-indicator.active {\r\n        border-color: #00ff00;\r\n        background: rgba(0, 255, 0, 0.1);\r\n        animation: scanPulse 1s infinite;\r\n      }\r\n      \r\n      @keyframes scanPulse {\r\n        0% { transform: scale(1); opacity: 1; }\r\n        50% { transform: scale(1.05); opacity: 0.7; }\r\n        100% { transform: scale(1); opacity: 1; }\r\n      }\r\n    `;\r\n    document.head.appendChild(style);\r\n  }\r\n\r\n  /**\r\n   * Set up keyboard alternatives\r\n   */\r\n  _setupKeyboardAlternatives() {\r\n    // Set up keyboard event listeners for switch navigation\r\n    document.addEventListener('keydown', this._handleKeyboardInput.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Handle keyboard input\r\n   */\r\n  _handleKeyboardInput(event) {\r\n    // Check if switch navigation is enabled\r\n    if (!this.config.enabled) {\r\n      return;\r\n    }\r\n\r\n    // Handle switch navigation keys\r\n    switch (event.key) {\r\n      case 'Enter':\r\n      case ' ':\r\n        if (this.isScanning) {\r\n          event.preventDefault();\r\n          this.activateCurrentElement();\r\n        }\r\n        break;\r\n      case 'ArrowRight':\r\n      case 'ArrowDown':\r\n        if (this.isScanning) {\r\n          event.preventDefault();\r\n          this.nextElement();\r\n        }\r\n        break;\r\n      case 'ArrowLeft':\r\n      case 'ArrowUp':\r\n        if (this.isScanning) {\r\n          event.preventDefault();\r\n          this.previousElement();\r\n        }\r\n        break;\r\n      case 'Escape':\r\n        if (this.isScanning) {\r\n          event.preventDefault();\r\n          this.stopScanning();\r\n        }\r\n        break;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set up event listeners\r\n   */\r\n  _setupEventListeners() {\r\n    // Listen for DOM changes to update switch elements\r\n    const observer = new MutationObserver(() => {\r\n      this._findInteractiveElements();\r\n    });\r\n    \r\n    observer.observe(document.body, {\r\n      childList: true,\r\n      subtree: true,\r\n      attributes: true,\r\n      attributeFilter: ['tabindex', 'role', 'aria-hidden']\r\n    });\r\n    \r\n    // Listen for configuration changes\r\n    this.accessify.on('configUpdated', this._handleConfigUpdate.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Handle configuration update\r\n   */\r\n  _handleConfigUpdate(newConfig) {\r\n    if (newConfig.motor && newConfig.motor.switchNavigation) {\r\n      this.config = { ...this.config, ...newConfig.motor.switchNavigation };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create UI controls\r\n   */\r\n  _createUIControls() {\r\n    if (!this.config.showControls) {\r\n      return;\r\n    }\r\n\r\n    // Create control panel\r\n    this.controlPanel = document.createElement('div');\r\n    this.controlPanel.className = 'accessify-switch-controls';\r\n    this.controlPanel.setAttribute('aria-label', 'Switch navigation controls');\r\n    \r\n    // Create start/stop button\r\n    this.scanButton = document.createElement('button');\r\n    this.scanButton.className = 'accessify-switch-scan';\r\n    this.scanButton.setAttribute('aria-label', 'Start switch navigation');\r\n    this.scanButton.textContent = 'Start Switch Navigation';\r\n    this.scanButton.addEventListener('click', () => this.toggleScanning());\r\n    \r\n    // Create speed control\r\n    this.speedControl = document.createElement('input');\r\n    this.speedControl.type = 'range';\r\n    this.speedControl.min = '500';\r\n    this.speedControl.max = '3000';\r\n    this.speedControl.step = '100';\r\n    this.speedControl.value = this.scanSpeed;\r\n    this.speedControl.setAttribute('aria-label', 'Scan speed');\r\n    this.speedControl.addEventListener('input', (e) => {\r\n      this.setScanSpeed(parseInt(e.target.value));\r\n    });\r\n    \r\n    // Create speed label\r\n    this.speedLabel = document.createElement('label');\r\n    this.speedLabel.textContent = `Scan Speed: ${this.scanSpeed}ms`;\r\n    \r\n    // Create status indicator\r\n    this.statusIndicator = document.createElement('div');\r\n    this.statusIndicator.className = 'accessify-switch-status';\r\n    this.statusIndicator.textContent = 'Switch navigation ready';\r\n    \r\n    // Create instructions\r\n    this.instructions = document.createElement('div');\r\n    this.instructions.className = 'accessify-switch-instructions';\r\n    this.instructions.innerHTML = `\r\n      <h4>Switch Navigation Instructions:</h4>\r\n      <ul>\r\n        <li>Use arrow keys to navigate between elements</li>\r\n        <li>Press Enter or Space to activate the current element</li>\r\n        <li>Press Escape to stop scanning</li>\r\n        <li>Adjust scan speed with the slider</li>\r\n      </ul>\r\n    `;\r\n    \r\n    // Assemble control panel\r\n    this.controlPanel.appendChild(this.scanButton);\r\n    this.controlPanel.appendChild(this.speedControl);\r\n    this.controlPanel.appendChild(this.speedLabel);\r\n    this.controlPanel.appendChild(this.statusIndicator);\r\n    this.controlPanel.appendChild(this.instructions);\r\n    \r\n    // Add to page\r\n    document.body.appendChild(this.controlPanel);\r\n    \r\n    // Add CSS\r\n    this._addControlPanelCSS();\r\n  }\r\n\r\n  /**\r\n   * Add CSS for control panel\r\n   */\r\n  _addControlPanelCSS() {\r\n    const style = document.createElement('style');\r\n    style.textContent = `\r\n      .accessify-switch-controls {\r\n        position: fixed;\r\n        top: 20px;\r\n        left: 20px;\r\n        background: rgba(0, 0, 0, 0.9);\r\n        color: white;\r\n        padding: 15px;\r\n        border-radius: 8px;\r\n        max-width: 300px;\r\n        z-index: 10000;\r\n        font-family: Arial, sans-serif;\r\n        font-size: 14px;\r\n      }\r\n      \r\n      .accessify-switch-scan {\r\n        background: #0066cc;\r\n        color: white;\r\n        border: none;\r\n        padding: 10px 15px;\r\n        border-radius: 4px;\r\n        cursor: pointer;\r\n        font-size: 14px;\r\n        margin-bottom: 10px;\r\n        width: 100%;\r\n      }\r\n      \r\n      .accessify-switch-scan:hover {\r\n        background: #0052a3;\r\n      }\r\n      \r\n      .accessify-switch-scan.scanning {\r\n        background: #ff4444;\r\n      }\r\n      \r\n      .accessify-switch-controls input[type=\"range\"] {\r\n        width: 100%;\r\n        margin: 10px 0;\r\n      }\r\n      \r\n      .accessify-switch-status {\r\n        margin: 10px 0;\r\n        font-weight: bold;\r\n        color: #00ff00;\r\n      }\r\n      \r\n      .accessify-switch-instructions h4 {\r\n        margin: 0 0 10px 0;\r\n        color: #ffcc00;\r\n      }\r\n      \r\n      .accessify-switch-instructions ul {\r\n        margin: 0;\r\n        padding-left: 15px;\r\n        font-size: 12px;\r\n      }\r\n      \r\n      .accessify-switch-instructions li {\r\n        margin-bottom: 5px;\r\n      }\r\n    `;\r\n    document.head.appendChild(style);\r\n  }\r\n\r\n  /**\r\n   * Remove UI controls\r\n   */\r\n  _removeUIControls() {\r\n    if (this.controlPanel && this.controlPanel.parentNode) {\r\n      this.controlPanel.parentNode.removeChild(this.controlPanel);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove event listeners\r\n   */\r\n  _removeEventListeners() {\r\n    document.removeEventListener('keydown', this._handleKeyboardInput);\r\n  }\r\n\r\n  /**\r\n   * Start scanning\r\n   */\r\n  startScanning() {\r\n    if (this.isScanning) {\r\n      return;\r\n    }\r\n\r\n    if (this.switchElements.length === 0) {\r\n      this._updateStatus('No interactive elements found');\r\n      return;\r\n    }\r\n\r\n    this.isScanning = true;\r\n    this.currentIndex = 0;\r\n    \r\n    // Start scan interval\r\n    this.scanInterval = setInterval(() => {\r\n      this._highlightCurrentElement();\r\n    }, this.scanSpeed);\r\n    \r\n    // Highlight first element\r\n    this._highlightCurrentElement();\r\n    \r\n    this._updateStatus(`Scanning ${this.switchElements.length} elements`);\r\n    this._updateScanButton();\r\n    \r\n    this.accessify.emit('switchScanningStarted');\r\n  }\r\n\r\n  /**\r\n   * Stop scanning\r\n   */\r\n  stopScanning() {\r\n    if (!this.isScanning) {\r\n      return;\r\n    }\r\n\r\n    this.isScanning = false;\r\n    \r\n    // Clear scan interval\r\n    if (this.scanInterval) {\r\n      clearInterval(this.scanInterval);\r\n      this.scanInterval = null;\r\n    }\r\n    \r\n    // Clear activation timeout\r\n    if (this.activationTimeout) {\r\n      clearTimeout(this.activationTimeout);\r\n      this.activationTimeout = null;\r\n    }\r\n    \r\n    // Remove scan indicators\r\n    this._removeScanIndicators();\r\n    \r\n    this._updateStatus('Switch navigation stopped');\r\n    this._updateScanButton();\r\n    \r\n    this.accessify.emit('switchScanningStopped');\r\n  }\r\n\r\n  /**\r\n   * Toggle scanning\r\n   */\r\n  toggleScanning() {\r\n    if (this.isScanning) {\r\n      this.stopScanning();\r\n    } else {\r\n      this.startScanning();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Move to next element\r\n   */\r\n  nextElement() {\r\n    if (!this.isScanning) {\r\n      return;\r\n    }\r\n\r\n    this.currentIndex = (this.currentIndex + 1) % this.switchElements.length;\r\n    this._highlightCurrentElement();\r\n  }\r\n\r\n  /**\r\n   * Move to previous element\r\n   */\r\n  previousElement() {\r\n    if (!this.isScanning) {\r\n      return;\r\n    }\r\n\r\n    this.currentIndex = this.currentIndex === 0 ? \r\n      this.switchElements.length - 1 : \r\n      this.currentIndex - 1;\r\n    this._highlightCurrentElement();\r\n  }\r\n\r\n  /**\r\n   * Activate current element\r\n   */\r\n  activateCurrentElement() {\r\n    if (!this.isScanning || this.currentIndex >= this.switchElements.length) {\r\n      return;\r\n    }\r\n\r\n    const element = this.switchElements[this.currentIndex];\r\n    \r\n    // Clear any existing activation timeout\r\n    if (this.activationTimeout) {\r\n      clearTimeout(this.activationTimeout);\r\n    }\r\n    \r\n    // Set activation timeout\r\n    this.activationTimeout = setTimeout(() => {\r\n      this._performActivation(element);\r\n    }, this.activationDelay);\r\n    \r\n    this._updateStatus(`Activating in ${this.activationDelay}ms...`);\r\n  }\r\n\r\n  /**\r\n   * Perform element activation\r\n   */\r\n  _performActivation(element) {\r\n    try {\r\n      // Focus the element\r\n      element.focus();\r\n      \r\n      // Activate the element\r\n      if (element.tagName === 'BUTTON' || element.getAttribute('role') === 'button') {\r\n        element.click();\r\n      } else if (element.tagName === 'A') {\r\n        element.click();\r\n      } else if (element.tagName === 'INPUT' || element.tagName === 'SELECT' || element.tagName === 'TEXTAREA') {\r\n        element.focus();\r\n      } else if (element.getAttribute('tabindex') === '0') {\r\n        element.click();\r\n      }\r\n      \r\n      this._updateStatus(`Activated: ${this._getElementDescription(element)}`);\r\n      this.accessify.emit('switchElementActivated', element);\r\n      \r\n    } catch (error) {\r\n      this.accessify.errorHandler.handle(error, 'Failed to activate switch element', 'plugin');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Highlight current element\r\n   */\r\n  _highlightCurrentElement() {\r\n    // Remove existing indicators\r\n    this._removeScanIndicators();\r\n    \r\n    if (this.currentIndex >= this.switchElements.length) {\r\n      return;\r\n    }\r\n\r\n    const element = this.switchElements[this.currentIndex];\r\n    const rect = element.getBoundingClientRect();\r\n    \r\n    // Create scan indicator\r\n    const indicator = document.createElement('div');\r\n    indicator.className = 'accessify-scan-indicator';\r\n    indicator.style.top = `${rect.top + window.scrollY}px`;\r\n    indicator.style.left = `${rect.left + window.scrollX}px`;\r\n    indicator.style.width = `${rect.width}px`;\r\n    indicator.style.height = `${rect.height}px`;\r\n    \r\n    // Add to page\r\n    document.body.appendChild(indicator);\r\n    \r\n    // Update status\r\n    this._updateStatus(`Element ${this.currentIndex + 1} of ${this.switchElements.length}: ${this._getElementDescription(element)}`);\r\n  }\r\n\r\n  /**\r\n   * Remove scan indicators\r\n   */\r\n  _removeScanIndicators() {\r\n    const indicators = document.querySelectorAll('.accessify-scan-indicator');\r\n    indicators.forEach(indicator => {\r\n      if (indicator.parentNode) {\r\n        indicator.parentNode.removeChild(indicator);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get element description\r\n   */\r\n  _getElementDescription(element) {\r\n    // Try to get accessible name\r\n    const accessibleName = element.getAttribute('aria-label') || \r\n                          element.getAttribute('title') || \r\n                          element.textContent?.trim() || \r\n                          element.getAttribute('alt') ||\r\n                          element.getAttribute('placeholder') ||\r\n                          element.tagName.toLowerCase();\r\n    \r\n    return accessibleName || 'Unknown element';\r\n  }\r\n\r\n  /**\r\n   * Set scan speed\r\n   */\r\n  setScanSpeed(speed) {\r\n    this.scanSpeed = speed;\r\n    if (this.speedLabel) {\r\n      this.speedLabel.textContent = `Scan Speed: ${speed}ms`;\r\n    }\r\n    \r\n    // Restart scanning with new speed if currently scanning\r\n    if (this.isScanning) {\r\n      this.stopScanning();\r\n      this.startScanning();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update status indicator\r\n   */\r\n  _updateStatus(message) {\r\n    if (this.statusIndicator) {\r\n      this.statusIndicator.textContent = message;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update scan button\r\n   */\r\n  _updateScanButton() {\r\n    if (!this.scanButton) {\r\n      return;\r\n    }\r\n\r\n    if (this.isScanning) {\r\n      this.scanButton.textContent = 'Stop Switch Navigation';\r\n      this.scanButton.classList.add('scanning');\r\n      this.scanButton.setAttribute('aria-label', 'Stop switch navigation');\r\n    } else {\r\n      this.scanButton.textContent = 'Start Switch Navigation';\r\n      this.scanButton.classList.remove('scanning');\r\n      this.scanButton.setAttribute('aria-label', 'Start switch navigation');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get plugin status\r\n   */\r\n  getStatus() {\r\n    return {\r\n      isInitialized: this.isInitialized,\r\n      isScanning: this.isScanning,\r\n      currentIndex: this.currentIndex,\r\n      totalElements: this.switchElements.length,\r\n      scanSpeed: this.scanSpeed,\r\n      config: this.config\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Update configuration\r\n   */\r\n  updateConfig(newConfig) {\r\n    this.config = { ...this.config, ...newConfig };\r\n  }\r\n}\r\n","/**\r\n * Accessify - Modular Web Accessibility Toolkit\r\n * \r\n * A comprehensive accessibility library supporting WCAG 2.0/2.1 AA and Israeli Standard 5568\r\n * with full RTL support and multilingual capabilities.\r\n */\r\n\r\nimport { EventEmitter } from './utils/EventEmitter.js';\r\nimport { StateManager } from './utils/StateManager.js';\r\nimport { ConfigManager } from './utils/ConfigManager.js';\r\nimport { PluginManager } from './utils/PluginManager.js';\r\nimport { BrowserDetection } from './utils/BrowserDetection.js';\r\nimport { ErrorHandler } from './utils/ErrorHandler.js';\r\n\r\n// Core components\r\nimport { VisualAccessibility } from './components/VisualAccessibility.js';\r\nimport { NavigationAccessibility } from './components/NavigationAccessibility.js';\r\nimport { ReadingAccessibility } from './components/ReadingAccessibility.js';\r\nimport { MotorAccessibility } from './components/MotorAccessibility.js';\r\nimport { MultilingualSupport } from './components/MultilingualSupport.js';\r\nimport { ARIAEnhancement } from './components/ARIAEnhancement.js';\r\nimport { ReadingGuide } from './components/ReadingGuide.js';\r\nimport { ScreenReaderOptimization } from './components/ScreenReaderOptimization.js';\r\n\r\n// Built-in plugins\r\nimport { TextToSpeechPlugin } from './plugins/TextToSpeechPlugin.js';\r\nimport { VoiceCommandsPlugin } from './plugins/VoiceCommandsPlugin.js';\r\nimport { SwitchNavigationPlugin } from './plugins/SwitchNavigationPlugin.js';\r\n\r\n/**\r\n * Main Accessify class\r\n */\r\nclass Accessify {\r\n  constructor(options = {}) {\r\n    this.version = '1.0.0';\r\n    this.isInitialized = false;\r\n    \r\n    // Initialize core systems\r\n    this.eventEmitter = new EventEmitter();\r\n    this.stateManager = new StateManager();\r\n    this.configManager = new ConfigManager(options);\r\n    this.pluginManager = new PluginManager(this);\r\n    this.browserDetection = new BrowserDetection();\r\n    this.errorHandler = new ErrorHandler();\r\n    \r\n    // Initialize components\r\n    this.visual = new VisualAccessibility(this);\r\n    this.navigation = new NavigationAccessibility(this);\r\n    this.reading = new ReadingAccessibility(this);\r\n    this.motor = new MotorAccessibility(this);\r\n    this.multilingual = new MultilingualSupport(this);\r\n    this.aria = new ARIAEnhancement(this);\r\n    this.readingGuide = new ReadingGuide(this);\r\n    this.screenReader = new ScreenReaderOptimization(this);\r\n    \r\n    // Register built-in plugins\r\n    this._registerBuiltInPlugins();\r\n    \r\n    // Bind methods\r\n    this.init = this.init.bind(this);\r\n    this.destroy = this.destroy.bind(this);\r\n    this.updateConfig = this.updateConfig.bind(this);\r\n    this.getState = this.getState.bind(this);\r\n    this.setState = this.setState.bind(this);\r\n    this.on = this.on.bind(this);\r\n    this.off = this.off.bind(this);\r\n    this.emit = this.emit.bind(this);\r\n  }\r\n\r\n  /**\r\n   * Initialize Accessify\r\n   */\r\n  async init() {\r\n    try {\r\n      if (this.isInitialized) {\r\n        console.warn('Accessify is already initialized');\r\n        return this;\r\n      }\r\n\r\n      // Check browser compatibility\r\n      if (!this.browserDetection.isSupported) {\r\n        throw new Error('Browser not supported. Please use Chrome 60+, Firefox 55+, Safari 12+, or Edge 79+');\r\n      }\r\n\r\n      // Initialize components in order\r\n      await this.multilingual.init();\r\n      await this.visual.init();\r\n      await this.navigation.init();\r\n      await this.reading.init();\r\n      await this.motor.init();\r\n      await this.aria.init();\r\n      await this.readingGuide.init();\r\n      await this.screenReader.init();\r\n      \r\n      // Initialize plugins\r\n      await this.pluginManager.init();\r\n      \r\n      this.isInitialized = true;\r\n      this.emit('initialized');\r\n      \r\n      console.log('Accessify initialized successfully');\r\n      return this;\r\n    } catch (error) {\r\n      this.errorHandler.handle(error, 'Initialization failed');\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy Accessify instance\r\n   */\r\n  destroy() {\r\n    try {\r\n      if (!this.isInitialized) {\r\n        return this;\r\n      }\r\n\r\n      // Destroy components in reverse order\r\n      this.screenReader.destroy();\r\n      this.readingGuide.destroy();\r\n      this.aria.destroy();\r\n      this.motor.destroy();\r\n      this.reading.destroy();\r\n      this.navigation.destroy();\r\n      this.visual.destroy();\r\n      this.multilingual.destroy();\r\n      \r\n      // Destroy plugins\r\n      this.pluginManager.destroy();\r\n      \r\n      // Clean up core systems\r\n      this.eventEmitter.removeAllListeners();\r\n      this.stateManager.clear();\r\n      \r\n      this.isInitialized = false;\r\n      this.emit('destroyed');\r\n      \r\n      console.log('Accessify destroyed');\r\n    } catch (error) {\r\n      this.errorHandler.handle(error, 'Destruction failed');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update configuration\r\n   */\r\n  updateConfig(newConfig) {\r\n    this.configManager.update(newConfig);\r\n    this.emit('configUpdated', newConfig);\r\n  }\r\n\r\n  /**\r\n   * Get current state\r\n   */\r\n  getState() {\r\n    return this.stateManager.getState();\r\n  }\r\n\r\n  /**\r\n   * Set state\r\n   */\r\n  setState(newState) {\r\n    this.stateManager.setState(newState);\r\n    this.emit('stateChanged', newState);\r\n  }\r\n\r\n  /**\r\n   * Event system methods\r\n   */\r\n  on(event, callback) {\r\n    this.eventEmitter.on(event, callback);\r\n    return this;\r\n  }\r\n\r\n  off(event, callback) {\r\n    this.eventEmitter.off(event, callback);\r\n    return this;\r\n  }\r\n\r\n  emit(event, ...args) {\r\n    this.eventEmitter.emit(event, ...args);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Register built-in plugins\r\n   */\r\n  _registerBuiltInPlugins() {\r\n    this.pluginManager.register('textToSpeech', TextToSpeechPlugin);\r\n    this.pluginManager.register('voiceCommands', VoiceCommandsPlugin);\r\n    this.pluginManager.register('switchNavigation', SwitchNavigationPlugin);\r\n  }\r\n\r\n  /**\r\n   * Get component by name\r\n   */\r\n  getComponent(name) {\r\n    const components = {\r\n      visual: this.visual,\r\n      navigation: this.navigation,\r\n      reading: this.reading,\r\n      motor: this.motor,\r\n      multilingual: this.multilingual,\r\n      aria: this.aria,\r\n      readingGuide: this.readingGuide,\r\n      screenReader: this.screenReader\r\n    };\r\n    return components[name];\r\n  }\r\n\r\n  /**\r\n   * Check if feature is enabled\r\n   */\r\n  isFeatureEnabled(feature) {\r\n    return this.configManager.isFeatureEnabled(feature);\r\n  }\r\n\r\n  /**\r\n   * Enable feature\r\n   */\r\n  enableFeature(feature) {\r\n    this.configManager.enableFeature(feature);\r\n    this.emit('featureEnabled', feature);\r\n  }\r\n\r\n  /**\r\n   * Disable feature\r\n   */\r\n  disableFeature(feature) {\r\n    this.configManager.disableFeature(feature);\r\n    this.emit('featureDisabled', feature);\r\n  }\r\n\r\n  /**\r\n   * Get accessibility compliance status\r\n   */\r\n  getComplianceStatus() {\r\n    return {\r\n      wcag: this._checkWCAGCompliance(),\r\n      israeliStandard: this._checkIsraeliStandardCompliance(),\r\n      features: this._getFeatureCompliance()\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Check WCAG compliance\r\n   */\r\n  _checkWCAGCompliance() {\r\n    const features = this.configManager.getEnabledFeatures();\r\n    return {\r\n      level: 'AA',\r\n      version: '2.1',\r\n      compliant: this._validateWCAGFeatures(features),\r\n      score: this._calculateWCAGScore(features)\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Check Israeli Standard 5568 compliance\r\n   */\r\n  _checkIsraeliStandardCompliance() {\r\n    const features = this.configManager.getEnabledFeatures();\r\n    return {\r\n      compliant: this._validateIsraeliStandardFeatures(features),\r\n      score: this._calculateIsraeliStandardScore(features)\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get feature compliance details\r\n   */\r\n  _getFeatureCompliance() {\r\n    return {\r\n      visual: this.visual.getComplianceStatus(),\r\n      navigation: this.navigation.getComplianceStatus(),\r\n      reading: this.reading.getComplianceStatus(),\r\n      motor: this.motor.getComplianceStatus(),\r\n      multilingual: this.multilingual.getComplianceStatus(),\r\n      aria: this.aria.getComplianceStatus(),\r\n      readingGuide: this.readingGuide.getComplianceStatus(),\r\n      screenReader: this.screenReader.getComplianceStatus()\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Validate WCAG features\r\n   */\r\n  _validateWCAGFeatures(features) {\r\n    const requiredFeatures = [\r\n      'textSizeAdjustment',\r\n      'highContrast',\r\n      'keyboardNavigation',\r\n      'focusIndicators',\r\n      'skipLinks',\r\n      'altText'\r\n    ];\r\n    return requiredFeatures.every(feature => features.includes(feature));\r\n  }\r\n\r\n  /**\r\n   * Calculate WCAG compliance score\r\n   */\r\n  _calculateWCAGScore(features) {\r\n    const totalFeatures = 20; // Total WCAG features\r\n    const enabledFeatures = features.length;\r\n    return Math.round((enabledFeatures / totalFeatures) * 100);\r\n  }\r\n\r\n  /**\r\n   * Validate Israeli Standard features\r\n   */\r\n  _validateIsraeliStandardFeatures(features) {\r\n    const requiredFeatures = [\r\n      'rtlSupport',\r\n      'hebrewSupport',\r\n      'textSizeAdjustment',\r\n      'highContrast',\r\n      'keyboardNavigation'\r\n    ];\r\n    return requiredFeatures.every(feature => features.includes(feature));\r\n  }\r\n\r\n  /**\r\n   * Calculate Israeli Standard compliance score\r\n   */\r\n  _calculateIsraeliStandardScore(features) {\r\n    const totalFeatures = 15; // Total Israeli Standard features\r\n    const enabledFeatures = features.length;\r\n    return Math.round((enabledFeatures / totalFeatures) * 100);\r\n  }\r\n}\r\n\r\n// Export for different module systems\r\nexport default Accessify;\r\n\r\n// Global assignment for UMD builds - ensure it's available immediately\r\nif (typeof window !== 'undefined') {\r\n  window.Accessify = Accessify;\r\n}\r\n"],"names":["EventEmitter","constructor","this","events","Map","on","event","callback","Error","has","set","get","push","off","callbacks","index","indexOf","splice","length","delete","emit","args","forEach","error","console","once","onceCallback","removeAllListeners","clear","eventNames","Array","from","keys","listenerCount","hasListeners","StateManager","state","history","maxHistorySize","listeners","getState","Object","fromEntries","key","value","oldValue","_addToHistory","_notifyListeners","setState","newState","changes","hasChanges","entries","old","new","undefined","oldState","subscribe","unsubscribe","getHistory","clearHistory","undo","lastChange","pop","newValue","timestamp","Date","now","shift","createSelector","selector","lastResult","lastState","currentState","size","values","ConfigManager","options","config","_mergeWithDefaults","featureFlags","Set","_initializeFeatureFlags","defaultValue","_getNestedValue","_setNestedValue","update","newConfig","_deepMerge","_updateFeatureFlags","getAll","isFeatureEnabled","feature","enableFeature","add","_updateFeatureConfig","disableFeature","toggleFeature","getEnabledFeatures","getDisabledFeatures","_getAllFeatures","filter","reset","_getDefaultConfig","validate","errors","field","includes","language","direction","visual","textSize","min","max","valid","defaults","version","theme","debug","enabled","current","step","contrast","modes","brightness","themes","available","cursors","focusIndicators","style","color","thickness","linkUnderlining","offset","colorFilters","saturation","navigation","keyboard","shortcuts","skipToContent","toggleMenu","increaseTextSize","decreaseTextSize","toggleContrast","toggleHighContrast","focus","trap","visible","order","skipLinks","reading","textToSpeech","rate","pitch","volume","voice","fonts","dyslexia","spacing","lineHeight","letterSpacing","wordSpacing","guides","readingRuler","textHighlighting","motor","targets","minSize","padding","gestures","alternatives","commands","motion","reduced","delays","interaction","hover","multilingual","autoDetect","fallback","rtl","readingGuide","height","opacity","textMasking","screenReader","announcements","types","ariaEnhancements","autoEnhance","liveRegions","polite","assertive","status","log","plugins","autoLoad","builtIn","testing","axe","lighthouse","manual","configPath","textSizeAdjustment","highContrast","colorThemes","customCursors","keyboardNavigation","focusManagement","dyslexiaFonts","textSpacing","readingGuides","largeTargets","gestureAlternatives","voiceCommands","motionControl","rtlSupport","target","source","result","hasOwnProperty","isArray","obj","path","split","reduce","lastKey","PluginManager","accessify","initializedPlugins","pluginConfigs","register","name","pluginClass","warn","unregister","destroy","init","enabledPlugins","configManager","pluginName","initPlugin","PluginClass","plugin","destroyPlugin","getPlugin","isInitialized","getRegisteredPlugins","getInitializedPlugins","updatePluginConfig","updatedConfig","updateConfig","enablePlugin","builtInPlugins","disablePlugin","loadExternalPlugin","url","module","import","default","getPluginStatus","registered","initialized","validatePlugin","method","prototype","createPluginAPI","getConfig","setConfig","message","BrowserDetection","userAgent","navigator","browser","_detectBrowser","_detectVersion","features","_detectFeatures","isSupported","_checkSupport","ua","toLowerCase","chromeMatch","match","parseInt","firefoxMatch","safariMatch","edgeMatch","operaMatch","genericMatch","arrowFunctions","classes","modules","window","promises","Promise","asyncAwait","speechSynthesis","speechRecognition","webAudio","webGL","webGL2","canvas","svg","cssGrid","CSS","supports","cssFlexbox","cssCustomProperties","cssTransforms","cssTransitions","cssAnimations","aria","document","createElement","focusVisible","reducedMotion","colorScheme","touch","pointer","gamepad","localStorage","sessionStorage","indexedDB","fetch","webSocket","fileReader","fileAPI","performance","requestAnimationFrame","requestIdleCallback","crypto","subtle","intl","intlDateTimeFormat","Intl","intlNumberFormat","_checkRTLSupport","mobile","test","tablet","testElement","unicodeBidi","textContent","body","appendChild","hasRTL","offsetLeft","removeChild","minVersion","chrome","firefox","safari","edge","opera","getInfo","isMobile","isTablet","isDesktop","hasFeature","getUnsupportedFeatures","getCapabilitiesScore","allFeatures","supportedFeatures","Math","round","getAccessibilitySupport","getRecommendedFeatures","recommendations","getOptimizations","useWebGL","useWebAudio","useServiceWorker","useIndexedDB","useLocalStorage","ErrorHandler","maxErrors","errorTypes","INITIALIZATION","RUNTIME","CONFIGURATION","PLUGIN","COMPONENT","NETWORK","PERMISSION","COMPATIBILITY","handle","context","type","errorInfo","_createErrorInfo","addError","_logError","Accessify","accessifyInstance","id","_generateErrorId","toISOString","String","stack","location","href","severity","_determineSeverity","recoverable","_isRecoverable","random","toString","substr","logLevel","_getLogLevel","logMessage","_formatLogMessage","info","high","medium","low","toUpperCase","getErrors","getErrorsByType","getErrorsBySeverity","getRecentErrors","count","slice","clearErrors","getErrorStats","stats","total","byType","bySeverity","recent","hasCriticalErrors","some","getCriticalErrors","createErrorReport","criticalErrors","allErrors","_getErrorRecommendations","wrapFunction","fn","wrapAsyncFunction","async","createErrorBoundary","componentName","catch","wrap","wrapAsync","setupGlobalHandlers","addEventListener","reason","originalConsoleError","apply","join","removeGlobalHandlers","VisualAccessibility","currentStyles","styleElement","originalStyles","head","_storeOriginalStyles","_applyInitialConfiguration","_setupEventListeners","_initializeAltTextGeneration","errorHandler","_removeEventListeners","_restoreOriginalStyles","parentNode","setTextSize","clampedSize","_applyTextSize","newSize","resetTextSize","setContrastMode","mode","_applyContrastMode","toggleContrastMode","nextIndex","setBrightness","level","clampedLevel","_applyBrightness","setTheme","_applyTheme","setColorFilter","_applyColorFilter","css","_addStyle","setSaturation","_applySaturation","setCursor","cursorType","_applyCursor","setFocusIndicator","_applyFocusIndicators","setLinkUnderlining","_applyLinkUnderlining","_updateStyleElement","_removeStyle","allStyles","htmlElement","documentElement","bodyElement","fontSize","cursor","altKey","preventDefault","removeEventListener","_handleKeydown","getComplianceStatus","enabledFeatures","wcag","compliant","score","israeliStandard","getCurrentSettings","_generateAltTextForImages","_observeNewImages","querySelectorAll","img","_generateAltTextForImage","getAttribute","altText","src","replace","l","title","setAttribute","MutationObserver","imageObserver","mutations","mutation","addedNodes","node","nodeType","Node","ELEMENT_NODE","tagName","images","observe","childList","subtree","validateColorContrast","foreground","background","fgRgb","_hexToRgb","bgRgb","ratio","fgLuminance","_getRelativeLuminance","bgLuminance","lighter","hex","exec","r","g","b","rgb","rsRGB","gsRGB","bsRGB","pow","detectReducedMotion","matchMedia","matches","applyReducedMotion","stopAnimations","resumeAnimations","toggleAnimations","NavigationAccessibility","focusTrap","keyboardShortcuts","focusHistory","tabOrder","_setupKeyboardNavigation","_createSkipLinks","_setupFocusManagement","_setupKeyboardShortcuts","_setupTabOrder","_removeSkipLinks","_clearFocusTrap","bind","_handleKeyup","_handleFocusIn","_handleFocusOut","shortcut","_getShortcutKey","_handleTabNavigation","_handleEscapeKey","_handleActivationKey","_handleArrowKeys","_handleFocusTrap","_optimizeTabOrder","_closeOpenElements","_returnFocus","click","_handleArrowKeyNavigation","role","items","currentIndex","skipLinksContainer","className","_handleSkipLink","skipToNav","insertBefore","firstChild","_addSkipLinksCSS","targetId","substring","targetElement","getElementById","scrollIntoView","behavior","link","_setupFocusTrap","_setupFocusRestoration","trapElements","firstElement","lastElement","shiftKey","activeElement","setFocusTrap","element","setItem","lastFocusId","getItem","registerShortcut","_skipToContent","_toggleMenu","toggleReadingRuler","toggleTextHighlighting","_toggleLinkUnderlining","_cycleFocusStyles","_cycleCursorStyles","_toggleScreenReaderAnnouncements","_toggleTabOrder","_toggleGridOverlay","unregisterShortcut","parts","ctrlKey","metaKey","mainContent","querySelector","menu","isOpen","firstMenuItem","previousElement","currentStyle","styles","isEnabled","announce","_hideTabOrder","_showTabOrder","indicator","cssText","position","remove","_hideGridOverlay","_showGridOverlay","gridOverlay","ReadingAccessibility","currentUtterance","textHighlighter","fontLoader","_initializeSpeechSynthesis","_setupFontLoading","_setupTextSpacing","_setupReadingGuides","_setupTextHighlighting","_stopSpeech","_removeReadingGuides","_removeTextHighlighting","_removeCustomFonts","getAvailableVoices","speak","text","utterance","SpeechSynthesisUtterance","_getVoice","onstart","onend","onerror","speaking","cancel","pauseSpeech","pause","resumeSpeech","paused","resume","getVoices","map","lang","localService","voiceName","voices","find","v","startsWith","_loadDyslexiaFonts","_applyFont","font","rel","onload","fontName","fontFamily","setFont","_applyTextSpacing","setLineHeight","setLetterSpacing","setWordSpacing","_createReadingRuler","_addReadingRulerCSS","_handleReadingRulerMouseMove","top","clientY","left","width","_addTextHighlighterCSS","_handleTextSelection","selection","getSelection","trim","rect","getRangeAt","getBoundingClientRect","removeAllRanges","MotorAccessibility","voiceRecognition","gestureRecognizer","motionSensor","targetEnlarger","interactionDelays","_setupLargeTargets","_setupGestureAlternatives","_setupVoiceCommands","_setupMotionControl","_setupInteractionDelays","_stopVoiceRecognition","_removeGestureRecognition","_removeMotionSensor","_removeLargeTargets","_addTargetEnlargerCSS","_handleTargetHover","_handleTargetOut","_isInteractiveElement","enlargedWidth","enlargedHeight","display","_setupTouchEvents","_setupPointerEvents","_setupGestureRecognition","_handleTouchStart","_handleTouchEnd","_handleTouchMove","touchStart","x","touches","clientX","y","time","touchEnd","changedTouches","gesture","_calculateGesture","_handleGesture","_handlePointerDown","_handlePointerUp","_handlePointerMove","pointerStart","pointerEnd","start","end","deltaX","deltaY","deltaTime","abs","_handleSwipeGesture","_handleTapGesture","back","forward","scrollBy","SpeechRecognition","webkitSpeechRecognition","continuous","interimResults","onresult","results","isFinal","_handleVoiceCommand","transcript","command","startVoiceRecognition","stop","_applyReducedMotion","_setupMotionSensor","_setupHoverDelays","delay","MultilingualSupport","currentLanguage","currentDirection","rtlLanguages","translations","directionObserver","_detectLanguageAndDirection","_setupRTLSupport","_setupLanguageSwitching","_setupDirectionSwitching","_loadTranslations","_initializeRTLVoiceRecognition","disconnect","_removeRTLStyles","htmlLang","htmlDir","dir","_applyRTLStyles","_setupDirectionObserver","_setupRTLFeatures","attributeName","newDirection","setDirection","attributes","attributeFilter","_adjustKeyboardNavigationForRTL","_adjustGestureRecognitionForRTL","_adjustTextSelectionForRTL","_moveFocus","focusableElements","_adjustSelectionHighlighting","newLanguage","setLanguage","languages","_loadLanguageTranslations","en","skipToNavigation","he","ar","getTranslation","langTranslations","enTranslations","isRTLLanguage","getCurrentLanguage","getCurrentDirection","getSupportedLanguages","isRTL","supportedLanguages","hebrewCommands","_speakSelectedText","_navigateUp","_navigateDown","_navigateLeft","_navigateRight","_closeCurrentElement","_openCurrentElement","arabicCommands","processVoiceCommand","normalizedCommand","currentElement","_getFocusableElements","closeButton","closest","dispatchEvent","KeyboardEvent","getAvailableVoiceCommands","addCustomVoiceCommand","action","ARIAEnhancement","enhancedElements","ariaObserver","_enhanceExistingElements","_observeNewElements","_setupLiveRegions","_enhanceButtons","_enhanceFormElements","_enhanceNavigation","_enhanceImages","_enhanceInteractiveElements","button","icon","iconClass","iconTitle","label","_generateLabelFromIconClass","dataLabel","input","_generateId","hasAttribute","classList","contains","helpText","nav","heading","longdescId","longdescElement","_addKeyboardHandlers","handleKeydown","_accessifyKeydownHandler","_enhanceNewElement","liveRegion","liveRegionAssertive","priority","liveRegionId","setTimeout","iconMap","enhanceElement","removeEnhancement","attr","removeAttribute","wcagCompliant","israeliStandardCompliant","ReadingGuide","isActive","currentPosition","highlightedElements","_initializeTextHighlighting","_removeReadingRuler","_clearHighlightedElements","rulerLine","topHandle","bottomHandle","hideReadingRuler","showReadingRuler","setReadingRulerPosition","setReadingRulerHeight","highlightText","elements","removeTextHighlighting","maskText","unmaskText","focusOnText","el","clearTextFocus","_handleMouseMove","_handleClick","textElements","active","ScreenReaderOptimization","screenReaderDetected","_detectScreenReader","_enhanceARIA","_setupAnnouncements","_removeLiveRegions","_createLiveRegion","announceStatus","details","announceError","announceSuccess","_enhanceHeadings","_enhanceLists","_enhanceTables","list","previousElementSibling","table","caption","_handleFormSubmit","_handleError","_handleVisibilityChange","filename","hidden","TextToSpeechPlugin","voiceQueue","isPlaying","isPaused","totalLength","_createUIControls","_removeUIControls","_handleKeyboardShortcuts","_handleConfigUpdate","selectedText","autoSpeakOnSelection","showControls","controlPanel","playButton","innerHTML","stopButton","rateControl","e","setRate","parseFloat","volumeControl","setVolume","voiceSelector","setVoice","_populateVoiceSelector","_addControlPanelCSS","defaultOption","option","_updatePlayButton","getStatus","VoiceCommandsPlugin","isListening","recognitionTimeout","lastCommandTime","_initializeSpeechRecognition","_setupDefaultCommands","stopListening","maxAlternatives","_updateListenButton","_handleRecognitionResult","_handleRecognitionError","autoRestart","startListening","registerCommand","toggleListening","listenButton","statusIndicator","commandList","_populateCommandList","Navigation","Accessibility","group","groupDiv","groupTitle","commandUl","li","unregisterCommand","_processCommand","_updateStatus","_findMatchingCommand","SwitchNavigationPlugin","switchElements","scanInterval","isScanning","scanSpeed","activationTimeout","activationDelay","_setupSwitchNavigation","_setupKeyboardAlternatives","stopScanning","_findInteractiveElements","_setupScanning","getComputedStyle","visibility","_setupScanIndicators","_addScanIndicatorCSS","_handleKeyboardInput","activateCurrentElement","nextElement","switchNavigation","scanButton","toggleScanning","speedControl","setScanSpeed","speedLabel","instructions","startScanning","setInterval","_highlightCurrentElement","_updateScanButton","clearInterval","clearTimeout","_removeScanIndicators","_performActivation","_getElementDescription","scrollY","scrollX","speed","totalElements","eventEmitter","stateManager","pluginManager","browserDetection","_registerBuiltInPlugins","getComponent","_checkWCAGCompliance","_checkIsraeliStandardCompliance","_getFeatureCompliance","_validateWCAGFeatures","_calculateWCAGScore","_validateIsraeliStandardFeatures","_calculateIsraeliStandardScore","every"],"mappings":"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"}