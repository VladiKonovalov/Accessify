<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessify - Web Accessibility Toolkit Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
            color: #1a1a1a;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.06);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        h1 {
            color: #1a1a1a;
            text-align: center;
            margin-bottom: 40px;
            font-weight: 600;
            font-size: 2.5rem;
        }
        
        .demo-section {
            margin: 40px 0;
            padding: 24px;
            border: 1px solid rgba(0, 0, 0, 0.08);
            border-radius: 12px;
            background: #fafbfc;
        }
        
        .demo-section h2 {
            color: #007AFF;
            margin-top: 0;
            font-weight: 600;
            font-size: 1.5rem;
        }
        
        .button {
            background: #007AFF;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 8px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(0, 122, 255, 0.2);
        }
        
        .button:hover {
            background: #0056CC;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 122, 255, 0.3);
        }
        
        .button:active {
            transform: translateY(0);
        }
        
        .button:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.3);
        }
        
        .input-group {
            margin: 15px 0;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .input-group input,
        .input-group select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            background: #e8f5e8;
            border: 1px solid #4caf50;
        }
        
        .error {
            background: #ffebee;
            border-color: #f44336;
            color: #c62828;
        }
        
        .warning {
            background: #fff3e0;
            border-color: #ff9800;
            color: #e65100;
        }
        
        /* Accessibility Controls - Easy to implement in other websites */
        /* Copy this entire .accessibility-controls block to your website's CSS */
        .accessibility-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #ffffff;
            border: 1px solid rgba(0, 0, 0, 0.15);
            border-radius: 16px;
            padding: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
            z-index: 10000;
            width: 300px;
            max-width: 90vw;
            max-height: 80vh;
            overflow-y: auto;
            transition: all 0.3s ease;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            transform: translateY(0);
            will-change: transform;
            box-sizing: border-box;
        }
        
        .accessibility-controls:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }
        
        .accessibility-controls h3 {
            margin: 0 0 16px 0;
            color: #1a1a1a;
            font-size: 22px !important;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-align: center;
        }
        
        .accessibility-controls h3::before {
            content: "♿";
            font-size: 24px !important;
            opacity: 0.8;
        }
        
        /* Dashboard Toggle Button - Easy to implement in other websites */
        /* Copy this entire .dashboard-toggle block to your website's CSS */
        .dashboard-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #007AFF;
            border: none;
            border-radius: 16px;
            width: 72px;
            height: 72px;
            color: white;
            font-size: 40px !important;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(0, 122, 255, 0.4);
            z-index: 10001;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            transform: translateY(0);
            will-change: transform;
        }
        
        .dashboard-toggle:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0, 122, 255, 0.4);
        }
        
        .dashboard-toggle:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.3);
        }
        
        .dashboard-toggle::before {
            content: "♿";
        }
        
        .accessibility-controls.hidden {
            display: none;
        }
        
        .control-group {
            margin: 8px 0;
            background: rgba(0, 0, 0, 0.02);
            padding: 12px;
            border-radius: 12px;
            border: 1px solid rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            gap: 12px;
            min-height: 48px;
            flex-wrap: wrap;
            transition: all 0.2s ease;
        }
        
        .control-group:hover {
            background: rgba(0, 0, 0, 0.04);
            border-color: rgba(0, 0, 0, 0.1);
        }
        
        .control-group label {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            font-size: 20px !important;
            margin: 0;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            opacity: 0.8;
        }
        
        .control-group label:hover {
            background: rgba(0, 0, 0, 0.1);
            opacity: 1;
            transform: scale(1.05);
        }
        
        .control-group .control-content {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .control-group .control-buttons {
            display: flex;
            gap: 4px;
        }
        
        .control-group input[type="range"] {
            flex: 1;
            height: 4px;
            border-radius: 2px;
            background: rgba(0, 0, 0, 0.1);
            outline: none;
            -webkit-appearance: none;
            appearance: none;
            min-width: 0;
            cursor: pointer;
        }
        
        .control-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #007AFF;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            transition: all 0.2s ease;
        }
        
        .control-group input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .control-group select {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            background: white;
            color: #1a1a1a;
            font-size: 20px !important;
            min-width: 0;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .control-group select:hover {
            border-color: rgba(0, 0, 0, 0.2);
        }
        
        .control-group select:focus {
            outline: none;
            border-color: #007AFF;
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }
        
        .control-group select option {
            background: white;
            color: #1a1a1a;
        }
        
        .control-group button {
            background: rgba(0, 0, 0, 0.05);
            color: #1a1a1a;
            border: 1px solid rgba(0, 0, 0, 0.1);
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 20px !important;
            font-weight: 500;
            margin: 0;
            transition: all 0.2s ease;
            min-width: 44px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .control-group button:hover {
            background: rgba(0, 0, 0, 0.1);
            border-color: rgba(0, 0, 0, 0.2);
            transform: translateY(-1px);
        }
        
        .control-group button:active {
            transform: translateY(0);
        }
        
        .control-group button:focus {
            outline: none;
            border-color: #007AFF;
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }
        
        /* Remove default tooltips and prevent empty tooltip boxes */
        * {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        /* Custom tooltip styles */
        .control-group label:hover::after,
        .control-group button:hover::after {
            content: attr(title);
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px !important;
            white-space: nowrap;
            z-index: 1000;
            pointer-events: none;
            opacity: 1;
            transition: opacity 0.3s ease;
            right: 100%;
            margin-right: 8px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        /* RTL Tooltip positioning */
        .rtl-demo .control-group label:hover::after,
        .rtl-demo .control-group button:hover::after,
        [dir="rtl"] .control-group label:hover::after,
        [dir="rtl"] .control-group button:hover::after {
            right: auto;
            left: 100%;
            margin-right: 0;
            margin-left: 8px;
        }
        
        .rtl-demo {
            direction: rtl;
            text-align: right;
        }
        
        /* Isolate accessibility tool from text size changes */
        .dashboard-toggle,
        .accessibility-controls,
        .accessibility-controls * {
            font-size: inherit !important;
        }
        
        .hebrew-text {
            font-family: 'Arial', 'Tahoma', sans-serif;
        }
        
        .test-content {
            margin: 20px 0;
            padding: 15px;
            background: #f9f9f9;
            border-left: 4px solid #0066cc;
        }
        
        .test-content img {
            max-width: 100%;
            height: auto;
        }
        
        .test-content a {
            color: #0066cc;
            text-decoration: underline;
        }
        
        .test-content a:hover {
            color: #0052a3;
        }
        
        .test-content a:focus {
            outline: 2px solid #ff6600;
            outline-offset: 2px;
        }
        
        .form-demo {
            background: white;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin: 20px 0;
        }
        
        .form-demo input,
        .form-demo textarea,
        .form-demo select {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .form-demo button {
            background: #4caf50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .form-demo button:hover {
            background: #45a049;
        }
        
        .form-demo button:focus {
            outline: 2px solid #ff6600;
            outline-offset: 2px;
        }
        
        .navigation-demo {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        
        .navigation-demo nav {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .navigation-demo a {
            padding: 8px 16px;
            background: #2196f3;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            transition: background 0.3s;
        }
        
        .navigation-demo a:hover {
            background: #1976d2;
        }
        
        .navigation-demo a:focus {
            outline: 2px solid #ff6600;
            outline-offset: 2px;
        }
        
        .navigation-demo a[aria-current="page"] {
            background: #ff9800;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .modal-content {
            background-color: white;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            border-radius: 8px;
            width: 80%;
            max-width: 500px;
        }
        
        .modal-content h3 {
            margin-top: 0;
        }
        
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
        }
        
        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: #000;
            color: #fff;
            padding: 8px;
            text-decoration: none;
            border-radius: 0 0 4px 4px;
            z-index: 10000;
        }
        
        .skip-link:focus {
            top: 0;
        }
        
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        @media (prefers-contrast: high) {
            body {
                background: white;
                color: black;
            }
            
            .button {
                background: black;
                color: white;
                border: 2px solid black;
            }
        }
    </style>
</head>
<body>
    <!-- Skip Links -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <a href="#navigation" class="skip-link">Skip to navigation</a>
    
    <!-- Accessibility Controls -->
    <!-- 
    IMPLEMENTATION GUIDE FOR OTHER WEBSITES:
    
    1. Copy the CSS blocks marked with "Easy to implement in other websites" comments
    2. Copy the HTML structure below (dashboard toggle button and accessibility controls)
    3. Copy the JavaScript translation system and functions
    4. Include the Accessify library: <script src="path/to/accessify.min.js"></script>
    5. Initialize with: const accessify = new Accessify(); await accessify.init();
    
    The system is designed to be self-contained and easy to integrate.
    -->
    
    <!-- Dashboard Toggle Button -->
    <button class="dashboard-toggle" id="dashboard-toggle" onclick="toggleDashboard()"></button>
    
    <!-- Accessibility Controls Dashboard -->
    <div class="accessibility-controls" id="accessibility-controls">
        <h3>Accessibility Controls</h3>
        <!-- Text Size Control -->
        <div class="control-group">
            <label for="text-size" title="Text Size - Adjust font size for better readability">A</label>
            <div class="control-content">
                <input type="range" id="text-size" min="0.5" max="3" step="0.1" value="1">
                <div class="control-buttons">
                    <button onclick="increaseTextSize()" title="Increase Text Size - Make text larger">+</button>
                    <button onclick="decreaseTextSize()" title="Decrease Text Size - Make text smaller">−</button>
                </div>
            </div>
        </div>

        <!-- Contrast Control -->
        <div class="control-group">
            <label for="contrast" title="Contrast - Change color contrast for better visibility">◐</label>
            <div class="control-content">
                <select id="contrast" onchange="setContrast(this.value)">
                    <option value="normal">Normal</option>
                    <option value="high">High</option>
                    <option value="inverted">Inverted</option>
                    <option value="grayscale">Grayscale</option>
                </select>
            </div>
        </div>

        <!-- Theme Control -->
        <div class="control-group">
            <label for="theme" title="Theme - Change visual appearance and colors">🎨</label>
            <div class="control-content">
                <select id="theme" onchange="setTheme(this.value)">
                    <option value="default">Default</option>
                    <option value="dark">Dark</option>
                    <option value="light">Light</option>
                    <option value="colorblind-friendly">Colorblind Friendly</option>
                </select>
            </div>
        </div>

        <!-- Voice Commands -->
        <div class="control-group">
            <label title="Voice Commands - Control with your voice">🎤</label>
            <div class="control-content">
                <div class="control-buttons">
                    <button onclick="toggleVoiceCommands()" title="Toggle Voice Commands - Start/stop voice control">🎙</button>
                    <button onclick="toggleSwitchNavigation()" title="Toggle Switch Navigation - Alternative input method">⌨</button>
                </div>
            </div>
        </div>

        <!-- Language Control -->
        <div class="control-group">
            <label title="Language - Change interface language">🌐</label>
            <div class="control-content">
                <select id="language" onchange="changeLanguage(this.value)">
                    <option value="en">English</option>
                    <option value="he">עברית</option>
                    <option value="ar">العربية</option>
                    <option value="es">Español</option>
                    <option value="fr">Français</option>
                    <option value="de">Deutsch</option>
                </select>
            </div>
        </div>

        <!-- Testing Controls -->
        <div class="control-group">
            <label title="Accessibility Testing - Check website accessibility">✓</label>
            <div class="control-content">
                <div class="control-buttons">
                    <button onclick="runAccessibilityTests()" title="Run Tests - Check accessibility compliance">Test</button>
                    <button onclick="generateReport()" title="Generate Report - Create accessibility report">Report</button>
                </div>
            </div>
        </div>

        <!-- Reset Controls -->
        <div class="control-group">
            <label title="Reset to Default - Restore all settings to default">↺</label>
            <div class="control-content">
                <div class="control-buttons">
                    <button onclick="resetToDefault()" title="Reset to Default - Restore all settings to default">Reset</button>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <header>
            <h1>Accessify - Web Accessibility Toolkit Demo</h1>
            <p>This demo showcases the comprehensive accessibility features of Accessify, supporting WCAG 2.1 AA and Israeli Standard 5568.</p>
        </header>

        <nav id="navigation" class="navigation-demo" role="navigation" aria-label="Main navigation">
            <a href="#visual" aria-current="page">Visual Accessibility</a>
            <a href="#navigation-demo">Navigation</a>
            <a href="#reading">Reading Support</a>
            <a href="#motor">Motor Support</a>
            <a href="#multilingual">Multilingual</a>
            <a href="#testing">Testing</a>
        </nav>

        <main id="main-content">
            <!-- Visual Accessibility Demo -->
            <section id="visual" class="demo-section">
                <h2>Visual Accessibility Features</h2>
                <p>Test the visual accessibility features including text size adjustment, contrast modes, and themes.</p>
                
                <div class="test-content">
                    <h3>Text Size Test</h3>
                    <p>This text should be adjustable from 50% to 300% of its original size. Use the controls above or keyboard shortcuts (Alt + Plus/Minus) to adjust.</p>
                    
                    <h3>Contrast Test</h3>
                    <p>This section tests different contrast modes. Try switching between normal, high contrast, inverted, and grayscale modes.</p>
                    
                    <h3>Color Test</h3>
                    <p>This text should be readable in all color themes. The colorblind-friendly theme uses colors that are distinguishable for people with color vision deficiencies.</p>
                    
                    <h3>Focus Indicators</h3>
                    <p>Tab through the following elements to see enhanced focus indicators:</p>
                    <button class="button">Button 1</button>
                    <button class="button">Button 2</button>
                    <a href="#" class="button">Link Button</a>
                    
                    <h3>Alt Text Generation Test</h3>
                    <p>These images will automatically get alt text generated by Accessify:</p>
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzAwNjZjYyIvPjx0ZXh0IHg9IjUwIiB5PSI1NSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+U2FtcGxlIEltYWdlPC90ZXh0Pjwvc3ZnPg==" style="width: 100px; height: 100px; border: 1px solid #ccc; margin: 5px;" title="Sample Image">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzMzY2M2NiIvPjx0ZXh0IHg9IjUwIiB5PSI1NSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+R3JlZW4gSW1hZ2U8L3RleHQ+PC9zdmc+" style="width: 100px; height: 100px; border: 1px solid #ccc; margin: 5px;" data-alt="Green colored image">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2ZmNjYwMCIvPjx0ZXh0IHg9IjUwIiB5PSI1NSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+T3JhbmdlIEltYWdlPC90ZXh0Pjwvc3ZnPg==" style="width: 100px; height: 100px; border: 1px solid #ccc; margin: 5px;">
                </div>
            </section>

            <!-- Navigation Demo -->
            <section id="navigation-demo" class="demo-section">
                <h2>Navigation Accessibility</h2>
                <p>Test keyboard navigation, skip links, and focus management.</p>
                
                <div class="test-content">
                    <h3>Keyboard Navigation</h3>
                    <p>Use the Tab key to navigate through the following form elements. The focus should be clearly visible and follow a logical order.</p>
                    
                    <div class="form-demo">
                        <label for="name">Name:</label>
                        <input type="text" id="name" name="name" aria-required="true">
                        
                        <label for="email">Email:</label>
                        <input type="email" id="email" name="email" aria-required="true">
                        
                        <label for="country">Country:</label>
                        <select id="country" name="country">
                            <option value="">Select a country</option>
                            <option value="us">United States</option>
                            <option value="uk">United Kingdom</option>
                            <option value="ca">Canada</option>
                            <option value="il">Israel</option>
                        </select>
                        
                        <label for="message">Message:</label>
                        <textarea id="message" name="message" rows="4" aria-required="true"></textarea>
                        
                        <button type="submit">Submit</button>
                        <button type="button" onclick="openModal()">Open Modal</button>
                    </div>
                    
                    <h3>Skip Links</h3>
                    <p>Press Alt + S to skip to the main content, or use the skip links at the top of the page.</p>
                </div>
            </section>

            <!-- Reading Support Demo -->
            <section id="reading" class="demo-section">
                <h2>Reading & Comprehension Support</h2>
                <p>Test text-to-speech, dyslexia-friendly fonts, and reading guides.</p>
                
                <div class="test-content">
                    <h3>Text-to-Speech</h3>
                    <p>Select this text and use the text-to-speech features. The system supports multiple voices and adjustable speech rate.</p>
                    
                    <button onclick="speakText()">Speak Selected Text</button>
                    <button onclick="speakPage()">Speak Entire Page</button>
                    <button onclick="stopSpeech()">Stop Speech</button>
                    
                    <h3>Dyslexia-Friendly Fonts</h3>
                    <p>This text can be displayed in dyslexia-friendly fonts like OpenDyslexic, Lexend, or Atkinson Hyperlegible.</p>
                    
                    <h3>Reading Guides</h3>
                    <p>Reading guides and rulers help users track text while reading. The system can highlight text as it's being read aloud.</p>
                </div>
            </section>

            <!-- Motor Support Demo -->
            <section id="motor" class="demo-section">
                <h2>Motor & Mobility Support</h2>
                <p>Test large targets, gesture alternatives, and voice commands.</p>
                
                <div class="test-content">
                    <h3>Large Targets</h3>
                    <p>Interactive elements are enlarged to meet accessibility guidelines (minimum 44px). Hover over buttons to see the enlarged target area.</p>
                    
                    <button class="button">Large Target Button</button>
                    <button class="button">Another Large Button</button>
                    
                    <h3>Voice Commands</h3>
                    <p>Use voice commands to control the page. Try saying:</p>
                    <ul>
                        <li>"Scroll up" or "Scroll down"</li>
                        <li>"Increase text size" or "Decrease text size"</li>
                        <li>"Toggle contrast"</li>
                        <li>"Speak page"</li>
                        <li>"Go back" or "Go forward"</li>
                    </ul>
                    
                    <h3>Switch Navigation</h3>
                    <p>Switch navigation allows users to navigate through interactive elements using alternative input devices.</p>
                </div>
            </section>

            <!-- Multilingual Demo -->
            <section id="multilingual" class="demo-section">
                <h2>Multilingual & RTL Support</h2>
                <p>Test Hebrew and Arabic language support with RTL layout.</p>
                
                <div class="test-content">
                    <h3>Hebrew Text (RTL)</h3>
                    <div class="rtl-demo hebrew-text">
                        <p>זהו טקסט בעברית שמדגים תמיכה מלאה בכיוון מימין לשמאל. הטקסט צריך להיות קריא ונגיש עם כל התכונות של Accessify.</p>
                        <p>המערכת תומכת בנווט מקלדת, קריאה בקול, וכל התכונות האחרות גם בעברית.</p>
                        <button class="button">כפתור בעברית</button>
                    </div>
                    
                    <h3>Language Switching</h3>
                    <button onclick="switchToHebrew()">Switch to Hebrew</button>
                    <button onclick="switchToEnglish()">Switch to English</button>
                    <button onclick="switchToArabic()">Switch to Arabic</button>
                </div>
            </section>

            <!-- ARIA Enhancement Demo -->
            <section id="aria-demo" class="demo-section">
                <h2>ARIA Enhancement Features</h2>
                <p>Test the comprehensive ARIA labeling and accessibility enhancements.</p>
                
                <div class="test-content">
                    <h3>Form Elements</h3>
                    <p>These form elements will be automatically enhanced with proper ARIA attributes:</p>
                    <form style="margin: 20px 0;">
                        <label for="name">Name:</label>
                        <input type="text" id="name" name="name" required>
                        
                        <label for="email">Email:</label>
                        <input type="email" id="email" name="email" required>
                        
                        <label for="message">Message:</label>
                        <textarea id="message" name="message" rows="4" cols="50"></textarea>
                        
                        <button type="submit">Submit</button>
                    </form>
                    
                    <h3>Interactive Elements</h3>
                    <p>These elements will be enhanced with proper roles and keyboard support:</p>
                    <div onclick="alert('Clicked!')" style="display: inline-block; padding: 10px; background: #0066cc; color: white; cursor: pointer; margin: 5px; border-radius: 4px;">
                        Clickable Div
                    </div>
                    <span onclick="alert('Span clicked!')" style="display: inline-block; padding: 10px; background: #33cc66; color: white; cursor: pointer; margin: 5px; border-radius: 4px;">
                        Clickable Span
                    </span>
                    
                    <h3>Live Regions</h3>
                    <p>Test live region announcements:</p>
                    <button class="button" onclick="testLiveRegions()">Test Live Regions</button>
                </div>
            </section>

            <!-- Testing Demo -->
            <section id="testing" class="demo-section">
                <h2>Accessibility Testing & Compliance</h2>
                <p>Run automated accessibility tests and generate compliance reports.</p>
                
                <div class="test-content">
                    <h3>Automated Testing</h3>
                    <p>Accessify includes comprehensive testing tools for WCAG 2.1 AA and Israeli Standard 5568 compliance.</p>
                    
                    <button onclick="runWCAGTests()">Run WCAG Tests</button>
                    <button onclick="runIsraeliStandardTests()">Run Israeli Standard Tests</button>
                    <button onclick="runAxeTests()">Run Axe Tests</button>
                    <button onclick="runEnhancedComplianceTests()">Run Enhanced Tests</button>
                    
                    <div id="test-results" class="status" style="display: none;">
                        <h4>Test Results</h4>
                        <div id="test-output"></div>
                    </div>
                    
                    <h3>Compliance Report</h3>
                    <p>Generate a detailed compliance report showing your accessibility score and recommendations.</p>
                    
                    <button onclick="generateComplianceReport()">Generate Report</button>
                    
                    <div id="compliance-report" class="status" style="display: none;">
                        <h4>Compliance Report</h4>
                        <div id="report-output"></div>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>&copy; 2024 Accessify. A comprehensive web accessibility toolkit supporting WCAG 2.1 AA and Israeli Standard 5568.</p>
        </footer>
    </div>

    <!-- Modal for testing focus trapping -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h3>Modal Dialog</h3>
            <p>This modal tests focus trapping. Press Tab to navigate within the modal, and Escape to close it.</p>
            <button onclick="closeModal()">Close Modal</button>
        </div>
    </div>

    <!-- Include Accessify -->
    <script src="dist/accessify.min.js"></script>
    
    <script>
        // Initialize Accessify
        let accessify;
        let dashboardVisible = true;
        let currentLanguage = 'en';
        
        // Translation data - Easy to implement in other websites
        // Add your own language translations by adding new objects to this translations object
        // Each language should have all the keys listed in the English (en) object
        const translations = {
            en: {
                title: "Accessibility Controls",
                textSize: "Text Size",
                contrast: "Contrast",
                theme: "Theme",
                voiceCommands: "Voice Commands",
                language: "Language",
                testing: "Accessibility Testing",
                increaseText: "Increase Text Size",
                decreaseText: "Decrease Text Size",
                toggleVoice: "Toggle Voice Commands",
                toggleSwitch: "Toggle Switch Navigation",
                runTests: "Run Tests",
                generateReport: "Generate Report",
                reset: "Reset to Default",
                // Contrast options
                normal: "Normal",
                high: "High",
                inverted: "Inverted",
                grayscale: "Grayscale",
                // Theme options
                default: "Default",
                dark: "Dark",
                light: "Light",
                colorblindFriendly: "Colorblind Friendly",
                // Page content
                pageTitle: "Accessify - Web Accessibility Toolkit Demo",
                pageSubtitle: "This demo showcases the comprehensive accessibility features of Accessify, supporting WCAG 2.1 AA and Israeli Standard 5568.",
                visualAccessibility: "Visual Accessibility",
                navigationDemo: "Navigation",
                readingSupport: "Reading Support",
                motorMobility: "Motor & Mobility",
                multilingualDemo: "Multilingual & RTL",
                testingDemo: "Testing & Compliance",
                // Visual section
                visualTitle: "Visual Accessibility Features",
                visualDesc: "Adjust text size, contrast, and visual elements for better readability.",
                // Navigation section
                navTitle: "Navigation & Interaction",
                navDesc: "Test keyboard navigation, focus management, and alternative input methods.",
                // Reading section
                readingTitle: "Reading & Comprehension",
                readingDesc: "Experience text-to-speech, dyslexia-friendly fonts, and reading aids.",
                // Motor section
                motorTitle: "Motor & Mobility Support",
                motorDesc: "Test large targets, voice commands, and gesture alternatives.",
                // Multilingual section
                multiTitle: "Multilingual & RTL Support",
                multiDesc: "Experience Hebrew, Arabic, and other language support with RTL layout.",
                // Testing section
                testTitle: "Testing & Compliance",
                testDesc: "Run accessibility tests and generate compliance reports."
            },
            he: {
                title: "בקרות נגישות",
                textSize: "גודל טקסט",
                contrast: "ניגודיות",
                theme: "ערכת נושא",
                voiceCommands: "פקודות קול",
                language: "שפה",
                testing: "בדיקת נגישות",
                increaseText: "הגדל טקסט",
                decreaseText: "הקטן טקסט",
                toggleVoice: "הפעל פקודות קול",
                toggleSwitch: "הפעל ניווט מתג",
                runTests: "הרץ בדיקות",
                generateReport: "צור דוח",
                reset: "איפוס לברירת מחדל",
                // Contrast options
                normal: "רגיל",
                high: "גבוה",
                inverted: "הפוך",
                grayscale: "גווני אפור",
                // Theme options
                default: "ברירת מחדל",
                dark: "כהה",
                light: "בהיר",
                colorblindFriendly: "ידידותי לעיוורי צבעים",
                // Page content
                pageTitle: "Accessify - הדגמת ערכת נגישות אינטרנט",
                pageSubtitle: "הדגמה זו מציגה את תכונות הנגישות המקיפות של Accessify, התומך בתקן WCAG 2.1 AA ובתקן הישראלי 5568.",
                visualAccessibility: "נגישות חזותית",
                navigationDemo: "ניווט",
                readingSupport: "תמיכה בקריאה",
                motorMobility: "מוטוריקה וניידות",
                multilingualDemo: "רב-לשוני ו-RTL",
                testingDemo: "בדיקות ותאימות",
                // Visual section
                visualTitle: "תכונות נגישות חזותית",
                visualDesc: "התאם את גודל הטקסט, הניגודיות ואלמנטים חזותיים לקריאה טובה יותר.",
                // Navigation section
                navTitle: "ניווט ואינטראקציה",
                navDesc: "בדוק ניווט במקלדת, ניהול פוקוס ושיטות קלט חלופיות.",
                // Reading section
                readingTitle: "קריאה והבנה",
                readingDesc: "חווה טקסט-לדיבור, גופנים ידידותיים לדיסלקציה ועזרי קריאה.",
                // Motor section
                motorTitle: "תמיכה במוטוריקה וניידות",
                motorDesc: "בדוק יעדים גדולים, פקודות קול וחלופות מחוות.",
                // Multilingual section
                multiTitle: "תמיכה רב-לשונית ו-RTL",
                multiDesc: "חווה תמיכה בעברית, ערבית ושפות אחרות עם פריסת RTL.",
                // Testing section
                testTitle: "בדיקות ותאימות",
                testDesc: "הרץ בדיקות נגישות וצור דוחות תאימות."
            },
            ar: {
                title: "أدوات التحكم في إمكانية الوصول",
                textSize: "حجم النص",
                contrast: "التباين",
                theme: "المظهر",
                voiceCommands: "الأوامر الصوتية",
                language: "اللغة",
                testing: "اختبار إمكانية الوصول",
                increaseText: "تكبير النص",
                decreaseText: "تصغير النص",
                toggleVoice: "تبديل الأوامر الصوتية",
                toggleSwitch: "تبديل التنقل بالمفتاح",
                runTests: "تشغيل الاختبارات",
                generateReport: "إنشاء تقرير",
                reset: "إعادة تعيين للافتراضي",
                // Contrast options
                normal: "عادي",
                high: "عالي",
                inverted: "معكوس",
                grayscale: "تدرج رمادي",
                // Theme options
                default: "افتراضي",
                dark: "داكن",
                light: "فاتح",
                colorblindFriendly: "صديق للمكفوفين لونياً",
                // Page content
                pageTitle: "Accessify - عرض مجموعة أدوات إمكانية الوصول",
                pageSubtitle: "يعرض هذا العرض التوضيحي ميزات إمكانية الوصول الشاملة لـ Accessify، مع دعم WCAG 2.1 AA والمعيار الإسرائيلي 5568.",
                visualAccessibility: "إمكانية الوصول البصرية",
                navigationDemo: "التنقل",
                readingSupport: "دعم القراءة",
                motorMobility: "الحركة والتنقل",
                multilingualDemo: "متعدد اللغات وRTL",
                testingDemo: "الاختبار والامتثال",
                // Visual section
                visualTitle: "ميزات إمكانية الوصول البصرية",
                visualDesc: "اضبط حجم النص والتباين والعناصر البصرية لقراءة أفضل.",
                // Navigation section
                navTitle: "التنقل والتفاعل",
                navDesc: "اختبر التنقل بلوحة المفاتيح وإدارة التركيز وطرق الإدخال البديلة.",
                // Reading section
                readingTitle: "القراءة والفهم",
                readingDesc: "جرب تحويل النص إلى كلام والخطوط الصديقة لعسر القراءة ومساعدات القراءة.",
                // Motor section
                motorTitle: "دعم الحركة والتنقل",
                motorDesc: "اختبر الأهداف الكبيرة والأوامر الصوتية وبدائل الإيماءات.",
                // Multilingual section
                multiTitle: "دعم متعدد اللغات وRTL",
                multiDesc: "جرب دعم العبرية والعربية واللغات الأخرى مع تخطيط RTL.",
                // Testing section
                testTitle: "الاختبار والامتثال",
                testDesc: "شغل اختبارات إمكانية الوصول وأنشئ تقارير الامتثال."
            },
            es: {
                title: "Controles de Accesibilidad",
                textSize: "Tamaño de Texto",
                contrast: "Contraste",
                theme: "Tema",
                voiceCommands: "Comandos de Voz",
                language: "Idioma",
                testing: "Pruebas de Accesibilidad",
                increaseText: "Aumentar Texto",
                decreaseText: "Disminuir Texto",
                toggleVoice: "Alternar Comandos de Voz",
                toggleSwitch: "Alternar Navegación por Interruptor",
                runTests: "Ejecutar Pruebas",
                generateReport: "Generar Informe",
                reset: "Restablecer por Defecto",
                // Contrast options
                normal: "Normal",
                high: "Alto",
                inverted: "Invertido",
                grayscale: "Escala de Grises",
                // Theme options
                default: "Por Defecto",
                dark: "Oscuro",
                light: "Claro",
                colorblindFriendly: "Amigable para Daltónicos"
            },
            fr: {
                title: "Contrôles d'Accessibilité",
                textSize: "Taille du Texte",
                contrast: "Contraste",
                theme: "Thème",
                voiceCommands: "Commandes Vocales",
                language: "Langue",
                testing: "Tests d'Accessibilité",
                increaseText: "Augmenter le Texte",
                decreaseText: "Diminuer le Texte",
                toggleVoice: "Basculer les Commandes Vocales",
                toggleSwitch: "Basculer la Navigation par Interrupteur",
                runTests: "Exécuter les Tests",
                generateReport: "Générer un Rapport",
                reset: "Réinitialiser par Défaut",
                // Contrast options
                normal: "Normal",
                high: "Élevé",
                inverted: "Inversé",
                grayscale: "Niveaux de Gris",
                // Theme options
                default: "Par Défaut",
                dark: "Sombre",
                light: "Clair",
                colorblindFriendly: "Convivial pour les Daltoniens"
            },
            de: {
                title: "Barrierefreiheits-Steuerung",
                textSize: "Textgröße",
                contrast: "Kontrast",
                theme: "Design",
                voiceCommands: "Sprachbefehle",
                language: "Sprache",
                testing: "Barrierefreiheits-Tests",
                increaseText: "Text vergrößern",
                decreaseText: "Text verkleinern",
                toggleVoice: "Sprachbefehle umschalten",
                toggleSwitch: "Schalter-Navigation umschalten",
                runTests: "Tests ausführen",
                generateReport: "Bericht erstellen",
                reset: "Auf Standard zurücksetzen",
                // Contrast options
                normal: "Normal",
                high: "Hoch",
                inverted: "Invertiert",
                grayscale: "Graustufen",
                // Theme options
                default: "Standard",
                dark: "Dunkel",
                light: "Hell",
                colorblindFriendly: "Farbenblind-freundlich"
            }
        };
        
        // Language change function
        function changeLanguage(lang) {
            // Check if the language is supported
            if (!translations[lang]) {
                console.warn(`Language ${lang} not supported, falling back to English`);
                lang = 'en';
            }
            
            currentLanguage = lang;
            updateTranslations();
            
            // Update Accessify language if available
            if (accessify && accessify.multilingual) {
                accessify.multilingual.setLanguage(lang);
            }
        }
        
        // Update translations - This function translates all UI elements
        // Easy to implement in other websites - just call this function when language changes
        function updateTranslations() {
            let t = translations[currentLanguage];
            
            // Safety check - if translation doesn't exist, fall back to English
            if (!t) {
                console.warn(`Translation for ${currentLanguage} not found, using English`);
                currentLanguage = 'en';
                t = translations[currentLanguage];
                if (!t) {
                    console.error('English translation not found!');
                    return;
                }
            }
            
            // Update dashboard title
            const dashboardTitle = document.querySelector('.accessibility-controls h3');
            if (dashboardTitle) {
                dashboardTitle.textContent = t.title;
            }
            
            // Update tooltips with null checks
            const textSizeLabel = document.querySelector('label[for="text-size"]');
            if (textSizeLabel) textSizeLabel.title = t.textSize;
            
            const contrastLabel = document.querySelector('label[for="contrast"]');
            if (contrastLabel) contrastLabel.title = t.contrast;
            
            const themeLabel = document.querySelector('label[for="theme"]');
            if (themeLabel) themeLabel.title = t.theme;
            
            // Find labels by their content or other attributes
            const labels = document.querySelectorAll('.control-group label');
            labels.forEach(label => {
                const title = label.getAttribute('title');
                if (title) {
                    if (title.includes('Voice Commands') || title.includes('🎤')) {
                        label.title = t.voiceCommands;
                    } else if (title.includes('Language') || title.includes('🌐')) {
                        label.title = t.language;
                    } else if (title.includes('Accessibility Testing') || title.includes('🧪')) {
                        label.title = t.testing;
                    } else if (title.includes('Reset to Default') || title.includes('🔄')) {
                        label.title = t.reset;
                    }
                }
            });
            
            // Update button tooltips with null checks
            const increaseBtn = document.querySelector('button[onclick="increaseTextSize()"]');
            if (increaseBtn) increaseBtn.title = t.increaseText;
            
            const decreaseBtn = document.querySelector('button[onclick="decreaseTextSize()"]');
            if (decreaseBtn) decreaseBtn.title = t.decreaseText;
            
            const voiceBtn = document.querySelector('button[onclick="toggleVoiceCommands()"]');
            if (voiceBtn) voiceBtn.title = t.toggleVoice;
            
            const switchBtn = document.querySelector('button[onclick="toggleSwitchNavigation()"]');
            if (switchBtn) switchBtn.title = t.toggleSwitch;
            
            const testBtn = document.querySelector('button[onclick="runAccessibilityTests()"]');
            if (testBtn) testBtn.title = t.runTests;
            
            const reportBtn = document.querySelector('button[onclick="generateReport()"]');
            if (reportBtn) reportBtn.title = t.generateReport;
            
            const resetBtn = document.querySelector('button[onclick="resetToDefault()"]');
            if (resetBtn) resetBtn.title = t.reset;
            
            // Update page content
            const pageTitle = document.querySelector('h1');
            if (pageTitle) pageTitle.textContent = t.pageTitle;
            
            const pageSubtitle = document.querySelector('header p');
            if (pageSubtitle) pageSubtitle.textContent = t.pageSubtitle;
            
            // Update navigation links
            const navLinks = document.querySelectorAll('nav a');
            if (navLinks.length >= 6) {
                navLinks[0].textContent = t.visualAccessibility;
                navLinks[1].textContent = t.navigationDemo;
                navLinks[2].textContent = t.readingSupport;
                navLinks[3].textContent = t.motorMobility;
                navLinks[4].textContent = t.multilingualDemo;
                navLinks[5].textContent = t.testingDemo;
            }
            
            // Update section titles and descriptions
            const sections = document.querySelectorAll('section h2');
            const sectionDescs = document.querySelectorAll('section p');
            
            if (sections.length >= 6) {
                sections[0].textContent = t.visualTitle;
                sections[1].textContent = t.navTitle;
                sections[2].textContent = t.readingTitle;
                sections[3].textContent = t.motorTitle;
                sections[4].textContent = t.multiTitle;
                sections[5].textContent = t.testTitle;
            }
            
            if (sectionDescs.length >= 6) {
                sectionDescs[0].textContent = t.visualDesc;
                sectionDescs[1].textContent = t.navDesc;
                sectionDescs[2].textContent = t.readingDesc;
                sectionDescs[3].textContent = t.motorDesc;
                sectionDescs[4].textContent = t.multiDesc;
                sectionDescs[5].textContent = t.testDesc;
            }
            
            // Update contrast options
            const contrastSelect = document.getElementById('contrast');
            if (contrastSelect) {
                const options = contrastSelect.querySelectorAll('option');
                options.forEach(option => {
                    const value = option.value;
                    if (value === 'normal') option.textContent = t.normal;
                    else if (value === 'high') option.textContent = t.high;
                    else if (value === 'inverted') option.textContent = t.inverted;
                    else if (value === 'grayscale') option.textContent = t.grayscale;
                });
            }
            
            // Update theme options
            const themeSelect = document.getElementById('theme');
            if (themeSelect) {
                const options = themeSelect.querySelectorAll('option');
                options.forEach(option => {
                    const value = option.value;
                    if (value === 'default') option.textContent = t.default;
                    else if (value === 'dark') option.textContent = t.dark;
                    else if (value === 'light') option.textContent = t.light;
                    else if (value === 'colorblind-friendly') option.textContent = t.colorblindFriendly;
                });
            }
            
            // Update direction for RTL languages
            if (currentLanguage === 'he' || currentLanguage === 'ar') {
                document.documentElement.setAttribute('dir', 'rtl');
                document.documentElement.setAttribute('lang', currentLanguage);
            } else {
                document.documentElement.setAttribute('dir', 'ltr');
                document.documentElement.setAttribute('lang', currentLanguage);
            }
        }
        
        // Reset to default function
        function resetToDefault() {
            if (accessify) {
                // Reset visual settings
                if (accessify.visual) {
                    accessify.visual.resetTextSize();
                    accessify.visual.setContrastMode('normal');
                    accessify.visual.setTheme('default');
                    accessify.visual.setBrightness(1.0);
                }
                
                // Reset reading settings
                if (accessify.reading) {
                    accessify.reading.reset();
                }
                
                // Reset language to English
                currentLanguage = 'en';
                document.getElementById('language').value = 'en';
                updateTranslations();
                
                // Reset Accessify language
                if (accessify.multilingual) {
                    accessify.multilingual.setLanguage('en');
                }
                
                // Reset form controls
                document.getElementById('text-size').value = 1;
                document.getElementById('contrast').value = 'normal';
                document.getElementById('theme').value = 'default';
                
                console.log('All settings reset to default');
            }
        }
        
        // Dashboard toggle function
        function toggleDashboard() {
            const dashboard = document.getElementById('accessibility-controls');
            const toggle = document.getElementById('dashboard-toggle');
            
            if (dashboardVisible) {
                dashboard.classList.add('hidden');
                toggle.style.transform = 'rotate(180deg)';
                dashboardVisible = false;
            } else {
                dashboard.classList.remove('hidden');
                toggle.style.transform = 'rotate(0deg)';
                dashboardVisible = true;
            }
        }
        
        async function initAccessify() {
            try {
                accessify = new Accessify({
                    language: 'en',
                    direction: 'ltr',
                    theme: 'default',
                    debug: true,
                    visual: {
                        textSize: { enabled: true },
                        contrast: { enabled: true },
                        themes: { enabled: true }
                    },
                    navigation: {
                        keyboard: { enabled: true },
                        skipLinks: { enabled: true }
                    },
                    reading: {
                        textToSpeech: { enabled: true },
                        fonts: { enabled: true }
                    },
                    motor: {
                        targets: { enabled: true },
                        voice: { enabled: true }
                    },
                    multilingual: {
                        enabled: true,
                        rtl: { enabled: true }
                    },
                    plugins: {
                        enabled: true,
                        builtIn: ['textToSpeech', 'voiceCommands', 'switchNavigation']
                    }
                });
                
                await accessify.init();
                console.log('Accessify initialized successfully');
                
                // Store instance globally for ErrorHandler access
                window.accessifyInstance = accessify;
                
                // Set up event listeners
                setupEventListeners();
                
            } catch (error) {
                console.error('Failed to initialize Accessify:', error);
                showError('Failed to initialize Accessify: ' + error.message);
            }
        }
        
        function setupEventListeners() {
            // Text size control
            const textSizeSlider = document.getElementById('text-size');
            textSizeSlider.addEventListener('input', (e) => {
                accessify.visual.setTextSize(parseFloat(e.target.value));
            });
            
            // Listen for Accessify events
            accessify.on('textSizeChanged', (size) => {
                textSizeSlider.value = size;
                showStatus(`Text size changed to ${Math.round(size * 100)}%`);
            });
            
            accessify.on('contrastModeChanged', (mode) => {
                document.getElementById('contrast').value = mode;
                showStatus(`Contrast mode changed to ${mode}`);
            });
            
            accessify.on('themeChanged', (theme) => {
                document.getElementById('theme').value = theme;
                showStatus(`Theme changed to ${theme}`);
            });
            
            accessify.on('voiceCommand', (command) => {
                showStatus(`Voice command: ${command}`);
            });
            
            accessify.on('accessibilityTestsCompleted', (results) => {
                displayTestResults(results);
            });
        }
        
        // Visual accessibility functions
        function increaseTextSize() {
            console.log('increaseTextSize called', { accessify: !!accessify, visual: !!(accessify && accessify.visual) });
            if (accessify && accessify.visual) {
                accessify.visual.increaseTextSize();
            } else {
                console.warn('Accessify not initialized yet');
            }
        }
        
        function decreaseTextSize() {
            if (accessify && accessify.visual) {
                accessify.visual.decreaseTextSize();
            } else {
                console.warn('Accessify not initialized yet');
            }
        }
        
        function setContrast(mode) {
            if (accessify && accessify.visual) {
                accessify.visual.setContrastMode(mode);
            } else {
                console.warn('Accessify not initialized yet');
            }
        }
        
        function setTheme(theme) {
            if (accessify && accessify.visual) {
                accessify.visual.setTheme(theme);
            } else {
                console.warn('Accessify not initialized yet');
            }
        }
        
        // Reading accessibility functions
        function speakText() {
            if (accessify && accessify.reading) {
                const selection = window.getSelection();
                if (selection.toString().trim()) {
                    accessify.reading.speak(selection.toString());
                } else {
                    showWarning('Please select some text to speak');
                }
            } else {
                console.warn('Accessify not initialized yet');
            }
        }
        
        function speakPage() {
            if (accessify && accessify.reading) {
                const text = document.body.textContent;
                accessify.reading.speak(text);
            } else {
                console.warn('Accessify not initialized yet');
            }
        }
        
        function stopSpeech() {
            if (accessify && accessify.reading) {
                accessify.reading.stop();
            } else {
                console.warn('Accessify not initialized yet');
            }
        }
        
        // Motor accessibility functions
        function toggleVoiceCommands() {
            const voicePlugin = accessify.pluginManager.getPlugin('voiceCommands');
            if (voicePlugin) {
                if (voicePlugin.isListening) {
                    voicePlugin.stopListening();
                    showStatus('Voice commands stopped');
                } else {
                    voicePlugin.startListening();
                    showStatus('Voice commands started');
                }
            }
        }
        
        function toggleSwitchNavigation() {
            const switchPlugin = accessify.pluginManager.getPlugin('switchNavigation');
            if (switchPlugin) {
                if (switchPlugin.isScanning) {
                    switchPlugin.stopScanning();
                    showStatus('Switch navigation stopped');
                } else {
                    switchPlugin.startScanning();
                    showStatus('Switch navigation started');
                }
            }
        }
        
        // Multilingual functions
        function switchToHebrew() {
            accessify.multilingual.setLanguage('he');
            accessify.multilingual.setDirection('rtl');
            showStatus('Switched to Hebrew (RTL)');
        }
        
        function switchToEnglish() {
            accessify.multilingual.setLanguage('en');
            accessify.multilingual.setDirection('ltr');
            showStatus('Switched to English (LTR)');
        }
        
        function switchToArabic() {
            accessify.multilingual.setLanguage('ar');
            accessify.multilingual.setDirection('rtl');
            showStatus('Switched to Arabic (RTL)');
        }
        
        // Testing functions
        async function runAccessibilityTests() {
            try {
                showStatus('Running accessibility tests...');
                const results = await accessify.testing.runAccessibilityTests();
                displayTestResults(results);
            } catch (error) {
                showError('Failed to run tests: ' + error.message);
            }
        }
        
        async function runWCAGTests() {
            try {
                showStatus('Running WCAG tests...');
                const results = await accessify.testing.runWCAGTests();
                displayTestResults({ wcag: results });
            } catch (error) {
                showError('Failed to run WCAG tests: ' + error.message);
            }
        }
        
        async function runIsraeliStandardTests() {
            try {
                showStatus('Running Israeli Standard tests...');
                const results = await accessify.testing.runIsraeliStandardTests();
                displayTestResults({ israeliStandard: results });
            } catch (error) {
                showError('Failed to run Israeli Standard tests: ' + error.message);
            }
        }
        
        async function runAxeTests() {
            try {
                showStatus('Running Axe tests...');
                const results = await accessify.testing.runAxeTests();
                displayTestResults({ axe: results });
            } catch (error) {
                showError('Failed to run Axe tests: ' + error.message);
            }
        }
        
        function generateReport() {
            try {
                const report = accessify.testing.generateComplianceReport();
                displayComplianceReport(report);
            } catch (error) {
                showError('Failed to generate report: ' + error.message);
            }
        }
        
        function generateComplianceReport() {
            generateReport();
        }
        
        // New ARIA Enhancement Functions
        function testLiveRegions() {
            if (accessify && accessify.aria) {
                accessify.aria.announce('This is a test announcement from Accessify live regions!', 'polite');
                setTimeout(() => {
                    accessify.aria.announce('This is an assertive announcement!', 'assertive');
                }, 1000);
            } else {
                showError('ARIA enhancement not available');
            }
        }
        
        // Enhanced testing functions
        function runWCAGTests() {
            if (accessify && accessify.testingUtils) {
                accessify.testingUtils.runWCAGTests().then(results => {
                    displayTestResults({ wcag: results });
                }).catch(error => {
                    showError('WCAG tests failed: ' + error.message);
                });
            } else {
                showError('Testing utils not available');
            }
        }
        
        function runIsraeliStandardTests() {
            if (accessify && accessify.testingUtils) {
                accessify.testingUtils.runIsraeliStandardTests().then(results => {
                    displayTestResults({ israeliStandard: results });
                }).catch(error => {
                    showError('Israeli Standard tests failed: ' + error.message);
                });
            } else {
                showError('Testing utils not available');
            }
        }
        
        function runAxeTests() {
            if (accessify && accessify.testingUtils) {
                accessify.testingUtils.runAxeTests().then(results => {
                    displayTestResults({ axe: results });
                }).catch(error => {
                    showError('Axe tests failed: ' + error.message);
                });
            } else {
                showError('Testing utils not available');
            }
        }
        
        // Enhanced compliance testing
        function runEnhancedComplianceTests() {
            if (accessify && accessify.testingUtils) {
                const tests = [
                    { name: 'Color Contrast', test: () => accessify.testingUtils._testColorContrast() },
                    { name: 'Focus Indicators', test: () => accessify.testingUtils._testFocusIndicators() },
                    { name: 'ARIA Implementation', test: () => accessify.testingUtils._testARIAImplementation() },
                    { name: 'Screen Reader Compatibility', test: () => accessify.testingUtils._testScreenReaderCompatibility() },
                    { name: 'RTL Support', test: () => accessify.testingUtils._testRTLSupport() },
                    { name: 'Keyboard Navigation', test: () => accessify.testingUtils._testKeyboardNavigation() }
                ];
                
                const results = {};
                tests.forEach(({ name, test }) => {
                    try {
                        results[name] = test();
                    } catch (error) {
                        results[name] = { passed: false, error: error.message };
                    }
                });
                
                displayEnhancedTestResults(results);
            } else {
                showError('Enhanced testing not available');
            }
        }
        
        function displayEnhancedTestResults(results) {
            const resultsDiv = document.getElementById('test-results');
            const outputDiv = document.getElementById('test-output');
            
            let html = '<h4>Enhanced Test Results</h4>';
            
            Object.entries(results).forEach(([testName, result]) => {
                html += `<h5>${testName}</h5>`;
                html += `<p>Status: ${result.passed ? '✅ Pass' : '❌ Fail'}</p>`;
                
                if (result.violations && result.violations.length > 0) {
                    html += `<p>Violations: ${result.violations.length}</p>`;
                    html += '<ul>';
                    result.violations.forEach(violation => {
                        html += `<li>${violation.message}</li>`;
                    });
                    html += '</ul>';
                }
                
                if (result.recommendations && result.recommendations.length > 0) {
                    html += '<p>Recommendations:</p><ul>';
                    result.recommendations.forEach(rec => {
                        html += `<li>${rec}</li>`;
                    });
                    html += '</ul>';
                }
            });
            
            outputDiv.innerHTML = html;
            resultsDiv.style.display = 'block';
        }
        
        function displayTestResults(results) {
            const resultsDiv = document.getElementById('test-results');
            const outputDiv = document.getElementById('test-output');
            
            let html = '<h4>Test Results</h4>';
            
            if (results.wcag) {
                html += `<h5>WCAG 2.1 AA Compliance</h5>`;
                html += `<p>Score: ${results.wcag.score}% (${results.wcag.compliant ? 'Compliant' : 'Not Compliant'})</p>`;
                html += `<ul>`;
                Object.entries(results.wcag.results).forEach(([test, result]) => {
                    html += `<li>${test}: ${result.passed ? '✅ Pass' : '❌ Fail'}</li>`;
                });
                html += `</ul>`;
            }
            
            if (results.israeliStandard) {
                html += `<h5>Israeli Standard 5568 Compliance</h5>`;
                html += `<p>Score: ${results.israeliStandard.score}% (${results.israeliStandard.compliant ? 'Compliant' : 'Not Compliant'})</p>`;
                html += `<ul>`;
                Object.entries(results.israeliStandard.results).forEach(([test, result]) => {
                    html += `<li>${test}: ${result.passed ? '✅ Pass' : '❌ Fail'}</li>`;
                });
                html += `</ul>`;
            }
            
            if (results.axe) {
                html += `<h5>Axe Accessibility Tests</h5>`;
                if (results.axe.available) {
                    html += `<p>Score: ${results.axe.score}%</p>`;
                    html += `<p>Violations: ${results.axe.violations.length}</p>`;
                    html += `<p>Passes: ${results.axe.passes.length}</p>`;
                } else {
                    html += `<p>Error: ${results.axe.error}</p>`;
                }
            }
            
            if (results.overall) {
                html += `<h5>Overall Compliance</h5>`;
                html += `<p>Overall Score: ${results.overall.score}% (${results.overall.compliant ? 'Compliant' : 'Not Compliant'})</p>`;
            }
            
            outputDiv.innerHTML = html;
            resultsDiv.style.display = 'block';
            resultsDiv.className = 'status';
        }
        
        function displayComplianceReport(report) {
            const reportDiv = document.getElementById('compliance-report');
            const outputDiv = document.getElementById('report-output');
            
            let html = '<h4>Compliance Report</h4>';
            html += `<p><strong>Overall Score:</strong> ${report.overall.score}%</p>`;
            html += `<p><strong>Overall Status:</strong> ${report.overall.compliant ? '✅ Compliant' : '❌ Not Compliant'}</p>`;
            
            if (report.recommendations && report.recommendations.length > 0) {
                html += `<h5>Recommendations</h5><ul>`;
                report.recommendations.forEach(rec => {
                    html += `<li><strong>${rec.category}:</strong> ${rec.issues.join(', ')}</li>`;
                });
                html += `</ul>`;
            }
            
            if (report.summary) {
                html += `<h5>Summary</h5>`;
                html += `<p>Total Tests: ${report.summary.totalTests}</p>`;
                html += `<p>Passed Tests: ${report.summary.passedTests}</p>`;
                html += `<p>WCAG Compliant: ${report.summary.wcagCompliant ? '✅' : '❌'}</p>`;
                html += `<p>Israeli Standard Compliant: ${report.summary.israeliStandardCompliant ? '✅' : '❌'}</p>`;
            }
            
            outputDiv.innerHTML = html;
            reportDiv.style.display = 'block';
            reportDiv.className = 'status';
        }
        
        // Modal functions
        function openModal() {
            const modal = document.getElementById('modal');
            modal.style.display = 'block';
            // Set focus trap
            accessify.navigation.setFocusTrap(modal);
        }
        
        function closeModal() {
            const modal = document.getElementById('modal');
            modal.style.display = 'none';
            // Clear focus trap
            accessify.navigation._clearFocusTrap();
        }
        
        // Utility functions
        function showStatus(message) {
            console.log('Status:', message);
            // You could add a status display here
        }
        
        function showWarning(message) {
            console.warn('Warning:', message);
            // You could add a warning display here
        }
        
        function showError(message) {
            console.error('Error:', message);
            // You could add an error display here
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initAccessify);
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('modal');
            if (event.target === modal) {
                closeModal();
            }
        }
        
        // Handle escape key for modal
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeModal();
            }
        });
    </script>
</body>
</html>
